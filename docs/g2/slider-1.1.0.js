var Slider=function(t){function e(n){if(i[n])return i[n].exports;var a=i[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";var n=i(2),a=i(1);if(a&&a.Plugin){var r=a.Plugin;r.slider=n}else console.err("Please load the G2 script first!");t.exports=n},function(t,e){t.exports=window.G2},function(t,e,i){"use strict";var n=i(1),a=n.Util,r=n.Base,s=n.Canvas,h=s.Components,g=5,l=function o(t){o.superclass.constructor.call(this,t),this._init()};l.ATTRS={charts:null,height:null,width:null,start:null,end:null,domId:null,xDim:null,yDim:null,middleAttr:{fill:"#D5DAE3",fillOpacity:.2},backgroundAttr:{stroke:"#E2E2E2",fill:"#F3F3F3",globalAlpha:.2,lineWidth:1},range:[0,100],layout:"horizontal",textAttr:{fill:"#333"},handleIcon:"https://t.alipayobjects.com/images/rmsweb/T1YohhXd4bXXXXXXXX.png"},a.extend(l,r),a.augment(l,{_init:function(){this.set("container",document.getElementById(this.get("domId"))),this.set("firstRender","true");var t=this.get("charts"),e=a.isArray(t)?t[0]:t,i=e.get("parent")?e.get("parent").get("forceFit"):e.get("forceFit");i&&window.addEventListener("resize",a.wrapBehavior(this,"_initForceFitEvent"))},_initForceFitEvent:function(){var t=setTimeout(a.wrapBehavior(this,"forceFit"),200);clearTimeout(this.get("resizeTimer")),this.set("resizeTimer",t)},forceFit:function(){var t=this.get("charts"),e=a.isArray(t)?t[0]:t,i=e.get("parent")?e.get("parent").get("width"):e.get("width"),n=this.get("height");if(i!==this.get("width")){var r=this.get("canvas"),s=e.get("filters"),h=this.get("xDim"),g=this.get("container");g.style.backgroundImage="",this.set("start",s[h][0]),this.set("end",s[h][1]),this.set("width",i),r.changeSize(i,n),this.set("changeSize",!0),this.repaint()}},_initCanvas:function(){var t=this.get("width"),e=this.get("height"),i=new s({width:t,height:e,containerDOM:this.get("container"),capture:!1});i.set("fontFamily",n.Global.fontFamily);var a=i.get("el");a.style.position="absolute",a.style.top=0,a.style.left=0,a.style.zIndex=3,this.set("canvas",i)},_initBackground:function(){var t,e=this.get("charts"),i=a.isArray(e)?e[0]:e,r=this.get("xDim"),s=this.get("yDim");if(t=this.get("changeSize")?this.get("xScale"):a.clone(i.getScale(r)),s){var h={};"time"!==t.type&&"timeCat"!==t.type||(h.type="time",h.mask=t.mask);var g=new n.Chart({id:this.get("domId"),width:this.get("plotWidth"),height:this.get("height"),plotCfg:{margin:0}});g.source(i.get("data")),g.col(r,a.mix({range:[0,1],nice:!1},h)),g.axis(!1),g.tooltip(!1),g.legend(!1),g.area().position(r+"*"+s).color("#CED1D4"),g.line().position(r+"*"+s).color("#CED1D4"),g.render();var l=g.get("canvas"),o=l.get("el").parentNode;o.style.marginLeft=this.get("marginLeft")+"px",this.set("bgChart",g)}this.set("xScale",t)},_initRange:function(){var t=this.get("start"),e=this.get("end"),i=this.get("xScale"),n=t?i.scale(t):.3,a=e?i.scale(e):.7,r=[100*n,100*a];return this.set("range",r),r},_getHandleValue:function(t){var e,i=this.get("range"),n=i[0]/100,a=i[1]/100,r=this.get("xScale");return e="min"===t?this.get("start")?this.get("start"):r.invert(n):this.get("end")?this.get("end"):r.invert(a)},_initHorizontalHandle:function(t){var e=this.get("canvas"),i=e.addGroup(),n=this.get("height"),r=this.get("xScale"),s=r.getText(this._getHandleValue(t));i.addShape("Image",{attrs:{x:-n/2,y:0,width:n,height:n,img:this.get("handleIcon")}});var h=i.addShape("Text",{attrs:a.mix({x:"min"===t?-(n/2+g):n/2+g,y:n/2,textAlign:"min"===t?"end":"start",textBaseline:"middle",text:s},this.get("textAttr"))});return this.set(t+"TextElement",h),i},_initSliderBackground:function(){var t=this.get("canvas"),e=t.addGroup();return e.initTransform(),e.translate(0,0),e.addShape("Rect",{attrs:a.mix({x:0,y:0,width:this.get("plotWidth"),height:this.get("height")},this.get("backgroundAttr"))}),e},_initSlider:function(){var t=this.get("canvas"),e=this._initRange(),i=this._initHorizontalHandle("min"),n=this._initHorizontalHandle("max"),a=this._initSliderBackground(),r=t.addGroup(h.Range,{minHandleElement:i,maxHandleElement:n,backgroundElement:a,middleAttr:this.get("middleAttr"),range:e,layout:this.get("layout"),width:this.get("plotWidth"),height:this.get("height")});r.translate(this.get("marginLeft"),0),this.set("rangeElement",r)},_bindEvent:function(){var t=this,e=t.get("rangeElement"),i=t.get("xDim"),n=t.get("xScale");e.on("rangeChange",function(e){var a=e.range,r=a[0]/100,s=a[1]/100,h=n.invert(r),g=n.invert(s),l=n.getText(h),o=n.getText(g);t._updateElement(l,o),t._updateLinkCharts(i,[h,g])})},_updateElement:function(t,e){var i=this.get("minTextElement"),n=this.get("maxTextElement");if(i.attr(a.mix({},i.__attrs,{text:t})),n.attr(a.mix({},n.__attrs,{text:e})),this.get("bgChart")){var r=this.get("bgChart"),s=r.get("canvas").get("el"),h=s.toDataURL("image/png"),g=this.get("container");g.style.width=this.get("width")+"px",g.style.height=this.get("height")+"px",g.style.backgroundImage="url("+h+")",g.style.backgroundRepeat="no-repeat",g.style.backgroundPositionX=this.get("marginLeft")+"px",r.destroy(),this.set("bgChart",null)}this.set("firstRender",!1)},_updateLinkCharts:function(t,e){var i=this,n=a.isArray(i.get("charts"))?i.get("charts"):[i.get("charts")];if(n[0].get("parent")){a.each(n,function(i){i.filter(t,e)});var r=n[0].get("parent");i.get("firstRender")?r.render():r.repaint()}else a.each(n,function(n){n.filter(t,e),i.get("firstRender")?n.render():n.repaint()})},render:function(){var t,e,i=this.get("charts"),n=a.isArray(i)?i[0]:i;n.get("parent")?(t=n.get("parent").get("plotRange"),e=n.get("parent").get("width")):(t=n.get("plotRange"),e=n.get("width")),this.set("plotWidth",t.tr.x-t.tl.x),this.set("marginLeft",t.tl.x),this.set("width",e),this.get("canvas")||this._initCanvas(),this._initBackground(),this._initSlider(),this._bindEvent();var r=this.get("xDim"),s=this._getHandleValue("min"),h=this._getHandleValue("max");this.get("changeSize")||this._updateLinkCharts(r,[s,h]),this.get("canvas").draw()},destroy:function(){var t=this.get("rangeElement");t.off("rangeChange"),this.get("bgChart")&&this.get("bgChart").destroy(),this.get("canvas").destroy();for(var e=this.get("container");e.hasChildNodes();)e.removeChild(e.firstChild);l.superclass.destroy.call(this),window.removeEventListener("resize",a.getWrapBehavior(this,"_initForceFitEvent"))},clear:function(){this.get("canvas").clear(),this.get("bgChart")&&this.get("bgChart").destroy(),this.set("bgChart",null)},repaint:function(){this.set("firstRender",!1),this.clear(),this.render()}}),t.exports=l}]);