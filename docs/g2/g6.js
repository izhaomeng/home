!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("G6",[],e):"object"==typeof exports?exports.G6=e():t.G6=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var i={},r=n(27),a=n(40);i.Util=n(1),i.Color=n(94),i.Canvas=n(16),i.Layout=n(46),i.Math=n(4),i.Matrix=n(2),i.Tween=n(28),i.Graph=n(40),i.Shape=a.Shape,i.Global=a.Global,i.GraphUtil=a.Util,i.registNode=a.registNode,i.registEdge=a.registEdge,r.tracking=!0,i.track=function(t){r.tracking=t},n(123),t.exports=i},function(t,e,n){var i=n(97);t.exports=i},function(t,e,n){var i={Matrix3:n(43),Vector2:n(44),Vector3:n(45)};t.exports=i},function(t,e,n){"use strict";var i=n(1);t.exports=i},function(t,e,n){var i=n(96);t.exports=i},function(t,e,n){"use strict";var i=n(3),r=n(32),a=n(2),s=n(6),o=a.Vector3,u=function(t){u.superclass.constructor.call(this,t)};u.ATTRS={fillOpacity:1,strokeOpacity:1},i.extend(u,r),i.augment(u,{isShape:!0,createPath:function(){},drawInner:function(){var t=this,e=t.get("context"),n=t.attr("lineWidth");t.createPath(),t.hasFill()&&e.fill(),t.hasStroke()&&n>0&&e.stroke()},isPointInPath:function(){return!1},isHit:function(t,e){var n=this,i=n.get("canvas"),r=new o(t,e,1);n.invert(r,i);var a=n.getBBox();if(a&&s.box(a.minX,a.maxX,a.minY,a.maxY,r.x,r.y)){var u=n.__attrs.clip;if(!u)return n.isPointInPath(r.x,r.y);if(u.inside(t,e))return n.isPointInPath(r.x,r.y)}return!1},getBBox:function(){return this.get("box")}}),t.exports=u},function(t,e,n){"use strict";var i=n(20),r=n(21),a=n(15),s=n(19);t.exports={line:function(t,e,n,r,a,s,o){var u=i.box(t,e,n,r,a);if(!this.box(u.minX,u.maxX,u.minY,u.maxY,s,o))return!1;var c=i.pointDistance(t,e,n,r,s,o);return!isNaN(c)&&c<=a/2},polyline:function(t,e,n,i){var r=this,a=t.length-1;if(a<1)return!1;for(var s=0;s<a;s++){var o=t[s][0],u=t[s][1],c=t[s+1][0],h=t[s+1][1];if(r.line(o,u,c,h,e,n,i))return!0}return!1},cubicline:function(t,e,n,i,r,s,o,u,c,h,l){return a.pointDistance(t,e,n,i,r,s,o,u,h,l)<=c/2},quadraticline:function(t,e,n,i,a,s,o,u,c){return r.pointDistance(t,e,n,i,a,s,u,c)<=o/2},arcline:function(t,e,n,i,r,a,o,u,c){return s.pointDistance(t,e,n,i,r,a,u,c)<=o/2},rect:function(t,e,n,i,r,a){return t<=r&&r<=t+n&&e<=a&&a<=e+i},circle:function(t,e,n,i,r){return Math.pow(i-t,2)+Math.pow(r-e,2)<=Math.pow(n,2)},box:function(t,e,n,i,r,a){return t<=r&&r<=e&&n<=a&&a<=i}}},function(t,e,n){"use strict";var i=n(1),r=n(24),a=n(25),s=n(122),o=n(42),u=n(120),c={};i.mix(c,r,a,s,o,u),t.exports=c},function(t,e){"use strict";var n={prefix:"g",backupContext:document.createElement("canvas").getContext("2d"),debug:!1,warn:function(){}};t.exports=n},function(t,e){"use strict";var n={colors:["#4E7CCC","#36B3C3","#4ECDA5","#94E08A","#E2F194","#EDCC72","#F8AB60","#F9815C","#EB4456","#C82B3D"],grid:{line:{stroke:"#F5F5F5",lineWidth:1},cell:10},nodeStyle:{stroke:"#666",fill:"#fff",lineWidth:1,radius:4,fillOpacity:.1},delegationStyle:{stroke:"#108EE9",lineDash:[3,3]},nodeLabelStyle:{fill:"#666",textAlign:"center",textBaseline:"middle",fontSize:14},edgeStyle:{lineWidth:1,stroke:"#999"},edgeLabelStyle:{fill:"#666",textAlign:"center",textBaseline:"middle"},edgeLabelRectStyle:{fill:"white"},anchorPointStyle:{fill:"#108EE9",lineWidth:.1,r:4},anchorPointHoverStyle:{lineWidth:6,stroke:"#108EE9",strokeOpacity:.2},frameRectStyle:{fill:"blue",opacity:.1},nodeControlPointStyle:{r:4,fill:"#fff",shadowBlur:4,shadowColor:"#666"},edgeControlPointStyle:{r:4,fill:"#fff",shadowBlur:4,shadowColor:"#666"},nodeBoxStyle:{stroke:"#108EE9",lineDash:[3,3]},zIndex:{controlPoint:4,anchorPoint:3,delegate:2,node:1,edge:0,nodeLabel:5,edgeLabel:4,edgeLabelBackground:3,hoverShape:6},preciseAnchor:!1,fontFamily:'"Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "\u5fae\u8f6f\u96c5\u9ed1", SimSun, "sans-serif"'};t.exports=n},function(t,e,n){var i=n(8),r={Canvas:n(70),Group:n(33),Shape:n(5),Rect:n(85),Circle:n(74),Ellipse:n(76),Path:n(81),Text:n(86),Line:n(79),Image:n(78),Polygon:n(82),Polyline:n(83),Arc:n(73),Fan:n(77),Cubic:n(75),Quadratic:n(84),debug:function(t){i.debug=t}};t.exports=r},function(t,e,n){function i(t,e,n){var i=new u(1,0).angleTo(t),r=i-c,a=i+c,s=6+3*n;return[{x:e.x-s*Math.cos(r),y:e.y-s*Math.sin(r)},e,{x:e.x-s*Math.cos(a),y:e.y-s*Math.sin(a)}]}function r(t,e){t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y),t.lineTo(e[2].x,e[2].y)}function a(t,e,n,a){r(t,i(e,n,a))}function s(t,e,n){var i=n/Math.sin(c);return t.setLength(i/2),e.sub(t),e}var o=n(2),u=o.Vector2,c=Math.PI/6;t.exports={makeArrow:a,getEndPoint:s}},function(t,e,n){var i=n(88);t.exports=i},function(t,e,n){"use strict";var i=n(10),r=n(1),a=i.Shape.superclass.constructor,s=document.createElement("table"),o=document.createElement("tr"),u=/^\s*<(\w+|!)[^>]*>/,c={tr:document.createElement("tbody"),tbody:s,thead:s,tfoot:s,td:o,th:o,"*":document.createElement("div")};r.mix(r,{getBoundingClientRect:function(t){var e=t.getBoundingClientRect(),n=document.documentElement.clientTop,i=document.documentElement.clientLeft;return{top:e.top-n,bottom:e.bottom-n,left:e.left-i,right:e.right-i}},upperFirst:function(t){return t.replace(/(\w)/,function(t){return t.toUpperCase()})},getStyle:function(t,e){return window.getComputedStyle?window.getComputedStyle(t,null)[e]:t.currentStyle[e]},modiCSS:function(t,e){var n;for(n in e)t.style[n]=e[n];return t},getRatio:function(){return window.devicePixelRatio?window.devicePixelRatio:1},initClassCfgs:function(t){if(!t.__cfg&&t!==a){var e=t.superclass.constructor;e&&!e.__cfg&&r.initClassCfgs(e),t.__cfg={},r.mix(!0,t.__cfg,e.__cfg),r.mix(!0,t.__cfg,t.CFG)}},mixin:function(t,e){var n=t.CFG?"CFG":"ATTRS";if(t&&e){t._mixins=e,t[n]=t[n]||{};var i={};r.each(e,function(e){r.augment(t,e);var a=e[n];a&&r.mix(i,a)}),t[n]=r.mix(i,t[n])}},createDom:function(t){var e=u.test(t)&&RegExp.$1;e in c||(e="*");var n=c[e];return t=t.replace(/(^\s*)|(\s*$)/g,""),n.innerHTML=""+t,n.childNodes[0]}}),t.exports=r},function(t,e,n){"use strict";function i(t,e){if(a.isNumeric(t)&&a.isNumeric(e))return s.number(t,e);if(a.isString(t)&&a.isString(e)){var n=new u(t),i=new u(e);if(n.getType()&&i.getType())return o.color(n,i)}}function r(t,e){if(a.isNumeric(t)&&a.isNumeric(e))return s.unNumber(t,e);if(a.isString(t)&&a.isString(e)){var n=new u(t),i=new u(e);if(n.getType()&&i.getType())return o.unColor(n,i)}}var a=n(1),s=n(58),o=n(55),u=n(17);t.exports={singular:i,unSingular:r}},function(t,e,n){"use strict";function i(t,e,n,i,r){var a=1-r;return a*a*(a*i+3*r*n)+r*r*(r*t+3*a*e)}function r(t,e,n,i,r){var a=1-r;return 3*(((e-t)*a+2*(n-e)*r)*a+(i-n)*r*r)}function a(t,e,n,r,a,s,o,u,c,l,f){var d,g,p,v,x,y,m,_,b=.005,S=1/0,M=1e-4,w=new h(c,l);for(g=0;g<1;g+=.05)p=new h(i(t,n,a,o,g),i(e,r,s,u,g)),v=p.distanceToSquared(w),v<S&&(d=g,S=v);S=1/0;for(var A=0;A<32&&!(b<M);A++)m=d-b,_=d+b,p=new h(i(t,n,a,o,m),i(e,r,s,u,m)),v=p.distanceToSquared(w),m>=0&&v<S?(d=m,S=v):(y=new h(i(t,n,a,o,_),i(e,r,s,u,_)),x=y.distanceToSquared(w),_<=1&&x<S?(d=_,S=x):b*=.5);return f&&(f.x=i(t,n,a,o,d),f.y=i(e,r,s,u,d)),Math.sqrt(S)}function s(t,e,n,i){var r,a,s,o=3*t-9*e+9*n-3*i,u=6*e-12*n+6*i,c=3*n-3*i,h=[];if(l.equal(o,0))l.equal(u,0)||(r=-c/u,r>=0&&r<=1&&h.push(r));else{var f=u*u-4*o*c;l.equal(f,0)?h.push(-u/(2*o)):f>0&&(s=Math.sqrt(f),r=(-u+s)/(2*o),a=(-u-s)/(2*o),r>=0&&r<=1&&h.push(r),a>=0&&a<=1&&h.push(a))}return h}function o(t,e,n,i,r){var a=-3*e+9*n-9*i+3*r,s=t*a+6*e-12*n+6*i;return t*s-3*e+3*n}function u(t,e,n,i,r,a,s,u,c){f.isNull(c)&&(c=1),c=c>1?1:c<0?0:c;for(var h=c/2,l=12,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],g=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,v=0;v<l;v++){var x=h*d[v]+h,y=o(x,t,n,r,s),m=o(x,e,i,a,u),_=y*y+m*m;p+=g[v]*Math.sqrt(_)}return h*p}var c=n(2),h=c.Vector2,l=n(4),f=n(1);t.exports={at:i,derivativeAt:r,projectPoint:function(t,e,n,i,r,s,o,u,c,h){var l={};return a(t,e,n,i,r,s,o,u,c,h,l),l},pointDistance:a,extrema:s,len:u}},function(t,e,n){var i=n(89),r=n(37);i.G=n(10),i.Util=n(13),i.Group=r.GroupBase,t.exports=i},function(t,e,n){t.exports=n(60)},function(t,e,n){"use strict";var i=n(1),r=n(35);i.mix(i,{parsePathString:r.toArray,path2string:r.toString,path2curve:r.toCurve,pathToAbsolute:r.toAbsolute,catmullRom2bezier:r.catmullRomToBezier}),t.exports=i},function(t,e,n){"use strict";function i(t,e,n,i){return{x:Math.cos(i)*n+t,y:Math.sin(i)*n+e}}function r(t,e,n,i){var r,a;return i?t<e?(r=e-t,a=2*Math.PI-n+t):t>n&&(r=2*Math.PI-t+e,a=t-n):(r=t-e,a=n-t),r>a?n:e}function a(t,e,n,i){var a=0;return n-e>=2*Math.PI&&(a=2*Math.PI),e=h.mod(e,2*Math.PI),n=h.mod(n,2*Math.PI)+a,t=h.mod(t,2*Math.PI),i?e>=n?t>n&&t<e?t:r(t,n,e,!0):t<e||t>n?t:r(t,e,n):e<=n?e<t&&t<n?t:r(t,e,n,!0):t>e||t<n?t:r(t,n,e)}function s(t,e,n,i,r,s,o,u,h){var l=new c(o,u),f=new c(t,e),d=new c(1,0),g=c.sub(l,f),p=d.angleTo(g);p=a(p,i,r,s);var v=new c(n*Math.cos(p)+t,n*Math.sin(p)+e);h&&(h.x=v.x,h.y=v.y);var x=l.distanceTo(v);return x}function o(t,e,n,r,s,o){var u=0,c=Math.PI/2,h=Math.PI,f=3*Math.PI/2,d=[],g=a(u,r,s,o);g===u&&d.push(i(t,e,n,u)),g=a(c,r,s,o),g===c&&d.push(i(t,e,n,c)),g=a(h,r,s,o),g===h&&d.push(i(t,e,n,h)),g=a(f,r,s,o),g===f&&d.push(i(t,e,n,f)),d.push(i(t,e,n,r)),d.push(i(t,e,n,s));var p=1/0,v=-(1/0),x=1/0,y=-(1/0);return l.each(d,function(t){p>t.x&&(p=t.x),v<t.x&&(v=t.x),x>t.y&&(x=t.y),y<t.y&&(y=t.y)}),{minX:p,minY:x,maxX:v,maxY:y}}var u=n(2),c=u.Vector2,h=n(4),l=n(1);t.exports={nearAngle:a,projectPoint:function(t,e,n,i,r,a,o,u){var c={};return s(t,e,n,i,r,a,o,u,c),c},pointDistance:s,box:o}},function(t,e,n){"use strict";var i=n(2),r=i.Vector2;t.exports={at:function(t,e,n){return(e-t)*n+t},pointDistance:function(t,e,n,i,a,s){var o=new r(n-t,i-e);if(o.isZero())return NaN;var u=o.vertical();u.normalize();var c=new r(a-t,s-e);return Math.abs(c.dot(u))},box:function(t,e,n,i,r){var a=r/2,s=Math.min(t,n),o=Math.max(t,n),u=Math.min(e,i),c=Math.max(e,i);return{minX:s-a,minY:u-a,maxX:o+a,maxY:c+a}},len:function(t,e,n,i){return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e))}}},function(t,e,n){"use strict";function i(t,e,n,i){var r=1-i;return r*(r*t+2*i*e)+i*i*n}function r(t,e,n,r,a,s,o,c,h){var l,f,d,g,p,v,x,y=.005,m=1/0,_=1e-4,b=new u(o,c);for(p=0;p<1;p+=.05)d=new u(i(t,n,a,p),i(e,r,s,p)),f=d.distanceToSquared(b),f<m&&(l=p,m=f);for(m=1/0,x=0;x<32&&!(y<_);x++){var S=l-y,M=l+y;d=new u(i(t,n,a,S),i(e,r,s,S)),f=d.distanceToSquared(b),S>=0&&f<m?(l=S,m=f):(g=new u(i(t,n,a,M),i(e,r,s,M)),v=g.distanceToSquared(b),M<=1&&v<m?(l=M,m=v):y*=.5)}return h&&(h.x=i(t,n,a,l),h.y=i(e,r,s,l)),Math.sqrt(m)}function a(t,e,n){var i=t+n-2*e;if(o.equal(i,0))return[.5];var r=(t-e)/i;return r<=1&&r>=0?[r]:[]}var s=n(2),o=n(4),u=s.Vector2;t.exports={at:i,projectPoint:function(t,e,n,i,a,s,o,u){var c={};return r(t,e,n,i,a,s,o,u,c),c},pointDistance:r,extrema:a}},function(t,e,n){"use strict";var i=n(1),r=n(12),a=n(39),s=n(2),o=n(41),u=n(9),c=s.Vector3,h=function l(t){l.superclass.constructor.call(this,t),this._init()};h.ATTRS={id:"",type:null,model:{},mapper:null,group:null,controlGroup:null,hoverShape:null,keyShape:null},i.extend(h,r),i.mixin(h,[a]),i.augment(h,{_init:function(){var t=this,e=t.get("type"),n=o.getShape(e);this.set("shapeObj",n)},_calculateBBox:function(){var t,e,n,i,r,a=this,s=a.getKeyShape(),o=s.get("parent"),u=s.getBBox(),h=new c(u.minX,u.minY,1),l=new c(u.maxX,u.maxY,1);return o.apply(h),o.apply(l),t=h.x,e=h.y,n=l.x,i=l.y,r={x:t,y:e,maxX:n,maxY:i,centerX:(n+t)/2,centerY:(i+e)/2,width:n-t,height:i-e},this.set("boxStash",r),r},getKeyShape:function(){var t=this,e=t.get("group"),n=e.get("children"),i=t.get("keyShape");return i||n[0]},getBBox:function(){var t=this.get("boxStash");return t||this._calculateBBox()},getShapeCfg:function(){return this.get("group").get("shapeCfg")},update:function(){var t=this,e=t.get("group");e.clear(),t.draw();var n=t.get("controlGroup");n&&(n.clear(),t._showBox(n),t._showControlPoints(n))},draw:function(){var t,e,n,r=this,a=r.get("model"),s=r.get("mapper"),o=s.mapping(a),u=r.get("group"),c=o.shape,h=r.get("shapeObj");if(u.set("shapeCfg",o),r.beforeDraw(),i.isArray(o.shape))c=o.shape[0];else if(c&&c.startsWith&&c.startsWith("http")){if(!o.size)return t=new Image,e=r.getCanvas(),t.src=o.shape,void(t.onload=function(){return!(!r||r.get("destroyed"))&&(a.size=[t.width,t.height],r.draw(),void e.draw())});c="image"}n=h.draw(c,o,u),r.set("keyShape",n),r.afterDraw()},getCanvas:function(){var t=this.get("group").get("canvas");return t},beforeDraw:function(){},afterDraw:function(){this._calculateBBox()},destroyItem:function(){},destroy:function(){var t=this,e=t.get("group");e&&e.remove();var n=t.get("controlGroup");n&&n.remove(),t.destroyItem(),h.superclass.destroy.call(this)},setActiveStatus:function(t){var e=this,n=e.get("controlGroup");if(n&&n.remove(!0),t){var i=e.get("frontGroup");n=i.addGroup({zIndex:u.zIndex.controlPoint}),e._showBox(n),e._showControlPoints(n),e.set("controlGroup",n)}else e.set("controlGroup",null)},_showBox:function(){},_show:function(){var t=this.get("group");t.show()},_hide:function(){var t=this.get("group");t.hide(),this.clearActived()},_showControlPoints:function(t){var e=this,n=e.getControlPoints(),r=e.get("type"),a=u[r+"ControlPointStyle"],s=a.r?a.r:5;i.each(n,function(n,r){t.addShape("rect",{elCls:"control-point",pointIndex:r,point:n,item:e,attrs:i.mix({},a,{x:n.x-s,y:n.y-s,width:2*s,height:2*s})})})},getControlPoints:function(){},showDelegation:function(t){var e,n=this.getDelegationPath(t),r=this.get("delegateEl"),a=t.stroke,s=i.mix(!0,{},u.delegationStyle,{path:n,stroke:a});r?r.attr(s):(e=this.get("frontGroup"),r=e.addShape("path",{attrs:s,capture:!1,zIndex:u.zIndex.delegate}),this.set("delegateEl",r))},getDelegationPath:function(){},showAnchor:function(){},hideDelegation:function(){var t=this,e=t.get("delegateEl");e&&e.remove(),t.set("delegateEl",null)},getRelativeItems:function(){}}),t.exports=h},function(t,e,n){"use strict";function i(t,e,n){return n?t.getShape(n):t.getShape(e)}var r=n(1),a={},s={defaultShapeType:null,getShape:function(t){var e=this,n=e[t]||e[e.defaultShapeType]||a.ShapeBase;return n},draw:function(t,e,n){var i,a=this.getShape(t),s=a.style(e);return s&&(r.isObject(e.style)?e.style=r.mix({},s,e.style):e.style=s),i=a.draw(e,n),a.afterDraw(e,n,i),i}},o={afterDraw:function(){},draw:function(){},style:function(){}};a.registGeom=function(t,e){var n=r.ucfirst(t),i=r.mix({},s,e);return a[n]=i,i.className=n,i},a.registNode=function(t,e,n){var s=a.Node,o=i(s,t,n),u=r.mix({},o,e);return s[t]=u,u},a.registEdge=function(t,e,n){var s=a.Edge,o=i(s,t,n),u=r.mix({},o,e);return s[t]=u,u},a.getShape=function(t){var e=this;return t=r.ucfirst(t),e[t]||a.ShapeBase},a.GeomShape=s,a.ShapeBase=o,t.exports=a},function(t,e,n){"use strict";function i(t,e,n){return t>=e&&t<=n}var r=n(1),a=n(4),s=n(2),o=s.Vector2,u=s.Vector3,c=2,h=.01;r.mix(a,{radixSort:function(t){var e,n,i,r,a,s,o,u=10,c=1,h=[],l=1;for(i=0;i<t.length;i++)e=parseInt(t[i].get("zIndex"),10),n=e.toString().length,e.toString().length>l&&(l=n);for(i=0;i<l;i++,c*=10,u*=10){for(r=0;r<t.length;r++)a=parseInt(t[r].get("zIndex")%u/c,10),void 0===h[a]&&(h[a]=[]),h[a].push(t[r]);for(s=0,r=0;r<h.length;r++)if(o=void 0,void 0!==h[r])for(o=h[r].shift();void 0!==o;)t[s++]=o,o=h[r].shift()}return t},scaleMatrix:function(t,e,n){e&&n.translate(-e.x,-e.y),n.scale(t,t),e&&n.translate(e.x,e.y)},invertPoint:function(t,e,n){void 0===n&&(n=1);var i=new u(t.x,t.y,n),r=e.getInverse();return i.applyMatrix(r),{x:i.x,y:i.y}},getRectIntersect:function(t,e){var n=t.x,i=t.y,r=t.width,s=t.height,o=n+r/2,u=i+s/2,c=[],h={x:o,y:u};c.push({x:n,y:i}),c.push({x:n+r,y:i}),c.push({x:n+r,y:i+s}),c.push({x:n,y:i+s}),c.push({x:n,y:i});for(var l=null,f=1;f<c.length&&!(l=a.getLineIntersect(c[f-1],c[f],h,e));f++);return l},getLineIntersect:function(t,e,n,r){var s=a.vector(t,n),o=a.vector(t,e),u=a.vector(n,r),c=o.x*u.y-o.y*u.x,l=c*c,f=o.x*o.x+o.y*o.y,d=u.x*u.x+u.y*u.y,g=null;if(l>h*f*d){var p=(s.x*u.y-s.y*u.x)/c,v=(s.x*o.y-s.y*o.x)/c;i(p,0,1)&&i(v,0,1)&&(g={x:t.x+p*o.x,y:t.y+p*o.y})}return g},getSnapPoint:function(t,e){for(var n=a.distance(t[0],e,!1),i=t[0],r=1;r<t.length;r++){var s=t[r],o=a.distance(s,e,!1);o<n&&(i=s,n=o)}return i},distance:function(t,e,n){var i=(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y);return n===!1?i:Math.sqrt(i)},isInRect:function(t,e,n,i,r){return t.x<i&&t.x>e&&t.y<r&&t.y>n},isInLine:function(t,e,n){return a.lineDistance(t,e,n)<c},isInSegment:function(t,e,n){if(!t||!e||!n)return!1;var i=a.segmentDistance(t,e,n);return i!==1/0&&i<c},segmentDistance:function(t,e,n){var i=a.vector(t,n),r=a.vector(e,n),s=a.vector(t,e),o=i.angle(s),u=r.angle(s);if(o=o-Math.PI/2>0?1:0,u=u-Math.PI/2>0?1:0,o===u)return 1/0;var c=s.angle(i),h=s.length();return Math.abs(h*Math.sin(c))},lineDistance:function(t,e,n){var i=a.vector(t,e),r=a.vector(t,n),s=i.angle(r),o=i.length(),u=Math.abs(o*Math.sin(s));return u},vector:function(t,e){return new o(e.x-t.x,e.y-t.y)},guid:function(){return"xxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)})}}),t.exports=a},function(t,e,n){"use strict";function i(t){var e=[];return r.each(t,function(t){e.push(t.x),e.push(t.y)}),e}var r=n(1),a=n(98);r.mix(a,{getEllipsePath:function(t,e,n,i){var r=[["M",t,e-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]];return r},pointsToPolygon:function(t,e){if(!t.length)return"";for(var n="",i="",a=0,s=t.length;a<s;a++){var o=t[a];i=0===a?"M{x} {y}":"L{x} {y}",n+=r.substitute(i,o)}return e&&(n+="Z"),n},pointsToBezier:function(t){t=i(t);var e=a.catmullRomToBezier(t);return e.unshift(["M",t[0],t[1]]),e},pathIntersection:function(t,e){return a.intersection(t,e)},getWaterPositions:function(t,e,n,i){return 0===e?[[t+.5*n/Math.PI/2,i/2],[t+.5*n/Math.PI,i],[t+n/4,i]]:1===e?[[t+.5*n/Math.PI/2*(Math.PI-2),i],[t+.5*n/Math.PI/2*(Math.PI-1),i/2],[t+n/4,0]]:2===e?[[t+.5*n/Math.PI/2,-i/2],[t+.5*n/Math.PI,-i],[t+n/4,-i]]:[[t+.5*n/Math.PI/2*(Math.PI-2),-i],[t+.5*n/Math.PI/2*(Math.PI-1),-i/2],[t+n/4,0]]},getWaterPath:function(t,e,n,i,r,s,o){for(var u=2*Math.ceil(2*t/n*4),c=[];i<2*-Math.PI;)i+=2*Math.PI;for(;i>0;)i-=2*Math.PI;i=i/Math.PI/2*n;var h=s-t+i-2*t;c.push(["M",h,e]);for(var l=0,f=0;f<u;++f){var d=f%4,g=a.getWaterPositions(f*n/4,d,n,r);c.push(["C",g[0][0]+h,-g[0][1]+e,g[1][0]+h,-g[1][1]+e,g[2][0]+h,-g[2][1]+e]),f===u-1&&(l=g[2][0])}return c.push(["L",l+h,o+t]),c.push(["L",h,o+t]),c.push(["L",h,e]),c}}),t.exports=a},function(t,e,n){"use strict";var i=n(1),r=n(52),a=n(49),s=function(t){i.mix(this,t),this._init()};i.extend(s,a),i.augment(s,{hasWeight:!0,stepField:"step",totalStep:0,calculationTimes:2,_init:function(){var t=this.edges.slice(0);this.edges=t,this._initNode()},_initNode:function(){var t=this,e=t.nodes,n=t.stepField,r=t.valueField;i.isNull(e)?e=t._createNodes():(e=e.slice(0),t.nodes=e),t._initNodeMap(),i.isNull(e[0][n])&&t._calculateStep(),i.isNull(e[0][r])&&t._calculateValue()},_calculateStep:function(){var t=this,e=t.nodes,n=t.stepField;e.forEach(function(e){i.isNull(e[n])&&t._getStepFromEdges(e)});var r=e.filter(function(t){return 0===t.outEdges.length});r.map(function(e){e.step=t.totalStep-1})},_getValueFromEdges:function(t){var e=this.valueField,n=0,i=t.step;return 0===i?t.outEdges.forEach(function(t){n+=t[e]}):t.inEdges.forEach(function(t){n+=t[e]}),t.value=n,n},_getStepFromEdges:function(t){var e=this,n=e.sourceField,r=0;return t.inEdges.length>0&&t.inEdges.forEach(function(t){var a,s=e._findObj(t[n]);a=i.isNull(s.step)?e._getStepFromEdges(s):s.step,r=Math.max(a+1,r)}),t.step=r,e.totalStep=Math.max(e.totalStep,r+1),r},_findObj:function(t){var e=this.nodesMap;return e[t]},getNodes:function(){var t=this,e=t.nodes,n=t.sourceField,r=t.targetField,a=t.stepField,s=t.valueField,o=[],u=[],c=[];e.forEach(function(t){var e=t[a];void 0===u[e]&&(u[e]=[]),u[e].push(t),i.isNull(o[e])?o[e]=t[s]:o[e]+=t[s]}),t.maxValue=Math.max.apply(null,o),t.totalStep=u.length,t._setMarginWidth(u[0]),t._layoutByWeight(u[0]),t._layoutNodes(u,n);for(var h=t.calculationTimes;h>0;h--)t._layoutNodes(u.reverse(),r),t._layoutNodes(u.reverse(),n);return u.forEach(function(t){c=c.concat(t)}),t.normalization(c),c},normalization:function(t){var e=1;t.forEach(function(t){t.x>e&&(e=t.x)}),e>1&&t.map(function(t){t.x=t.x/e,t.width=t.width/e})},_layoutNodes:function(t,e){var n=this;if(t.length>=2){var i;for(i=1;i<t.length;i++)n.y=i/(n.totalStep-1),n._layoutHighStep(t[i],e),t[i].sort(function(t,e){return t.x-e.x}),n._handleConflict(t[i]);n._layoutX(t[i-1])}},_handleConflict:function(t){var e=this.margin;t.map(function(n,i){i>0&&n.x-.5*n.width<=t[i-1].x+.5*t[i-1].width+2*e&&(n.x=t[i-1].x+.5*t[i-1].width+2*e+.5*n.width)})},_layoutHighStep:function(t,e){var n=this,i=n.valueField,r=n.maxValue,a=n.thickness,s=n.marginWidth,o=n.y,u=e===n.sourceField?n.targetField:n.sourceField;t.map(function(t){var c,h=n._getEdgeOfCurNode(t,u),l=0;h.forEach(function(r){c=n._findObj(r[e]);var a=r[i];l+=c.x*a/t[i]}),t.x=l,t.weight=t[i]/r,t.width=t.weight*(1-s),t.height=a,t.y=void 0===t.y?o:t.y})},getEdges:function(){for(var t=this.calculationTimes;t>0;t--)this._layoutEdges();return this.edges},_layoutEdges:function(){var t=this,e=t.nodes,n=t.stepField,i=t.targetField,r=t.sourceField,a=t.totalStep;e.forEach(function(e){0!==e[n]&&t._edgeSort(e.inEdges,r)}),e.forEach(function(e){e[n]!==a&&t._edgeSort(e.outEdges,i)})},_edgeSort:function(t,e){var n=this,i=n.edges;t.sort(function(t,i){return n._findObj(t[e]).x-n._findObj(i[e]).x}),t.forEach(function(a,s){for(var o=0;o<s;o++){var u=n._findIndex(i,t[o]),c=n._findIndex(i,a);n._findObj(t[o][e]).x>n._findObj(a[e]).x?r.insertBefore(i,c,u):r.insertAfter(i,c,u)}})},_findIndex:function(t,e){var n=this.sourceField,i=this.targetField,r=t.findIndex(function(t){return t[n]===e[n]&&t[i]===e[i]});return r}}),t.exports=s},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a="https://kcart.alipay.com/web/bi.do",s=n(1),o=function(){function t(e){i(this,t);var n=this,r=e||{},o=new Image;s.mix(n,{image:o,server:a},r)}return r(t,[{key:"log",value:function(t){var e=this,n=t||{},i=s.mix({pg:document.URL,r:(new Date).getTime()},n),r=encodeURIComponent(JSON.stringify([i]));e.image.src=e.server+"?BIProfile=merge&d="+r}}]),t}();e["default"]=o,t.exports=e["default"]},function(t,e,n){var i=n(64);i.Tween=n(31),i.Ease=n(29),t.exports=i},function(t,e){var n={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n)))},easeOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*t)*Math.sin((1*t-e)*(2*Math.PI)/n)+1)},easeInOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:2==(t/=.5)?1:(n||(n=1*(.3*1.5)),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),t<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n)):i*Math.pow(2,-10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n)*.5+1)},easeInBack:function(t){var e=1.70158;return 1*(t/=1)*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return 1*((t=t/1-1)*t*((e+1)*t+e)+1)},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:function(t){return 1-n.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?1*(7.5625*t*t):t<2/2.75?1*(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return t<.5?.5*n.easeInBounce(2*t):.5*n.easeOutBounce(2*t-1)+.5}};t.exports=n},function(t,e,n){"use strict";var i=n(1),r=n(53),a={duration:"duration",destroy:"destroy",delay:"delay",repeat:"repeat",onUpdate:"onUpdate"},s={interpolation:r.interpolation,getFrame:function(t,e,n,r){var a,o,u,c={attrs:{},matrix:e.matrix.clone()},h=n.onUpdate;for(u in n.attrs)if(e.attrs[u]!=n.attrs[u])if("path"===u)t>=1?c.attrs[u]=n.attrs[u]:e.pathStash&&n.pathStash?c.attrs[u]=s.pathInterpolation(t,e.pathStash,n.pathStash):(o=i.path2curve(e.attrs[u],n.attrs[u]),e.pathStash=o[0],n.pathStash=o[1]);else{if(a=s.interpolation(e.attrs[u],n.attrs[u]),!i.isFunction(a))return c;c.attrs[u]=a(t)}if(n.matrix&&e.matrix)if("matrix3"===n.matrix.type){if(a=s.interpolation(e.matrix,n.matrix),!i.isFunction(a))return c;c.matrix=a(t)}else i.isFunction(n.matrix)&&(c.matrix=n.matrix.call(r,c.matrix,t));return i.isFunction(h)&&h(c,t),c},pathInterpolation:function(t,e,n){for(var r,a,o,u,c=[],h=0;h<e.length;h++){a=e[h],o=n[h],r=[];for(var l=0;l<a.length;l++)if(i.isNumeric(a[l])){if(u=s.interpolation(a[l],o[l]),!i.isFunction(u))return a[l];r.push(u(t))}else r.push(a[l]);c.push(r)}return c},getKeyFrameByProps:function(t,e){var n=[],r=s.props2frame(t,e),a={attrs:s.getTargetAttrs(t,r.attrs),matrix:t.getMatrix().clone()};return i.isFunction(e.onUpdate)&&(r.onUpdate=e.onUpdate),n[0]=a,n[1]=r,n},props2frame:function(t,e){var n={matrix:null,attrs:{}};return i.each(e,function(i,r){"transform"!==r||e.k?"matrix"===r?n.matrix=i:a[r]||(n.attrs[r]=i):n.matrix=s.transform(t.getMatrix(),i)}),n},transform:function(t,e){return t=t.clone(),i.each(e,function(e){switch(e[0]){case"t":t.translate(e[1],e[2]);break;case"s":t.scale(e[1],e[2]);break;case"r":t.rotate(e[1]);break;case"m":t.multiply(e[1]);break;default:return!1}}),t},getTargetAttrs:function(t,e){var n,i={};for(n in e)i[n]=t.attr(n);return i}};t.exports=s},function(t,e,n){"use strict";var i=n(12),r=n(30),a=n(18),s=n(29),o=function(t){o.superclass.constructor.call(this,t),this._init()};a.extend(o,i),o.ATTRS={type:"tween",canvas:null,target:null,startTime:null,endTime:null,duration:null,ratio:0,destroyTarget:!1,needsDestroy:!1,available:!0,repeat:!1,callBack:null,currentFrame:null,startKeyFrame:{attrs:null,matrix:null},endKeyFrame:{attrs:null,matrix:null}},a.augment(o,{_init:function(){var t=this.get("startTime"),e=this.get("duration");this.set("endTime",t+e)},_autoSetStartKeyFrame:function(){var t=this.get("target"),e=this.get("endKeyFrame"),n=a.mix({},r.getTargetAttrs(t,e.attrs)),i=t.getMatrix().clone();this.set("startKeyFrame",{attrs:n,matrix:i})},tryStep:function(t){var e=this.get("startTime"),n=(this.get("duration"),this.get("startKeyFrame")),i=this.get("target"),r=e;return t>=r&&i&&!i.get("destroyed")?(n.attrs||n.matrix||this._autoSetStartKeyFrame(),this.step(t)):!(i&&!i.get("destroyed"))&&(this.set("needsDestroy",!0),!1)},step:function(t){var e,n,i,o=this.get("target"),u=this.get("startTime"),c=t-u,h=this.get("duration"),l=this.get("startKeyFrame"),f=this.get("endKeyFrame"),d=this.get("easing");return a.isFunction(d)||(d=s[d]?s[d]:s.linear),n=c/h,n=n<=0?0:n>=1?1:n,i=d(n),e=r.getFrame(i,l,f,o),e.attrs&&o.attr(e.attrs),e.matrix&&o.setMatrix(e.matrix),this.set("ratio",n),this.set("currentFrame",e),this.updateStatus(),o},updateStatus:function(){var t=this.get("ratio"),e=this.get("callBack"),n=this.get("destroyTarget"),i=this.get("target"),r=this.get("repeat");if(t>=1)if(r){var a=this.get("startTime"),s=this.get("endTime"),o=this.get("duration");this.set("startTime",a+o),this.set("endTime",s+o),this.reset()}else this.set("needsDestroy",!0),n&&i.remove(!0),e&&e.call(i)},reset:function(){var t=this.get("target"),e=this.get("startKeyFrame");e.attrs&&t.attr(e.attrs),e.matrix&&t.setMatrix(e.matrix),this.set("ratio",0),this.set("needsDestroy",!1)},play:function(){var t=this,e=(t.get("target"),t.get("canvas")),n=t.get("available"),i=t.get("ratio"),r=t.get("callBack"),s=+new Date;return n?(t.step(s),e&&e.get("destroyed")!==!0&&e.draw(),void a.requestAnimationFrame(function(){return i>=1?(r&&r(),void t.destroy()):void(i>=0&&t.play())})):void t.destroy()}}),t.exports=o},function(t,e,n){"use strict";function i(t){if(!t.__attrs&&t!==c){var e=t.superclass.constructor;e&&!e.__attrs&&i(e),t.__attrs={},r.mix(!0,t.__attrs,e.__attrs),r.mix(!0,t.__attrs,t.ATTRS)}}var r=n(3),a=n(8),s=n(66),o=n(72),u=n(71),c=function(t){this.__cfg={};var e=this.getDefaultCfg();r.mix(this.__cfg,c.CFG,e,t),this.__cfg.uuid=r.guid(a.prefix),i(this.constructor),this.initAttrs(this.__cfg.attrs),this.initTransform(),this.initEventDispatcher(),this.init()};c.CFG={id:null,zIndex:0,canvas:null,parent:null,capture:!0,context:null,visible:!0,destroyed:!1},r.augment(c,s,o,u,{init:function(){},getDefaultCfg:function(){return{}},set:function(t,e){var n=this,i="__set"+r.ucfirst(t);return n[i]&&(e=n[i](e)),n.__cfg[t]=e,this},get:function(t){return this.__cfg[t]},beforeDraw:function(){},draw:function(){if(this&&!this.get("destroyed")){var t=this,e=t.get("context"),n=t.__attrs.clip;t.beforeDraw(),t.get("visible")&&(e.save(),n&&(e.save(),n.resetTransform(),n.createPath(),e.restore(),e.clip()),t.resetAttrs(),t.resetTransform(),t.drawInner(),e.restore())}},drawInner:function(){},show:function(){return this.set("visible",!0),this},hide:function(){return this.set("visible",!1),this},remove:function(t){var e=this;if(void 0===t&&(t=!0),e.get("parent")){var n=e.get("parent"),i=n.get("children");r.remove(i,e),e.set("parent",null)}return t&&e.destroy(),e},destroy:function(){var t=this,e=t.get("destroyed");if(!e)return t.__cfg={},t.__attrs=null,t.__listeners=null,t.__m=null,t.set("destroyed",!0),t},__setZIndex:function(t){var e=this;return this.__cfg.zIndex=t,r.notNull(e.get("parent"))&&e.get("parent").sort(),t},__setAttrs:function(t){var e=this;return e.attr(t),t},clone:function(){return r.clone(this)},getBBox:function(){return{minX:0,maxX:0,minY:0,maxY:0}}}),t.exports=c},function(t,e,n){"use strict";function i(t){i.superclass.constructor.call(this,t),this.set("children",[])}var r=n(3),a=n(32),s=n(2),o=s.Vector3;r.extend(i,a),r.augment(i,{isGroup:!0,canFill:!0,canStroke:!0,remove:function(t,e){if(arguments.length>=2)this.contain(t)&&t.remove(e);else{if(1===arguments.length){if(!r.isBoolean(t))return this.contain(t)&&t.remove(!0),this;e=t}0===arguments.length&&(e=!0),i.superclass.remove.call(this,e)}return this},add:function(t){var e=this,n=e.get("children");if(r.isArray(t))r.each(t,function(t){t.get("parent")&&t.get("parent").remove(t,!1),e.__setEvn(t)}),n.push.apply(n,t);else{var i=t;i.get("parent")&&i.get("parent").remove(i,!1),e.__setEvn(i),n.push(i)}return e},contain:function(t){for(var e=this,n=e.get("children"),i=0,r=n.length;i<r;i++)if(n[i]===t)return!0;
return!1},__setEvn:function(t){var e=this;t.set("parent",e),t.set("context",e.get("context"));var n=t.__attrs.clip;n&&(n.set("parent",e),n.set("context",e.get("context"))),t.set("canvas",e.get("canvas")),r.each(t.get("children"),function(e){t.__setEvn(e)})},getBBox:function(){var t=this,e=1/0,n=-(1/0),i=1/0,a=-(1/0),s=t.get("children");return r.each(s,function(t){if(t.get("visible")){var r=t.getBBox("box");if(!r)return!0;var s=new o(r.minX,r.minY,1),u=new o(r.minX,r.maxY,1),c=new o(r.maxX,r.minY,1),h=new o(r.maxX,r.maxY,1);t.apply(s),t.apply(u),t.apply(c),t.apply(h);var l=Math.min(s.x,u.x,c.x,h.x),f=Math.max(s.x,u.x,c.x,h.x),d=Math.min(s.y,u.y,c.y,h.y),g=Math.max(s.y,u.y,c.y,h.y);l<e&&(e=l),f>n&&(n=f),d<i&&(i=d),g>a&&(a=g)}}),{minX:e,minY:i,maxX:n,maxY:a}},drawInner:function(){var t=this,e=t.get("children");return r.each(e,function(t){t.draw()}),t},getCount:function(){var t=this;return t.get("children").length},sort:function(){var t=this,e=t.get("children");return e.sort(function(t,e){return t.get("zIndex")-e.get("zIndex")}),t},find:function(t){var e=this;return e.findBy(function(e){return e.get("id")===t})},findBy:function(t){var e=this,n=e.get("children"),i=null;return r.each(n,function(e){if(t(e)?i=e:e.findBy&&(i=e.findBy(t)),i)return!1}),i},getShape:function(t,e){function n(){for(var n=s.length-1;n>=0;n--){var r=s[n];if(r.get("visible")&&r.get("capture")&&(r.isGroup?i=r.getShape(t,e):r.isHit(t,e)&&(i=r)),i)break}}var i,r=this,a=r.__attrs.clip,s=r.get("children");return a?a.inside(t,e)&&n():n(),i},clear:function(){for(var t=this,e=t.get("children");0!==e.length;)e[e.length-1].remove();return t},destroy:function(){var t=this;t.get("destroyed")||(t.clear(),i.superclass.destroy.call(t))}}),t.exports=i},function(t,e,n){"use strict";function i(t,e,n){var i,r,a=d.exec(t),o=c.mod(c.degreeToRad(parseFloat(a[1])),2*Math.PI),u=a[2],h=e.getBBox();o>=0&&o<.5*Math.PI?(i={x:h.minX,y:h.minY},r={x:h.maxX,y:h.maxY}):.5*Math.PI<=o&&o<Math.PI?(i={x:h.maxX,y:h.minY},r={x:h.minX,y:h.maxY}):Math.PI<=o&&o<1.5*Math.PI?(i={x:h.maxX,y:h.maxY},r={x:h.minX,y:h.minY}):(i={x:h.minX,y:h.maxY},r={x:h.maxX,y:h.minY});var l=Math.tan(o),f=l*l,g=(r.x-i.x+l*(r.y-i.y))/(f+1)+i.x,p=l*(r.x-i.x+l*(r.y-i.y))/(f+1)+i.y,v=e.get("context"),x=v.createLinearGradient(i.x,i.y,g,p);return s(u,x,n),x}function r(t,e,n){var i=g.exec(t),r=parseFloat(i[1]),a=parseFloat(i[2]),o=parseFloat(i[3]),u=i[4],c=e.getBBox(),h=e.get("context"),l=c.maxX-c.minX,f=c.maxY-c.minY,d=Math.sqrt(l*l+f*f)/2,p=h.createRadialGradient(c.minX+l*r,c.minY+f*a,o,c.minX+l/2,c.minY+f/2,d);return s(u,p,n),p}function a(t,e){var n=p.exec(t),i=n[1],r=n[2];switch(i){case"a":i="repeat";break;case"x":i="repeat-x";break;case"y":i="repeat-y";break;case"n":i="no-repeat";break;default:i="no-repeat"}var a=document.getElementById(r),s=e.get("context"),o=s.createPattern(a,i);return o}function s(t,e,n){var i=t.match(v);u.each(i,function(t){t=t.split(":");var i=o(t[1],n);e.addColorStop(t[0],i)})}function o(t,e){if(void 0===e)return t;t=new h(t),t.multiplyA(e);var n=t.getType();return"hsl"===n?t.getHSLStyle():"rgb"===n?t.getRGBStyle():void 0}var u=n(3),c=n(4),h=n(17),l=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,f=/[^\s\,]+/gi,d=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,g=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,p=/^p\s*([axyn])\s+(.*)/i,v=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,x={parsePath:function(t){return t=t||[],u.isArray(t)?t:u.isString(t)?(t=t.match(l),u.each(t,function(e,n){if(e=e.match(f),e[0].length>1){var i=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=i}u.each(e,function(t,n){isNaN(t)||(e[n]=+t)}),t[n]=e}),t):void 0},parseStyle:function(t,e,n){if(u.isString(t))return d.test(t)?i(t,e,n):g.test(t)?r(t,e,n):p.test(t)?a(t,e):o(t,n)}};t.exports=x},function(t,e,n){"use strict";var i=(n(1),"\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029"),r=new RegExp("([a-z])["+i+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+i+"]*,?["+i+"]*)+)","ig"),a=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+i+"]*,?["+i+"]*","ig"),s=function(t){if(!t)return null;if(typeof t==typeof[])return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(r,function(t,i,r){var s=[],o=i.toLowerCase();if(r.replace(a,function(t,e){e&&s.push(+e)}),"m"==o&&s.length>2&&(n.push([i].concat(s.splice(0,2))),o="l",i="m"==i?"l":"L"),"o"==o&&1==s.length&&n.push([i,s[0]]),"r"==o)n.push([i].concat(s));else for(;s.length>=e[o]&&(n.push([i].concat(s.splice(0,e[o]))),e[o]););}),n},o=function(t,e){for(var n=[],i=0,r=t.length;r-2*!e>i;i+=2){var a=[{x:+t[i-2],y:+t[i-1]},{x:+t[i],y:+t[i+1]},{x:+t[i+2],y:+t[i+3]},{x:+t[i+4],y:+t[i+5]}];e?i?r-4==i?a[3]={x:+t[0],y:+t[1]}:r-2==i&&(a[2]={x:+t[0],y:+t[1]},a[3]={x:+t[2],y:+t[3]}):a[0]={x:+t[r-2],y:+t[r-1]}:r-4==i?a[3]=a[2]:i||(a[0]={x:+t[i],y:+t[i+1]}),n.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return n},u=function(t,e,n,i,r){if(null==r&&null==i&&(i=n),t=+t,e=+e,n=+n,i=+i,null!=r)var a=Math.PI/180,s=t+n*Math.cos(-i*a),o=t+n*Math.cos(-r*a),u=e+n*Math.sin(-i*a),c=e+n*Math.sin(-r*a),h=[["M",s,u],["A",n,n,0,+(r-i>180),0,o,c]];else h=[["M",t,e],["m",0,-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]];return h},c=function(t){if(t=s(t),!t||!t.length)return[["M",0,0]];var e,n=[],i=0,r=0,a=0,c=0,h=0;"M"==t[0][0]&&(i=+t[0][1],r=+t[0][2],a=i,c=r,h++,n[0]=["M",i,r]);for(var l,f,d=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),g=h,p=t.length;g<p;g++){if(n.push(l=[]),f=t[g],e=f[0],e!=e.toUpperCase())switch(l[0]=e.toUpperCase(),l[0]){case"A":l[1]=f[1],l[2]=f[2],l[3]=f[3],l[4]=f[4],l[5]=f[5],l[6]=+f[6]+i,l[7]=+f[7]+r;break;case"V":l[1]=+f[1]+r;break;case"H":l[1]=+f[1]+i;break;case"R":for(var v=[i,r].concat(f.slice(1)),x=2,y=v.length;x<y;x++)v[x]=+v[x]+i,v[++x]=+v[x]+r;n.pop(),n=n.concat(o(v,d));break;case"O":n.pop(),v=u(i,r,f[1],f[2]),v.push(v[0]),n=n.concat(v);break;case"U":n.pop(),n=n.concat(u(i,r,f[1],f[2],f[3])),l=["U"].concat(n[n.length-1].slice(-2));break;case"M":a=+f[1]+i,c=+f[2]+r;default:for(x=1,y=f.length;x<y;x++)l[x]=+f[x]+(x%2?i:r)}else if("R"==e)v=[i,r].concat(f.slice(1)),n.pop(),n=n.concat(o(v,d)),l=["R"].concat(f.slice(-2));else if("O"==e)n.pop(),v=u(i,r,f[1],f[2]),v.push(v[0]),n=n.concat(v);else if("U"==e)n.pop(),n=n.concat(u(i,r,f[1],f[2],f[3])),l=["U"].concat(n[n.length-1].slice(-2));else for(var m=0,_=f.length;m<_;m++)l[m]=f[m];if(e=e.toUpperCase(),"O"!=e)switch(l[0]){case"Z":i=+a,r=+c;break;case"H":i=l[1];break;case"V":r=l[1];break;case"M":a=l[l.length-2],c=l[l.length-1];default:i=l[l.length-2],r=l[l.length-1]}}return n},h=function(t,e,n,i){return[t,e,n,i,n,i]},l=function(t,e,n,i,r,a){var s=1/3,o=2/3;return[s*t+o*n,s*e+o*i,s*r+o*n,s*a+o*i,r,a]},f=function(t,e,n,i,r,a,s,o,u,c){n===i&&(n+=1);var h,l=120*Math.PI/180,d=Math.PI/180*(+r||0),g=[],p=function(t,e,n){var i=t*Math.cos(n)-e*Math.sin(n),r=t*Math.sin(n)+e*Math.cos(n);return{x:i,y:r}};if(c)w=c[0],A=c[1],S=c[2],M=c[3];else{h=p(t,e,-d),t=h.x,e=h.y,h=p(o,u,-d),o=h.x,u=h.y,t===o&&e===u&&(o+=1,u+=1);var v=(Math.cos(Math.PI/180*r),Math.sin(Math.PI/180*r),(t-o)/2),x=(e-u)/2,y=v*v/(n*n)+x*x/(i*i);y>1&&(y=Math.sqrt(y),n=y*n,i=y*i);var m=n*n,_=i*i,b=(a==s?-1:1)*Math.sqrt(Math.abs((m*_-m*x*x-_*v*v)/(m*x*x+_*v*v))),S=b*n*x/i+(t+o)/2,M=b*-i*v/n+(e+u)/2,w=Math.asin(((e-M)/i).toFixed(9)),A=Math.asin(((u-M)/i).toFixed(9));w=t<S?Math.PI-w:w,A=o<S?Math.PI-A:A,w<0&&(w=2*Math.PI+w),A<0&&(A=2*Math.PI+A),s&&w>A&&(w-=2*Math.PI),!s&&A>w&&(A-=2*Math.PI)}var P=A-w;if(Math.abs(P)>l){var C=A,I=o,E=u;A=w+l*(s&&A>w?1:-1),o=S+n*Math.cos(A),u=M+i*Math.sin(A),g=f(o,u,n,i,r,0,s,I,E,[A,C,S,M])}P=A-w;var T=Math.cos(w),k=Math.sin(w),B=Math.cos(A),F=Math.sin(A),O=Math.tan(P/4),N=4/3*n*O,D=4/3*i*O,z=[t,e],R=[t+N*k,e-D*T],j=[o+N*F,u-D*B],X=[o,u];if(R[0]=2*z[0]-R[0],R[1]=2*z[1]-R[1],c)return[R,j,X].concat(g);g=[R,j,X].concat(g).join().split(",");for(var Y=[],G=0,q=g.length;G<q;G++)Y[G]=G%2?p(g[G-1],g[G],d).y:p(g[G],g[G+1],d).x;return Y},d=function(t,e){for(var n=c(t),i=e&&c(e),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=(function(t,e,n){var i,r;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(f.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"==n||"S"==n?(i=2*e.x-e.bx,r=2*e.y-e.by):(i=e.x,r=e.y),t=["C",i,r].concat(t.slice(1));break;case"T":"Q"==n||"T"==n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(l(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(l(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(h(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(h(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(h(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(h(e.x,e.y,e.X,e.Y))}return t}),o=function(t,e){if(t[e].length>7){t[e].shift();for(var r=t[e];r.length;)d[e]="A",i&&(g[e]="A"),t.splice(e++,0,["C"].concat(r.splice(0,6)));t.splice(e,1),y=Math.max(n.length,i&&i.length||0)}},u=function(t,e,r,a,s){t&&e&&"M"==t[s][0]&&"M"!=e[s][0]&&(e.splice(s,0,["M",a.x,a.y]),r.bx=0,r.by=0,r.x=t[s][1],r.y=t[s][2],y=Math.max(n.length,i&&i.length||0))},d=[],g=[],p="",v="",x=0,y=Math.max(n.length,i&&i.length||0);x<y;x++){n[x]&&(p=n[x][0]),"C"!=p&&(d[x]=p,x&&(v=d[x-1])),n[x]=s(n[x],r,v),"A"!=d[x]&&"C"==p&&(d[x]="C"),o(n,x),i&&(i[x]&&(p=i[x][0]),"C"!=p&&(g[x]=p,x&&(v=g[x-1])),i[x]=s(i[x],a,v),"A"!=g[x]&&"C"==p&&(g[x]="C"),o(i,x)),u(n,i,r,a,x),u(i,n,a,r,x);var m=n[x],_=i&&i[x],b=m.length,S=i&&_.length;r.x=m[b-2],r.y=m[b-1],r.bx=parseFloat(m[b-4])||r.x,r.by=parseFloat(m[b-3])||r.y,a.bx=i&&(parseFloat(_[S-4])||a.x),a.by=i&&(parseFloat(_[S-3])||a.y),a.x=i&&_[S-2],a.y=i&&_[S-1]}return i?[n,i]:n},g=/,?([a-z]),?/gi,p=function(t){return t.join(",").replace(g,"$1")},v={toArray:s,toString:p,toCurve:d,toAbsolute:c,catmullRomToBezier:o};t.exports=v},function(t,e,n){"use strict";var i=n(13),r=n(10),a=r.Group,s=function(t){s.superclass.constructor.call(this,t),this._beforeRenderUI(),this._renderUI(),this._bindUI()};s.CFG={},i.extend(s,a),i.augment(s,{_beforeRenderUI:function(){this._initCfg(),this._multiRatioCfg()},_renderUI:function(){},_multiRatioCfg:function(){},_initCfg:function(){},_bindUI:function(){}}),t.exports=s},function(t,e,n){t.exports={GMixin:n(90),GroupBase:n(36),GroupMixin:n(91)}},function(t,e){"use strict";function n(){var t=document.createElement("i");return t.title="Web Colour Picker",t.style.display="none",document.body.appendChild(t),t}var i=/rgb\((\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,r={},a=null;t.exports={toRGB:function(t){a||(a=n());var e;if(r[t])e=r[t];else{a.style.color=t,e=document.defaultView.getComputedStyle(a,"").getPropertyValue("color");var s=i.exec(e);s.shift(),e=this.arr2rgb(s),r[t]=e}return e},toHex:function(t){return t=Math.round(t),t=t.toString(16),1===t.length&&(t="0"+t),t},hsl2Rgb:function(t){var e=t[0],n=t[1],i=t[2],r={};if(0===n)r.r=r.g=r.b=i;else{var a=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t},s=i<=.5?i*(1+n):i+n-i*n,o=2*i-s;r.r=a(o,s,e+1/3),r.g=a(o,s,e),r.b=a(o,s,e-1/3)}return r.r=Math.min(Math.round(255*r.r),255),r.g=Math.min(Math.round(255*r.g),255),r.b=Math.min(Math.round(255*r.b),255),"#"+this.toHex(r.r)+this.toHex(r.g)+this.toHex(r.b)},rgb2hsl:function(t){var e,n,i,r=this.rgb2arr(t),a=r[0]/255,s=r[1]/255,o=r[2]/255,u=Math.min(a,s,o),c=Math.max(a,s,o),h=c-u;return c===u?e=0:a===c?e=(s-o)/h:s===c?e=2+(o-a)/h:o===c&&(e=4+(a-s)/h),e=Math.min(60*e,360),e<0&&(e+=360),i=(u+c)/2,n=c===u?0:i<=.5?h/(c+u):h/(2-c-u),[e/360,n,i]},arr2rgb:function(t){return"#"+this.toHex(t[0])+this.toHex(t[1])+this.toHex(t[2])},rgb2arr:function(t){var e=[];return e.push(parseInt(t.substr(1,2),16)),e.push(parseInt(t.substr(3,2),16)),e.push(parseInt(t.substr(5,2),16)),e}}},function(t,e,n){var i=n(99);i.Group=n(100),t.exports=i},function(t,e,n){"use strict";var i=n(109);i.Global=n(9),i.Shape=n(41),i.Util=n(7),i.registNode=i.Shape.registNode,i.registEdge=i.Shape.registEdge,n(102),t.exports=i},function(t,e,n){"use strict";var i=n(23);n(119),n(118),t.exports=i},function(t,e,n){"use strict";var i=n(1),r=n(24);t.exports={getSnapAnchor:function(t,e){if(!t||!e)return!1;var n=t._getAnchorPoints(),a=[],s=null;i.each(n,function(t){(r.equal(t.x,e.x)||r.equal(t.y,e.y))&&a.push(t)});var o=a.length;return s=0===o?r.getSnapPoint(n,e):1===o?a[0]:r.getSnapPoint(a,e)}}},function(t,e,n){"use strict";function i(){this.elements=[1,0,0,0,1,0,0,0,1]}var r=n(1),a=n(4);i.multiply=function(t,e){var n=t.elements,r=e.elements,a=new i;return a.set(n[0]*r[0]+n[3]*r[1]+n[6]*r[2],n[0]*r[3]+n[3]*r[4]+n[6]*r[5],n[0]*r[6]+n[3]*r[7]+n[6]*r[8],n[1]*r[0]+n[4]*r[1]+n[7]*r[2],n[1]*r[3]+n[4]*r[4]+n[7]*r[5],n[1]*r[6]+n[4]*r[7]+n[7]*r[8],n[2]*r[0]+n[5]*r[1]+n[8]*r[2],n[2]*r[3]+n[5]*r[4]+n[8]*r[5],n[2]*r[6]+n[5]*r[7]+n[8]*r[8])},i.equal=function(t,e){for(var n=t.elements,i=e.elements,r=!0,s=0,o=n.length;s<o;s++)if(!a.equal(n[s],i[s])){r=!1;break}return r},r.augment(i,{type:"matrix3",set:function(t,e,n,i,r,a,s,o,u){var c=this.elements;return c[0]=t,c[3]=e,c[6]=n,c[1]=i,c[4]=r,c[7]=a,c[2]=s,c[5]=o,c[8]=u,this},get:function(t,e){return t--,e--,this.elements[3*e+t]},identity:function(){return this.set(1,0,0,0,1,0,0,0,1)},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},det:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=t[6],u=t[7],c=t[8];return e*a*c-e*s*u-n*r*c+n*s*o+i*r*u-i*a*o},inverse:function(t){return this.copy(this.getInverse(t))},getInverse:function(t){var e=this.det();if(0===e){if(t)throw"matrix exception: get inverse matrix with 0 det";return console.warn("matrix cannot inverse"),new i}var n=this.elements,r=(n[0],n[3],n[6],n[1],n[4],n[7],n[2],n[5],n[8],new i);return r.set(n[4]*n[8]-n[7]*n[5],-(n[3]*n[8]-n[6]*n[5]),n[3]*n[7]-n[6]*n[4],-(n[1]*n[8]-n[7]*n[2]),n[0]*n[8]-n[6]*n[2],-(n[0]*n[7]-n[6]*n[1]),n[1]*n[5]-n[4]*n[2],-(n[0]*n[5]-n[3]*n[2]),n[0]*n[4]-n[3]*n[1]),r.multiplyScalar(1/e),r},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},multiply:function(t){return this.copy(i.multiply(this,t))},translate:function(t,e){var n=new i;return n.set(1,0,t,0,1,e,0,0,1),this.copy(i.multiply(n,this))},rotate:function(t){var e=new i;return e.set(Math.cos(t),-Math.sin(t),0,Math.sin(t),Math.cos(t),0,0,0,1),this.copy(i.multiply(e,this))},scale:function(t,e){var n=new i;return n.set(t,0,0,0,e,0,0,0,1),this.copy(i.multiply(n,this))},equal:function(t){return i.equal(this,t)},copy:function(t){for(var e=t.elements,n=this.elements,i=0,r=e.length;i<r;i++)n[i]=e[i];return this},clone:function(){for(var t=new i,e=t.elements,n=this.elements,r=0,a=n.length;r<a;r++)e[r]=n[r];return t},to2DObject:function(){var t=this.elements;return{a:t[0],b:t[1],c:t[3],d:t[4],e:t[6],f:t[7]}},from2DObject:function(t){var e=this.elements;return e[0]=t.a,e[1]=t.b,e[3]=t.c,e[4]=t.d,e[6]=t.e,e[7]=t.f,this}}),t.exports=i},function(t,e,n){"use strict";function i(t,e){if(1===arguments.length){var n=t;t=n[0],e=n[1]}this.x=t||0,this.y=e||0}var r=n(1),a=n(4);i.add=function(t,e){return new i(t.x+e.x,t.y+e.y)},i.sub=function(t,e){return new i(t.x-e.x,t.y-e.y)},i.lerp=function(t,e,n){return new i(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},i.angle=function(t,e){var n=t.dot(e)/(t.length()*e.length());return Math.acos(a.clamp(n,-1,1))},i.direction=function(t,e){return t.x*e.y-e.x*t.y},r.augment(i,{type:"vector2",set:function(t,e){return this.x=t,this.y=e,this},setComponent:function(t,e){switch(t){case 0:return this.x=e,this;case 1:return this.y=e,this;default:throw new Error("the index out of range:"+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("the index out of range:"+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t){return this.copy(i.add(this,t))},sub:function(t){return this.copy(i.sub(this,t))},subBy:function(t){return this.copy(i.sub(t,this))},multiplyScaler:function(t){return this.x*=t,this.y*=t,this},divideScaler:function(t){if(0!==t){var e=1/t;this.x*=e,this.y*=e}else this.x=0,this.y=0;return this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this},clampScale:function(){var t,e;return function(n,r){return void 0===t&&(t=new i,e=new i),t.set(n,n),e.set(r,r),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSq())},normalize:function(){return this.divideScaler(this.length())},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},angleTo:function(t,e){var n=this.angle(t),r=i.direction(this,t)>=0;return e?r?2*Math.PI-n:n:r?n:2*Math.PI-n},vertical:function(t){return t?new i(this.y,(-this.x)):new i((-this.y),this.x)},angle:function(t){return i.angle(this,t)},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScaler(t/e),this},isZero:function(){return 0===this.x&&0===this.y},lerp:function(t,e){return this.copy(i.lerp(this,t,e))},equal:function(t){return a.equal(this.x,t.x)&&a.equal(this.y,t.y)},clone:function(){return new i(this.x,this.y)},rotate:function(t){var e=this.x*Math.cos(t)-this.y*Math.sin(t),n=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=e,this.y=n,this}}),t.exports=i},function(t,e,n){"use strict";function i(t,e,n){if(1===arguments.length)if(r.isArray(t)){var i=t;t=i[0],e=i[1],n=i[2]}else if("vector2"===t.type){var a=t;t=a.x,e=a.y,n=1}this.x=t||0,this.y=e||0,this.z=n||0}var r=n(1),a=n(4);i.add=function(t,e){return new i(t.x+e.x,t.y+e.y,t.z+e.z)},i.sub=function(t,e){return new i(t.x-e.x,t.y-e.y,t.z-e.z)},i.lerp=function(t,e,n){return new i(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n,t.z+(e.z-t.z)*n)},i.cross=function(t,e){var n=t.x,r=t.y,a=t.z,s=e.x,o=e.y,u=e.z;return new i(r*u-a*o,a*s-n*u,n*o-r*s)},i.angle=function(t,e){var n=t.dot(e)/(t.length()*e.length());return Math.acos(a.clamp(n,-1,1))},r.augment(i,{type:"vector3",set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setComponent:function(t,e){switch(t){case 0:return this.x=e,this;case 1:return this.y=e,this;case 2:return this.z=e,this;default:throw new Error("index is out of range:"+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range:"+t)}},add:function(t){return this.copy(i.add(this,t))},sub:function(t){return this.copy(i.sub(this,t))},subBy:function(t){return this.copy(i.sub(t,this))},multiplyScaler:function(t){return this.x*=t,this.y*=t,this.z*=t,this},divideScaler:function(t){if(0!==t){var e=1/t;this.x*=e,this.y*=e,this.z*=e}else this.x=0,this.y=0,this.z=0;return this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this.z<t.z?this.z=t.z:this.z>e.z&&(this.z=e.z),this},clampScale:function(){var t,e;return function(n,r){return void 0===t&&(t=new i,e=new i),t.set(n,n,n),e.set(r,r,r),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.lengthSq())},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScaler(this.length())},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScaler(t/e),this},lerp:function(t,e){return this.copy(i.lerp(this,t,e))},cross:function(t){return this.copy(i.cross(this,t))},angle:function(t){return i.angle(this,t)},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},applyMatrix:function(t){var e=t.elements,n=e[0]*this.x+e[3]*this.y+e[6]*this.z,i=e[1]*this.x+e[4]*this.y+e[7]*this.z,r=e[2]*this.x+e[5]*this.y+e[8]*this.z;return this.x=n,this.y=i,this.z=r,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=void 0!==t.z?t.z:1,this},equal:function(t){return a.equal(this.x,t.x)&&a.equal(this.y,t.y)&&a.equal(this.z,t.z)},clone:function(){return new i(this.x,this.y,this.z)}}),t.exports=i},function(t,e,n){var i={};i.Flow=n(47),i.Force=n(48),i.Sankey=n(26),i.Tree=n(50),t.exports=i},function(t,e,n){"use strict";var i=n(1),r=n(26),a=function(t){i.mix(this,t),this._init()};i.extend(a,r),i.augment(a,{step:0,margin:0,valueField:"..value",_init:function(){var t=this.edges.slice(0);this.edges=t,t.map(function(t){t["..value"]=1}),this._initNode()},_calculateStep:function(){var t=this,e=t.nodes,n=t.stepField;t.step;if(i.isNull(e[0][n])){var r=e.filter(function(t){return 0===t.inEdges.length});0===r.length&&(r=[e[0]]),t._setNodesStep(r)}e.map(function(e){void 0===e.step&&(e.step=t.step,t.step=t.step+1,t._setNodesStep([e]))})},_setNodesStep:function(t){var e=this,n=e.step,r=e.stepField,a=t.filter(function(t){return i.isNull(t[r])});if(a.length>0){a.map(function(t){t[r]=n}),e.step=n+1;var s=e._getNextNodes(a);s.length>0&&e._setNodesStep(s)}},_getNextNodes:function(t){var e=this,n=e.targetField,r=e.stepField,a=[];return t.forEach(function(t){t.outEdges.length>0&&t.outEdges.forEach(function(s){var o=s[n];if(o!=t.id){var u=e._findObj(o);i.isNull(u[r])&&a.push(u)}})}),a},_calculateValue:function(){var t=this,e=t.nodes,n=t.valueField;e.map(function(t){t[n]=1})},_layoutByWeight:function(t){var e=t.length,n=1/e,i=this.y,r=this;t.map(function(t,e){t.x=(e+.5)*n,t.y=void 0===t.y?i:t.y,r.onNodeChange(t.id,{x:t.x,y:t.y})})},_layoutHighStep:function(t,e){var n=this,i=(n.valueField,n.maxValue,n.thickness,n.marginWidth,n.y),r=e===n.sourceField?n.targetField:n.sourceField;t.map(function(t){var a,s=n._getEdgeOfCurNode(t,r),o=0,u=0,c=e===n.sourceField?t.step-1:t.step+1;s.forEach(function(t){a=n._findObj(t[e]),a.step===c&&(u++,o+=a.x)}),t.x=o/u,t.y=void 0===t.y?i:t.y,n.onNodeChange(t.id,{x:t.x,y:t.y})})},_layoutNodes:function(t,e){var n=this;if(t.length>=2){var i;for(i=1;i<t.length;i++)n.y=i/(n.totalStep-1),n._layoutHighStep(t[i],e),t[i].sort(function(t,e){return t.x-e.x}),n._layoutByWeight(t[i])}},onNodeChange:function(t){},getNodes:function(){var t=a.superclass.getNodes.call(this),e=this.stepField,n=this.valueField;return t.map(function(t){delete t.inEdges,delete t.outEdges,delete t[e],delete t[n]}),t},start:function(){this.getNodes()}}),t.exports=a},function(t,e,n){"use strict";var i=n(1),r=n(101),a=function(t){i.mix(this,t),this._init()};i.augment(a,{graph:null,stiffness:200,repulsion:400,minEnergyThreshold:.01,damping:.3,_init:function(){var t=this,e={nodes:[],edges:[]};i.each(t.nodes,function(t,n){e.nodes.push(t.id)}),i.each(t.edges,function(t,n){e.edges.push([t.source,t.target])});var n=new r.Graph,a=new r.Layout.ForceDirected(n,this.stiffness,this.repulsion,this.damping,this.minEnergyThreshold),s=new r.Renderer(a,function(){},function(){},function(e,n){t.onNodeChange(e.id,n)},function(){t.onFinish()},function(){t.onStart()});n.loadJSON(e),this.layout=a,this.renderer=s},onNodeChange:function(t,e){},onEdgeChange:function(t,e,n){},onClear:function(){},onFinish:function(){},onStart:function(){},start:function(){this.renderer.start()}}),t.exports=a},function(t,e,n){"use strict";var i=n(1),r=function(t){i.mix(this,t),this._init()};i.augment(r,{nodes:null,edges:null,y:0,hasWeight:!1,idField:"name",valueField:"value",sourceField:"source",targetField:"target",sourceWeightField:"sourceWeight",targetWeightField:"targetWeight",maxValue:null,thickness:.05,margin:.01,detachment:!1,_init:function(){var t=this,e=t.nodes,n=t.valueField,r=t.targetWeightField;if(i.isNull(e)){var a=t.edges.slice(0);t.edges=a,i.isNull(a[0][r])&&(t.targetWeightField=t.sourceWeightField),e=t._createNodes()}else e=e.slice(0),t.nodes=e;t.hasWeight&&i.isNull(e[0][n])&&(t._initNodeMap(),t._calculateValue()),t._setMarginWidth(e)},_createNodes:function(){var t=this,e=t.edges,n=t.sourceField,i=t.targetField,r=[],a={};return e.forEach(function(e){var s=e[n],o=e[i];t._creatNode(s,a,r),t._creatNode(o,a,r)}),t.nodes=r,r},_creatNode:function(t,e,n){if(i.isNull(e[t])){var r={id:t};n.push(r),e[t]=r}},_initNodeMap:function(){var t=this,e=t.idField,n=t.targetField,r=t.sourceField,a=t.nodes;if(i.isObject(a))return a;var s={};return i.each(a,function(a){i.isNull(a.id)&&(a.id=a[e]),i.isNull(a.y)||delete a.y,a.inEdges=t._getEdgeOfCurNode(a,n),a.outEdges=t._getEdgeOfCurNode(a,r),s[a.id]=a}),t.nodesMap=s,t.nodes=a,s},_getEdgeOfCurNode:function(t,e){var n=this.edges,i=n.filter(function(n){return n[e]===t.id});return i},_calculateValue:function(){var t=this,e=t.nodes,n=t.valueField;e.forEach(function(e){i.isNull(e[n])&&t._getValueFromEdges(e)})},_getValueFromEdges:function(t){var e=this.valueField,n=this.sourceField,i=this.targetField,r=this.sourceWeightField,a=this.targetWeightField,s=0,o=this.detachment;if(o){var u=0,c=0;t.outEdges.forEach(function(t){c+=t[r]}),t.inEdges.forEach(function(t){u+=t[a]}),s=Math.max(u,c)}else t.outEdges.forEach(function(t){s+=t[r]}),t.inEdges.forEach(function(t){t[n]!==t[i]&&(s+=t[a])});return t[e]=s,s},_setMarginWidth:function(t){var e=this.margin,n=t.length,i=2*n*e;this.marginWidth=i},getNodes:function(){var t=this,e=t.nodes;return t.hasWeight?t._layoutByWeight(e):t._layout(e),e},_layout:function(t){var e=t.length,n=1/e,i=this.y;t.map(function(t,e){t.x=(e+.5)*n,t.y=i})},_layoutByWeight:function(t){var e=this.y,n=this.marginWidth,i=this.thickness,r=this.valueField,a=0;t.forEach(function(t){a+=t[r]});var s=this.maxValue||a;t.map(function(t){t.weight=t[r]/s,t.width=t.weight*(1-n),t.height=i,t.y=e}),this._layoutX(t)},_layoutX:function(t){var e=this.margin;t.map(function(n,i){for(var r=0,a=i-1;a>=0;a--)r+=t[a].width+2*e;n.x=e+.5*n.width+r})},reset:function(){this._init()}}),t.exports=r},function(t,e,n){"use strict";function i(t){return t/2}var r=n(1),a="level",s=n(51),o=function(t){r.mix(this,t),this._init()};r.augment(o,{nodes:null,childrenField:"children",collapsedField:"collapsed",width:1,height:1,_levels:1,idField:null,edgeFields:null,_preX:{},dx:0,dy:0,nodeAlign:"start",_totalLeafCount:0,_init:function(){var t=this,e=t.nodes.slice(0);t._traverseNodes(e),t.originDx=t.dx,t.originDy=t.dy,t.nodes=e,t._initDxDy()},_initDxDy:function(){var t=this,e=t.nodes,n=t._levels;t._preX={};var i=t._getAlignCount(e);t._totalLeafCount=i,t.originDx||(t.dx=t.width/(i+.5)),t.originDy||(t.dy=t.height/n)},reset:function(){this._initDxDy()},_traverseNodes:function(t,e){var n,i,s=this;e?(n=e[a]+1,i=e.id):(n=0,i="");var o=s.childrenField,u=s.idField;r.each(t,function(t,r){t[a]=n,t.parent=e,u&&(t.id=t[u]),t.id||(t.id=i?i+"-"+r:r.toString());var c=t[o];c&&c.length?s._traverseNodes(t[o],t):n+1>s._levels&&(s._levels=n+1)})},_getAlignCount:function(t){var e=this,n=0,a=0,s=0,o=e.childrenField,u=t.length,c=e.collapsedField;return r.each(t,function(t,r){var h=t[o];if(h&&h.length&&!t[c]){var l=s/2;n+=l,l>1&&l<a&&(a-=l);var f=e._getAlignCount(h),d=i(f);a+=1,n+=Math.max(d,a),a=0,s=f,t._alignCount=f}else a+=1,r===u-1&&1!==u&&(a+=.5)}),a=Math.max(a,i(s)),n+=Math.abs(a)},_getMaxPreXParent:function(t){if(!t)return null;var e=this,n=e._preX,i=t.level,r=n[i]||0,a=r,s=i,o=t.parent,u=t;if(o&&o.children[0]===t||0===r)for(;s>0&&o;){var c=s-1,h=n[c]||0;if(h>a&&(a=h,u=o),s=c,o.parent&&o.parent.children[0]!==o)break;o=o.parent}return u},_layoutNodes:function(t,e){var n=this,i=n.childrenField,o=n.collapsedField,u=t.length;r.each(t,function(t,r){var c=t[i],h=t[a],l=n.dx,f=n.dy,d=new s(t);e.push(d),d.y=h*f,"middle"===n.nodeAlign?d.y+=.5*f:"end"===n.nodeAlign&&(d.y+=f);var g=n._preX[h]||0;if(c&&c.length&&!t[o]){n._layoutNodes(c,e);var p=c[0],v=c[c.length-1],x=(p.x+v.x)/2;d.x=Math.max(x,g+l),n._preX[h]=d.x}else{if(t.parent&&0===r){var y=n._getMaxPreXParent(t.parent),m=n._preX[h-1]||0;if(y)if(m=n._preX[y.level]||0,y===t.parent&&1===t.parent.children.length);else{var _=y._alignCount;m-=m<l?_*l/2-l/2:_*l/2-l}g=Math.max(g,m)}d.x=g+l,n._preX[h]=d.x,r===u-1&&u>1&&(n._preX[h]+=.5*l)}t.x=d.x,t.y=d.y})},_getEdges:function(t,e){var n=this,i=[],a=n.childrenField,s=n.collapsedField,o=n.edgeFields;return e&&e[s]?i:(r.each(t,function(t){if(e){var s={source:e.id,target:t.id};o&&r.each(o,function(e){s[e]=t[e]}),i.push(s)}t[a]&&(i=i.concat(n._getEdges(t[a],t)))}),i)},getNodes:function(){var t=this,e=t.nodes,n=[];return t._layoutNodes(e,n),t._fixedRange(n),n},_fixedRange:function(t){var e=0,n=this.width;if(this._totalLeafCount>3){r.each(this._preX,function(t){e<t&&(e=t)});var i=(n-this.dx/2)/e;r.each(t,function(t){t.x=t.x*i})}},getEdges:function(){var t=this,e=t.nodes;return t._getEdges(e)},_findBy:function(t,e){var n=this,i=null,a=n.childrenField;return r.each(t,function(t){var r=t[a];if(e(t)?i=t:r&&r.length&&(i=n._findBy(r,e)),i)return!1}),i},findNode:function(t){return this._findBy(this.nodes,function(e){return e.id.toString()===t.toString()})}}),t.exports=o},function(t,e,n){"use strict";var i=n(1),r=function(t){i.mix(this,t)};i.augment(r,{parent:null,level:0,children:null,x:0,y:0}),t.exports=r},function(t,e){var n={insertBefore:function(t,e,n){if(!(e<=n)){var i=t.splice(e,1)[0];t.splice(n-1,0,i)}},insertAfter:function(t,e,n){if(!(e>=n)){var i=t.splice(e,1)[0];t.splice(n,0,i)}}};t.exports=n},function(t,e,n){var i=n(56);t.exports={interpolation:i.interpolation,unInterpolation:i.unInterpolation}},function(t,e,n){"use strict";function i(t,e){for(var n=[],i=Math.min(t.length,e.length),r=0;r<i;r++)n[r]=a.singular(t[r],e[r]);return function(t){for(var e=[],r=0;r<i;r++)e[r]=n[r](t);return e}}function r(t,e){for(var n=[],i=Math.min(t.length,e.length),r=0;r<i;r++)n[r]=a.unSingular(t[r],e[r]);return function(t){for(var e=Math.min(n.length,t.length),i=0,r=0,a=0;a<e;a++)i+=n[a](t[a]),r++;return 0===r?0:i/r}}var a=n(14);t.exports={array:i,unArray:r}},function(t,e,n){"use strict";function i(t,e){switch(e.getType()){case"rgb":return a(t,e);case"hsl":return o(t,e)}}function r(t,e){switch(e.getType()){case"rgb":return s(t,e);case"hsl":return u(t,e)}}function a(t,e){var n=t.getR(),i=t.getG(),r=t.getB(),a=t.getA(),s=e.getR()-n,o=e.getG()-i,u=e.getB()-r,h=e.getA();return void 0===a&&void 0===h||(a=a||1,h=(void 0===h?1:h)-a),function(t){var e=new c;return e.setRGB(n+s*t,i+o*t,r+u*t,void 0!==a&&void 0!==h?a+h*t:void 0),e.getRGBStyle()}}function s(t,e){var n=t.getR(),i=t.getG(),r=t.getB(),a=t.getA(),s=e.getR()-n,o=e.getG()-i,u=e.getB()-r,h=e.getA();return void 0===a&&void 0===h||(a=a||1,h=(void 0===h?1:h)-a),function(t){
if(t=new c(t),!t.getType())return 0;var e=t.getR(),l=t.getG(),f=t.getB(),d=t.getA();d=d||1;var g=0,p=0;return 0!==s&&(g+=(e-n)/s,p++),0!==o&&(g+=(l-i)/o,p++),0!==u&&(g+=(f-r)/u,p++),0!==h&&h&&(g+=(d-a)/h,p++),0===p?0:g/p}}function o(t,e){var n=t.getH(),i=t.getS(),r=t.getL(),a=t.getA(),s=e.getH()-n,o=e.getS()-i,u=e.getL()-r,h=e.getA();return void 0===a&&void 0===h||(a=a||1,h=(void 0===h?1:h)-a),function(t){var e=new c;return e.setHSL(n+s*t,i+o*t,r+u*t,void 0!==a&&void 0!==h?a+h*t:void 0),e.getHSLStyle()}}function u(t,e){var n=t.getH(),i=t.getS(),r=t.getL(),a=t.getA(),s=e.getH()-n,o=e.getS()-i,u=e.getL()-r,h=e.getA();return void 0===a&&void 0===h||(a=a||1,h=(void 0===h?1:h)-a),function(t){if(t=new c(t),!t.getType())return 0;var e=t.getH(),l=t.getS(),f=t.getL(),d=t.getA();d=d||1;var g=0,p=0;return 0!==s&&(g+=(e-n)/s,p++),0!==o&&(g+=(l-i)/o,p++),0!==u&&(g+=(f-r)/u,p++),0!==h&&h&&(g+=(d-a)/h,p++),0===p?0:g/p}}var c=n(17);t.exports={color:i,unColor:r}},function(t,e,n){"use strict";function i(t,e){return t instanceof l&&e instanceof l?c.matrix(t,e):a.isArray(t)&&a.isArray(e)?s.array(t,e):a.isObject(t)&&a.isObject(e)?o.object(t,e):u.singular(t,e)}function r(t,e){return t instanceof l&&e instanceof l?c.unMatrix(t,e):a.isArray(t)&&a.isArray(e)?s.unArray(t,e):a.isObject(t)&&a.isObject(e)?o.unObject(t,e):u.unSingular(t,e)}var a=n(1),s=n(54),o=n(59),u=n(14),c=n(57),h=n(2),l=h.Matrix3;t.exports={interpolation:i,unInterpolation:r}},function(t,e,n){"use strict";function i(t,e){for(var n=[],i=t.elements,r=e.elements,s=0;s<u;s++)n[s]=a.singular(i[s],r[s]);return function(t){for(var e=new o,i=e.elements,r=0;r<u;r++)i[r]=n[r](t);return e}}function r(t,e){for(var n=[],i=t.elements,r=e.elements,s=0;s<u;s++)n[s]=a.unSingular(i[s],r[s]);return function(t){for(var e=t.elements,i=0,r=0,a=0;a<u;a++){var s=n[a](e[a]);0!==s&&(i+=s,r++)}return i/r}}var a=n(14),s=n(2),o=s.Matrix3,u=9;t.exports={matrix:i,unMatrix:r}},function(t,e){"use strict";function n(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function i(t,e){return e-=t,function(n){return 0===e?0:(n-t)/e}}t.exports={number:n,unNumber:i}},function(t,e,n){"use strict";function i(t,e){var n={};for(var i in t)i in e&&(n[i]=a.singular(t[i],e[i]));return function(t){var e={};for(var i in n)e[i]=n[i](t);return e}}function r(t,e){var n={};for(var i in t)i in e&&(n[i]=a.unSingular(t[i],e[i]));return function(t){var e=0,i=0;for(var r in n)r in t&&(e+=n[r](t[r]),i++);return 0===i?0:e/i}}var a=n(14);t.exports={object:i,unObject:r}},function(t,e,n){"use strict";function i(t){this.space={},r.isString(t)?this.setStyle(t):t instanceof i&&this.copy(t)}var r=n(1),a=(n(4),n(62)),s=n(63),o=n(61),u={hex:/^#([A-Fa-f0-9]{3}|[A-Fa-f0-9]{6})$/,space:/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)$/,rgbNum:/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*$/,rgbaNum:/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([0-9]*\.?[0-9]+)\s*$/,rgbPre:/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*$/,rgbaPre:/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*([0-9]*\.?[0-9]+)\s*$/,hsl:/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*$/,hsla:/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*([0-9]*\.?[0-9]+)\s*$/};r.augment(i,{getType:function(){return this.space.type},toRGB:function(){var t=this.space;if("rgb"!==t.type){var e=t.toRGB();this.setRGB(e.r,e.g,e.b,e.a)}},toHSL:function(){var t=this.space;if("hsl"!==t.type){var e=t.toHSL();this.setHSL(e.h,e.s,e.l,e.a)}},getR:function(){return this.toRGB(),this.space.r},getG:function(){return this.toRGB(),this.space.g},getB:function(){return this.toRGB(),this.space.b},getH:function(){return this.toHSL(),this.space.h},getS:function(){return this.toHSL(),this.space.s},getL:function(){return this.toHSL(),this.space.l},getA:function(){return this.space.a},multiplyA:function(t){return void 0===t?this:(void 0===this.space.a&&(this.space.a=1),this.space.a*=t,this)},getRGBStyle:function(){return this.toRGB(),this.space.getStyle()},getRGBPreStyle:function(){return this.toRGB(),this.space.getPreStyle()},getHSLStyle:function(){return this.toHSL(),this.space.getStyle()},getHex:function(){return this.toRGB(),this.space.getHex()},setRGB:function(t,e,n,i){return this.space=new s,this.space.setRGB(t,e,n,i),this},setHSL:function(t,e,n,i){return this.space=new a,this.space.setHSL(t,e,n,i),this},setHex:function(t){return this.space=new s,t=Math.floor(t),this.space.r=(t>>16&255)/255,this.space.g=(t>>8&255)/255,this.space.b=(255&t)/255,this},setStyle:function(t){var e;if(e=u.hex.exec(t)){var n=e[1],i=n.length;if(3===i)return this.setRGB(parseInt(n.charAt(0)+n.charAt(0),16)/255,parseInt(n.charAt(1)+n.charAt(1),16)/255,parseInt(n.charAt(2)+n.charAt(2),16)/255),this;if(6===i)return this.setRGB(parseInt(n.charAt(0)+n.charAt(1),16)/255,parseInt(n.charAt(2)+n.charAt(3),16)/255,parseInt(n.charAt(4)+n.charAt(5),16)/255),this}else if(e=u.space.exec(t)){var r,a=e[1],s=e[2];switch(a){case"rgb":if(r=u.rgbNum.exec(s))return this.setRGB(parseInt(r[1],10)/255,parseInt(r[2],10)/255,parseInt(r[3],10)/255),this;if(r=u.rgbPre.exec(s))return this.setRGB(parseInt(r[1],10)/100,parseInt(r[2],10)/100,parseInt(r[3],10)/100),this;break;case"rgba":if(r=u.rgbaNum.exec(s))return this.setRGB(parseInt(r[1],10)/255,parseInt(r[2],10)/255,parseInt(r[3],10)/255,parseFloat(r[4])),this;if(r=u.rgbaPre.exec(s))return this.setRGB(parseInt(r[1],10)/100,parseInt(r[2],10)/100,parseInt(r[3],10)/100,parseFloat(r[4])),this;break;case"hsl":if(r=u.hsl.exec(s))return this.setHSL(parseInt(r[1],10)/360,parseInt(r[2],10)/100,parseInt(r[3],10)/100),this;break;case"hsla":if(r=u.hsla.exec(s))return this.setHSL(parseInt(r[1],10)/360,parseInt(r[2],10)/100,parseInt(r[3],10)/100,parseFloat(r[4])),this}}else t=t.toLowerCase(),void 0!==o[t]?this.setHex(o[t]):this.setHex(o.black)},copy:function(t){this.space=t.space.clone()},clone:function(){return new i(this)}}),t.exports=i},function(t,e){t.exports={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074}},function(t,e,n){"use strict";var i=n(1),r=n(4),a=function(){this.h=0,this.s=0,this.l=0};i.augment(a,{type:"hsl",setHSL:function(t,e,n,i){this.h=r.mod(t,1),this.s=r.clamp(e,0,1),this.l=r.clamp(n,0,1),void 0!==i?this.a=r.clamp(i,0,1):this.a=void 0},toRGB:function(){function t(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(){var e=this,n=e.h,i=e.s,r=e.l;if(0===i)return{r:r,g:r,b:r,a:e.a};var a=r<=.5?r*(1+i):r+i-r*i,s=2*r-a;return{r:t(s,a,n+1/3),g:t(s,a,n),b:t(s,a,n-1/3),a:e.a}}}(),clone:function(){var t=new a;return t.h=this.h,t.s=this.s,t.l=this.l,t.a=this.a,t},copy:function(t){return this.h=t.h,this.s=t.s,this.l=t.l,this.a=t.a,this},getStyle:function(){var t=this;return void 0===t.a?"hsl("+Math.round(360*t.h)+", "+Math.round(100*t.s)+"%, "+Math.round(100*t.l)+"%)":"hsla("+Math.round(360*t.h)+", "+Math.round(100*t.s)+"%, "+Math.round(100*t.l)+"%, "+t.a+")"}}),t.exports=a},function(t,e,n){"use strict";var i=n(1),r=n(4),a=function(){this.r=0,this.g=0,this.b=0,this.type="rgb"};i.augment(a,{type:"rgb",setRGB:function(t,e,n,i){this.r=r.clamp(t,0,1),this.g=r.clamp(e,0,1),this.b=r.clamp(n,0,1),void 0!==i?this.a=r.clamp(i,0,1):this.a=void 0},toHSL:function(){var t,e,n=this.r,i=this.g,r=this.b,a=Math.max(n,i,r),s=Math.min(n,i,r),o=(s+a)/2;if(s===a)t=0,e=0;else{var u=a-s;switch(e=o<=.5?u/(a+s):u/(2-a-s),a){case n:t=(i-r)/u+(i<r?6:0);break;case i:t=(r-n)/u+2;break;case r:t=(n-i)/u+4}t/=6}return{h:t,s:e,l:o,a:this.a}},getHex:function(){var t=255*this.r<<16^255*this.g<<8^255*this.b<<0;return"#"+("000000"+t.toString(16)).slice(-6)},getStyle:function(){return void 0===this.a?"rgb("+Math.round(255*this.r).toString()+", "+Math.round(255*this.g).toString()+", "+Math.round(255*this.b).toString()+")":"rgba("+Math.round(255*this.r).toString()+", "+Math.round(255*this.g).toString()+", "+Math.round(255*this.b).toString()+", "+this.a+")"},getPreStyle:function(){return void 0===this.a?"rgb("+Math.round(100*this.r).toString()+"%, "+Math.round(100*this.g).toString()+"%, "+Math.round(100*this.b).toString()+"%)":"rgba("+Math.round(100*this.r).toString()+"%, "+Math.round(100*this.g).toString()+"%, "+Math.round(100*this.b).toString()+"%, "+this.a+")"},clone:function(){var t=new a;return t.r=this.r,t.g=this.g,t.b=this.b,t.a=this.a,t},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}}),t.exports=a},function(t,e,n){"use strict";var i=n(18),r=n(12),a=n(65),s=function(t){s.superclass.constructor.call(this,t),this._init()};i.extend(s,r),s.ATTRS={time:0,createTime:null,playTime:null,pauseTimeSpace:0,available:!1,canvases:[],tweens:[],endTime:0,infinite:!1,removeCanvas:!1,autoPlay:!1,autoDraw:!0,loop:!1,status:"silent",autoDestroy:!0},i.augment(s,{_init:function(){window.tween=this;var t=this.get("autoPlay");this.set("createTime",+new Date),t&&this.play()},_trySetEndTime:function(t){var e=this;i.isObject(t)?e._setEndTime(t):i.isArray(t)&&i.each(t,function(t,n){e._setEndTime(t)})},_trySetCanvases:function(t){var e=this;i.isObject(t)?e._setCanvases(t):i.isArray(t)&&i.each(t,function(t,n){e._setCanvases(t)})},_setEndTime:function(t){var e=this.get("endTime"),n=t.get("endTime");n>e&&this.set("endTime",n)},_setCanvases:function(t){var e=t.get("canvas"),n=this.get("canvases");n.indexOf(e)===-1&&n.push(e)},_resetTweens:function(){var t=this.get("tweens");t.sort(function(t,e){return e.get("startTime")-t.get("startTime")}),i.each(t,function(t){t.reset()})},_getTime:function(){var t=this.get("playTime"),e=this.get("pauseTimeSpace");return+new Date-t+e},_refresh:function(t){for(var e,n,r=this.get("tweens"),a=this.get("canvases"),s=this.get("autoDraw"),o=this.get("autoDestroy"),u=this.get("removeCanvas"),c=[],h=[],l=0;l<r.length;l++)n=r[l],e=n.get("canvas"),n.get("needsDestroy")&&o?n.destroy():n.get("destroyed")||n.get("needsDestroy")||n.tryStep(t),n.destroyed||c.push(n),!i.inArray(a,e)&&u&&h.push(e);s&&this.draw(),u&&this.set("canvases",h),this.set("tweens",c)},_update:function(){if(this.get("available")){var t=this,e=t._getTime(),n=t.get("endTime"),r=t.get("loop"),a=t.get("infinite"),s=t.get("tweens");t._refresh(e),t.fire("update"),i.requestAnimationFrame(function(){e<=n+32||a||s.length>0?t._update():t._tryShut(),e>n&&r&&(t.set("pauseTimeSpace",0),t._resetTweens(),t.set("playTime",+new Date))})}},_tryShut:function(){var t=this;setTimeout(function(){var e=t._getTime(),n=t.get("endTime"),i=t.get("tweens");e<=n+100&&i.length>0?t._update():(t.reset(),t.set("status","silent"))},100)},animate:function(t,e){var n=new a({target:t,timeline:this,startTime:e?e:0});return n},add:function(t){var e,n=this.get("tweens");return i.isArray(t)?e=n.concat(t):i.isObject(t)&&"tween"===t.get("type")?(n.push(t),e=n):console.error("Timeline not Support this type"),this.set("tweens",e),this._trySetCanvases(t),this._trySetEndTime(t),this._removeOverdueTweens(),this},_removeOverdueTweens:function(){var t=this.get("tweens"),e=this.getNow();i.each(t,function(n,r){i.isObject(n)&&n.get("endTime")<e&&n.get("needsDestroy")&&(n.destroyed||n.destroy(),t.splice(r,1))})},getNow:function(){var t=this.get("playTime");return t?+new Date-t:0},getTime:function(){var t=this.get("playTime");return t?+new Date-t:0},play:function(){var t=this.get("status");return"silent"===t&&(this.set("playTime",+new Date),this.set("available",!0),this.set("status","playing"),this._update()),this},loop:function(t){return t||void 0===t?(this.set("infinite",!0),this.set("autoDestroy",!1),this.set("removeCanvas",!1),this.set("loop",!0)):this.set("loop",!1),this},stop:function(){this.set("status","silent"),this.set("available",!1),this.set("pauseTimeSpace",0),this._resetTweens(),this._refresh(0),this.draw()},pause:function(){var t=this.get("available");return t&&this.set("pauseTimeSpace",+new Date-this.get("playTime")),this.set("available",!1),this.set("status","silent"),this},reset:function(){this.set("playTime",0),this.set("endTime",0),this.set("canvases",[])},draw:function(){for(var t=this.get("canvases"),e=0;e<t.length;e++)t[e].draw()}}),t.exports=s},function(t,e,n){"use strict";var i=n(18),r=n(30),a=n(12),s=n(31),o=n(2),u=(o.Matrix3,function(t){u.superclass.constructor.call(this,t)});i.extend(u,a),u.ATTRS={target:null,timeline:null,startTime:null},i.augment(u,{append:function(t,e,n,a){var o,u=i.guid("tween_"),c=this.get("target"),h=(this.get("tweens"),this.get("timeline")),l=this.get("startTime"),f=r.getKeyFrameByProps(c,e),d=f[1];return t=t?t:l,e&&e.delay&&(t+=e.delay),o=new s({id:u,canvas:c.get("canvas"),startTime:t,target:c,easing:n,callBack:a,endKeyFrame:d,duration:e.duration?e.duration:1e3,repeat:!!e.repeat&&e.repeat,destroyTarget:!!e.destroy&&e.destroy}),h&&h.add(o),this}}),t.exports=u},function(t,e,n){"use strict";var i=n(3),r=n(68),a=n(69),s=n(34),o=n(67),u=n(2),c=u.Vector3,h=function(){};i.augment(h,{canFill:!1,canStroke:!1,initAttrs:function(t){return this.__attrs={},this.attr(i.mix({},this.getDefaultAttrs(),t)),this},getDefaultAttrs:function(){var t=this,e=t.constructor,n=e.__attrs;return i.mix(!0,{},n)},attr:function(t,e){var n=this;if(0===arguments.length)return n.__attrs;if(i.isObject(t))return i.each(t,function(t,e){n._setAttr(e,t)}),n.__afterSetAttrAll&&n.__afterSetAttrAll(t),n;if(2===arguments.length){if(n._setAttr(t,e)!==!1){var r="__afterSetAttr"+i.ucfirst(t);n[r]&&n[r](e)}return n}return n._getAttr(t)},resetAttrs:function(){var t=this,e=t,n=t.get("context"),o=e.__attrs;e.isGroup?i.each(o,function(t,a){r[a]&&("fillStyle"===a&&(t=s.parseStyle(t,e,o.fillOpacity)),"strokeStyle"===a&&(t=s.parseStyle(t,e,o.strokeOpacity)),"lineDash"===a&&n.setLineDash?i.isArray(t)?n.setLineDash(t):i.isString(t)&&n.setLineDash(t.split(" ")):n[a]=t)}):i.each(o,function(t,r){a[r]&&("fillStyle"===r&&(t=s.parseStyle(t,e,o.fillOpacity)),"strokeStyle"===r&&(t=s.parseStyle(t,e,o.strokeOpacity)),"lineDash"===r&&n.setLineDash?i.isArray(t)?n.setLineDash(t):i.isString(t)&&n.setLineDash(t.split(" ")):n[r]=t)})},_getAttr:function(t){var e=this,n=e.__attrs[t],r="__getAttr"+i.ucfirst(t);return e[r]&&(n=e[r](n)),n},_setAttr:function(t,e){var n=this,r="__setAttr"+i.ucfirst(t);return n[r]&&(e=n[r](e,n.__attrs[t])),e!==n.__attrs[t]&&(n.__attrs[t]=e,n)},__setAttrFill:function(t){var e=this;if(e.canFill)return e.__attrs.fillStyle=t,t},hasFill:function(){if(this.canFill)for(var t=this;t;){if(t.__attrs.fill)return t.__attrs.fill;t=t.get("parent")}},__setAttrStroke:function(t){var e=this;if(e.canStroke)return this.__attrs.strokeStyle=t,t},hasStroke:function(){if(this.canStroke)for(var t=this;t;){if(t.__attrs.stroke)return t.__attrs.stroke;t=t.get("parent")}},__setAttrOpacity:function(t){return this.__attrs.globalAlpha=t,t},__getAttrOpacity:function(){return this.__attrs.globalAlpha},__setAttrLineWidth:function(t,e){return t>=0?t:e||1},__setAttrClip:function(t){var e=this;if(t&&t.type in o)return null===t.get("canvas")&&(t=i.clone(t)),t.set("parent",e.get("parent")),t.set("context",e.get("context")),t.inside=function(n,i){var r=new c(n,i,1);return t.invert(r,e.get("canvas")),t.__isPointInFill(r.x,r.y)},t}}),t.exports=h},function(t,e){"use strict";t.exports={circle:1,ellipse:1,fan:1,polygon:1,rect:1,path:1}},function(t,e){"use strict";t.exports={fillStyle:1,strokeStyle:1,globalAlpha:1,shadowBlur:1,shadowColor:1,shadowOffsetX:1,shadowOffsetY:1,lineDash:1}},function(t,e){"use strict";t.exports={fillStyle:1,font:1,globalAlpha:1,lineCap:1,lineWidth:1,lineJoin:1,miterLimit:1,shadowBlur:1,shadowColor:1,shadowOffsetX:1,shadowOffsetY:1,strokeStyle:1,textAlign:1,textBaseline:1,lineDash:1}},function(t,e,n){var i=n(3),r=n(33),a=function(t){a.superclass.constructor.call(this,t)};i.extend(a,r),i.augment(a,{init:function(){a.superclass.init.call(this);var t=this,e=t.get("canvasId"),n=t.get("el");n=n?n:document.getElementById(e),t.set("el",n),t.set("context",n.getContext("2d")),t.set("canvas",t),t.__events()},__events:function(){},getPointByClient:function(t,e){var n=this,i=n.get("el"),r=i.getBoundingClientRect(),a=r.right-r.left,s=r.bottom-r.top;return{x:(t-r.left)*(i.width/a),y:(e-r.top)*(i.height/s)}},getClientByPoint:function(t,e){var n=this,i=n.get("el"),r=i.getBoundingClientRect(),a=r.right-r.left,s=r.bottom-r.top;return{clientX:t/(i.width/a)+r.left,clientY:e/(i.height/s)+r.top}},beforeDraw:function(){var t=this.get("context"),e=this.get("el");t.clearRect(0,0,e.width,e.height)},draw:function(){function t(){e.set("animateHandler",i.requestAnimationFrame(function(){e.set("animateHandler",void 0),e.get("toDraw")&&t()}));try{a.superclass.draw.call(e)}catch(n){e.set("toDraw",!1)}e.set("toDraw",!1)}var e=this;e.get("animateHandler")?e.set("toDraw",!0):t()}}),t.exports=a},function(t,e,n){"use strict";var i=n(3),r=function(){};i.augment(r,{initEventDispatcher:function(){this.__listeners={}},on:function(t,e){var n=this.__listeners;return i.isNull(n[t])&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e),this},off:function(t,e){var n=this.__listeners;return 0===arguments.length?(this.__listeners={},this):1===arguments.length&&i.isString(t)?(n[t]=[],this):2===arguments.length&&i.isString(t)&&i.isFunction(e)?(i.remove(n[t],e),this):void 0},has:function(t,e){var n=this.__listeners;return 0===arguments.length&&!i.isBlank(n)||(!(1!==arguments.length||!n[t]||i.isBlank(n[t]))||!(2!==arguments.length||!n[t]||n[t].indexOf(e)===-1))},trigger:function(t){var e=this,n=e.__listeners,r=n[t.type];if(t.target=e,i.notNull(r)&&i.each(r,function(n){n.call(e,t)}),t.bubbles){var a=e.get("parent");a&&!t.propagationStopped&&a.trigger(t)}return e}}),t.exports=r},function(t,e,n){"use strict";var i=n(3),r=n(2),a=r.Matrix3,s=n(4),o=function(){};i.augment(o,{initTransform:function(){this.__m=new a},translate:function(t,e){return this.__m.translate(t,e),this},rotate:function(t){return this.__m.rotate(s.degreeToRad(t)),this},scale:function(t,e){return this.__m.scale(t,e),this},transform:function(t){var e=this;return i.each(t,function(t){switch(t[0]){case"t":e.translate(t[1],t[2]);break;case"s":e.scale(t[1],t[2]);break;case"r":e.rotate(t[1]);break;case"m":e.__m=a.multiply(t[1],e.__m)}}),this},setTransform:function(t){return this.__m.identity(),this.transform(t)},getMatrix:function(){return this.__m},setMatrix:function(t){return this.__m=t,this},apply:function(t,e){var n=this;e=e||n;for(var r=n,s=[];r!==e;)s.unshift(r),r=r.get("parent");s.unshift(r);var o=new a;return i.each(s,function(t){o.multiply(t.__m)}),t.applyMatrix(o),this},invert:function(t,e){var n=this;e=e||n;for(var r=n,s=[];r!==e;)s.unshift(r),r=r.get("parent");s.unshift(r);var o=new a;i.each(s,function(t){o.multiply(t.__m)});var u=o.getInverse();return t.applyMatrix(u),this},resetTransform:function(){var t=this,e=t.get("context"),n=t.__m.to2DObject();e.transform(n.a,n.b,n.c,n.d,n.e,n.f)}}),t.exports=o},function(t,e,n){"use strict";var i=n(3),r=n(5),a=n(6),s=n(19),o=n(4),u=n(11),c=n(2),h=c.Vector2,l=n(8),f=function(t){f.superclass.constructor.call(this,t)};f.ATTRS={x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,arrow:!1},i.extend(f,r),i.augment(f,{canStroke:!0,type:"arc",__setAttrR:function(t,e){return t>=0?t:(l.warn("r \u5fc5\u987b\u5927\u4e8e0"),e)},__setAttrClockwise:function(t,e){return i.isBoolean(t)?t:(l.warn("clockwise \u5fc5\u987b\u662fboolean\u503c"),e)},__setAttrStartAngle:function(t){return o.degreeToRad(t)},__getAttrStartAngle:function(t){return o.radToDegree(t)},__setAttrEndAngle:function(t){return o.degreeToRad(t)},__getAttrEndAngle:function(t){return o.radToDegree(t)},__afterSetAttrX:function(){this.__calculateBox()},__afterSetAttrY:function(){this.__calculateBox()},__afterSetAttrR:function(){this.__calculateBox()},__afterSetAttrStartAngle:function(){this.__calculateBox()},__afterSetAttrEndAngle:function(){this.__calculateBox()},__afterSetAttrClockwise:function(){this.__calculateBox()},__afterSetAttrLineWidth:function(){this.__calculateBox()},__afterSetAttrAll:function(){this.__calculateBox()},__calculateBox:function(){var t=this.__attrs,e=t.x,n=t.y,i=t.r,r=t.startAngle,a=t.endAngle,o=t.clockwise,u=t.lineWidth,c=s.box(e,n,i,r,a,o),h=u/2;c.minX-=h,c.minY-=h,c.maxX+=h,c.maxY+=h,this.set("box",c)},isPointInPath:function(t,e){var n=this.__attrs,i=n.x,r=n.y,s=n.r,o=n.startAngle,u=n.endAngle,c=n.clockwise,h=n.lineWidth;return!!this.hasStroke()&&a.arcline(i,r,s,o,u,c,h,t,e)},createPath:function(){var t=this.get("context"),e=this.__attrs,n=e.x,i=e.y,r=e.r,a=e.startAngle,s=e.endAngle,o=e.clockwise,c=e.lineWidth,l=e.arrow;if(t.beginPath(),t.arc(n,i,r,a,s,o),l){var f={x:n+r*Math.cos(s),y:i+r*Math.sin(s)},d=new h(-r*Math.sin(s),r*Math.cos(s));o&&d.multiplyScaler(-1),u.makeArrow(t,d,f,c)}}}),t.exports=f},function(t,e,n){"use strict";var i=n(3),r=n(5),a=n(6),s=n(8),o=function(t){o.superclass.constructor.call(this,t)};o.ATTRS={x:0,y:0,r:0,lineWidth:1},i.extend(o,r),i.augment(o,{canFill:!0,canStroke:!0,type:"circle",__setAttrR:function(t,e){return t>=0?t:(s.warn("r \u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e0"),e)},__afterSetAttrX:function(){this.__calculateBox()},__afterSetAttrY:function(){this.__calculateBox()},__afterSetAttrR:function(){this.__calculateBox()},__afterSetAttrLineWidth:function(){this.__calculateBox()},__afterSetAttrAll:function(){this.__calculateBox()},__calculateBox:function(){var t=this.__attrs,e=t.x,n=t.y,i=t.r,r=t.lineWidth,a=r/2+i;this.set("box",{minX:e-a,minY:n-a,maxX:e+a,maxY:n+a})},isPointInPath:function(t,e){var n=this.hasFill(),i=this.hasStroke();return n&&i?this.__isPointInFill(t,e)||this.__isPointInStroke(t,e):n?this.__isPointInFill(t,e):!!i&&this.__isPointInStroke(t,e)},__isPointInFill:function(t,e){var n=this.__attrs,i=n.x,r=n.y,s=n.r;return a.circle(i,r,s,t,e)},__isPointInStroke:function(t,e){var n=this.__attrs,i=n.x,r=n.y,s=n.r,o=n.lineWidth;return a.arcline(i,r,s,0,2*Math.PI,!1,o,t,e)},createPath:function(){var t=this.get("context"),e=this.__attrs,n=e.x,i=e.y,r=e.r;t.beginPath(),t.arc(n,i,r,0,2*Math.PI,!1),t.closePath()}}),t.exports=o},function(t,e,n){"use strict";var i=n(3),r=n(5),a=n(6),s=n(11),o=n(15),u=n(2),c=u.Vector2,h=function(t){h.superclass.constructor.call(this,t)};h.ATTRS={p1:null,p2:null,p3:null,p4:null,lineWidth:1,arrow:!1},i.extend(h,r),i.augment(h,{canStroke:!0,type:"cubic",__afterSetAttrP1:function(){this.__calculateBox()},__afterSetAttrP2:function(){this.__calculateBox()},__afterSetAttrP3:function(){this.__calculateBox()},__afterSetAttrP4:function(){this.__calculateBox()},__afterSetAttrLineWidth:function(){this.__calculateBox()},__afterSetAttrAll:function(){this.__calculateBox()},__calculateBox:function(){var t,e,n=this.__attrs,r=n.p1,a=n.p2,s=n.p3,u=n.p4;if(!(i.isNull(r)||i.isNull(a)||i.isNull(s)||i.isNull(u))){var c=n.lineWidth/2,h=o.extrema(r[0],a[0],s[0],u[0]);for(t=0,e=h.length;t<e;t++)h[t]=o.at(r[0],a[0],s[0],u[0],h[t]);var l=o.extrema(r[1],a[1],s[1],u[1]);for(t=0,e=l.length;t<e;t++)l[t]=o.at(r[1],a[1],s[1],u[1],l[t]);h.push(r[0],u[0]),l.push(r[1],u[1]),this.set("box",{minX:Math.min.apply(Math,h)-c,maxX:Math.max.apply(Math,h)+c,minY:Math.min.apply(Math,l)-c,maxY:Math.max.apply(Math,l)+c})}},isPointInPath:function(t,e){var n=this.__attrs,i=n.p1,r=n.p2,s=n.p3,o=n.p4,u=n.lineWidth;return a.cubicline(i[0],i[1],r[0],r[1],s[0],s[1],o[0],o[1],u,t,e)},createPath:function(){var t=this.get("context"),e=this.__attrs,n=e.p1,r=e.p2,a=e.p3,o=e.p4,u=e.lineWidth,h=e.arrow;if(!(i.isNull(n)||i.isNull(r)||i.isNull(a)||i.isNull(o)))if(t.beginPath(),t.moveTo(n[0],n[1]),h){var l=new c(o[0]-a[0],o[1]-a[1]),f=s.getEndPoint(l,new c(o[0],o[1]),u);t.bezierCurveTo(r[0],r[1],a[0],a[1],f.x,f.y),s.makeArrow(t,l,f,u)}else t.bezierCurveTo(r[0],r[1],a[0],a[1],o[0],o[1])},getPoint:function(t){var e=this.__attrs;return{x:o.at(e.p4[0],e.p3[0],e.p2[0],e.p1[0],t),y:o.at(e.p4[1],e.p3[1],e.p2[1],e.p1[1],t)}}}),t.exports=h},function(t,e,n){"use strict";var i=n(3),r=n(5),a=n(6),s=n(2),o=s.Matrix3,u=s.Vector3,c=n(8),h=function(t){h.superclass.constructor.call(this,t)};h.ATTRS={x:0,y:0,rx:1,ry:1,lineWidth:1},i.extend(h,r),i.augment(h,{canFill:!0,canStroke:!0,type:"ellipse",__setAttrRx:function(t,e){return t>0?t:(c.warn("rx \u5927\u4e8e\u7b49\u4e8e0"),e)},__setAttrRy:function(t,e){return t>0?t:(c.warn("ry \u5927\u4e8e\u7b49\u4e8e0"),e)},__afterSetAttrX:function(){this.__calculateBox()},__afterSetAttrY:function(){this.__calculateBox()},__afterSetAttrRx:function(){this.__calculateBox()},__afterSetAttrRy:function(){this.__calculateBox()},__afterSetAttrLineWidth:function(){this.__calculateBox()},__afterSetAttrAll:function(){this.__calculateBox()},__calculateBox:function(){var t=this.__attrs,e=t.x,n=t.y,i=t.rx,r=t.ry,a=t.lineWidth,s=i+a/2,o=r+a/2;this.set("box",{minX:e-s,minY:n-o,maxX:e+s,maxY:n+o})},isPointInPath:function(t,e){var n=this.hasFill(),i=this.hasStroke();return n&&i?this.__isPointInFill(t,e)||this.__isPointInStroke(t,e):n?this.__isPointInFill(t,e):!!i&&this.__isPointInStroke(t,e)},__isPointInFill:function(t,e){var n=this.__attrs,i=n.x,r=n.y,s=n.rx,c=n.ry,h=s>c?s:c,l=s>c?1:s/c,f=s>c?c/s:1,d=new u(t,e,1),g=new o;g.scale(l,f),g.translate(i,r);var p=g.getInverse();return d.applyMatrix(p),a.circle(0,0,h,d.x,d.y)},__isPointInStroke:function(t,e){var n=this.__attrs,i=n.x,r=n.y,s=n.rx,c=n.ry,h=n.lineWidth,l=s>c?s:c,f=s>c?1:s/c,d=s>c?c/s:1,g=new u(t,e,1),p=new o;p.scale(f,d),p.translate(i,r);var v=p.getInverse();return g.applyMatrix(v),a.arcline(0,0,l,0,2*Math.PI,!1,h,g.x,g.y)},createPath:function(){var t=this.get("context"),e=this.__attrs,n=e.x,i=e.y,r=e.rx,a=e.ry,s=r>a?r:a,u=r>a?1:r/a,c=r>a?a/r:1,h=new o;h.scale(u,c),h.translate(n,i);var l=h.to2DObject();t.beginPath(),t.save(),t.transform(l.a,l.b,l.c,l.d,l.e,l.f),t.arc(0,0,s,0,2*Math.PI),t.restore(),t.closePath()}}),t.exports=h},function(t,e,n){"use strict";var i=n(3),r=n(5),a=n(6),s=n(4),o=n(19),u=n(2),c=u.Vector2,h=n(8),l=function(t){l.superclass.constructor.call(this,t)};l.ATTRS={x:0,y:0,rs:0,re:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1},i.extend(l,r),i.augment(l,{canFill:!0,canStroke:!0,type:"fan",__setAttrRs:function(t,e){return t>=0?t:(h.warn("rs \u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e0"),e)},__setAttrRe:function(t,e){return t>=0?t:(h.warn("re \u5fc5\u987b\u5927\u4e8e\u7b49\u4f600"),e)},__setAttrClockwise:function(t,e){return i.isBoolean(t)?t:(h.warn("clockwise \u5fc5\u987b\u4e3aboolean\u503c"),e)},__setAttrStartAngle:function(t){return s.degreeToRad(t)},__getAttrStartAngle:function(t){return s.radToDegree(t)},__setAttrEndAngle:function(t){return s.degreeToRad(t)},__getAttrEndAngle:function(t){return s.radToDegree(t)},__afterSetAttrX:function(){this.__calculateBox()},__afterSetAttrY:function(){this.__calculateBox()},__afterSetAttrRs:function(){this.__calculateBox()},__afterSetAttrRe:function(){this.__calculateBox()},__afterSetAttrStartAngle:function(){this.__calculateBox()},__afterSetAttrEndAngle:function(){this.__calculateBox()},__afterSetAttrClockwise:function(){this.__calculateBox()},__afterSetAttrLineWidth:function(){this.__calculateBox()},__afterSetAttrAll:function(){this.__calculateBox()},__calculateBox:function(){var t=this,e=t.__attrs,n=e.x,i=e.y,r=e.rs,a=e.re,s=e.startAngle,u=e.endAngle,c=e.clockwise,h=e.lineWidth,l=o.box(n,i,r,s,u,c),f=o.box(n,i,a,s,u,c),d=Math.min(l.minX,f.minX),g=Math.min(l.minY,f.minY),p=Math.max(l.maxX,f.maxX),v=Math.max(l.maxY,f.maxY),x=h/2;this.set("box",{minX:d-x,minY:g-x,maxX:p+x,maxY:v+x})},isPointInPath:function(t,e){var n=this.hasFill(),i=this.hasStroke();return n&&i?this.__isPointInFill(t,e)||this.__isPointInStroke(t,e):n?this.__isPointInFill(t,e):!!i&&this.__isPointInStroke(t,e)},__isPointInFill:function(t,e){var n=this.__attrs,i=n.x,r=n.y,a=n.rs,u=n.re,h=n.startAngle,l=n.endAngle,f=n.clockwise,d=new c(1,0),g=new c(t-i,e-r),p=d.angleTo(g),v=o.nearAngle(p,h,l,f);if(s.equal(p,v)){var x=g.lengthSq();if(a*a<=x&&x<=u*u)return!0}return!1},__isPointInStroke:function(t,e){var n=this.__attrs,i=n.x,r=n.y,s=n.rs,o=n.re,u=n.startAngle,c=n.endAngle,h=n.clockwise,l=n.lineWidth,f={x:Math.cos(u)*s+i,y:Math.sin(u)*s+r},d={x:Math.cos(u)*o+i,y:Math.sin(u)*o+r},g={x:Math.cos(c)*s+i,y:Math.sin(c)*s+r},p={x:Math.cos(c)*o+i,y:Math.sin(c)*o+r};return!!a.line(f.x,f.y,d.x,d.y,l,t,e)||(!!a.line(g.x,g.y,p.x,p.y,l,t,e)||(!!a.arcline(i,r,s,u,c,h,l,t,e)||!!a.arcline(i,r,o,u,c,h,l,t,e)))},createPath:function(){var t=this.get("context"),e=this.__attrs,n=e.x,i=e.y,r=e.rs,a=e.re,s=e.startAngle,o=e.endAngle,u=e.clockwise,c={x:Math.cos(s)*r+n,y:Math.sin(s)*r+i},h={x:Math.cos(s)*a+n,y:Math.sin(s)*a+i},l={x:Math.cos(o)*r+n,y:Math.sin(o)*r+i};t.beginPath(),t.moveTo(c.x,c.y),t.lineTo(h.x,h.y),t.arc(n,i,a,s,o,u),t.lineTo(l.x,l.y),t.arc(n,i,r,o,s,!u),t.closePath()}}),t.exports=l},function(t,e,n){"use strict";var i=n(3),r=n(5),a=n(6),s=n(8),o=function(t){o.superclass.constructor.call(this,t)};o.ATTRS={x:0,y:0,img:void 0,width:0,height:0,sx:null,sy:null,swidth:null,sheight:null},i.extend(o,r),i.augment(o,{type:"image",getDefaultAttrs:function(){return o.ATTRS},__setAttrWidth:function(t,e){return t>=0?t:(s.warn("width \u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e0"),e)},__setAttrHeight:function(t,e){return t>=0?t:(s.warn("height \u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e0"),e)},__afterSetAttrX:function(){this.__calculateBox()},__afterSetAttrY:function(){this.__calculateBox()},__afterSetAttrWidth:function(){this.__calculateBox()},__afterSetAttrHeight:function(){this.__calculateBox()},__afterSetAttrAll:function(){this.__calculateBox()},__calculateBox:function(){var t=this.__attrs,e=t.x,n=t.y,i=t.width,r=t.height;this.set("box",{minX:e,minY:n,maxX:e+i,maxY:n+r})},isPointInPath:function(t,e){var n=this.__attrs;if(this.get("toDraw")||!n.img)return!1;var i=n.x,r=n.y,s=n.width,o=n.height;return a.rect(i,r,s,o,t,e)},__setLoading:function(t){var e=this.get("canvas");
return t===!1&&this.get("toDraw")===!0&&(this.__cfg.loading=!1,e.draw()),t},__setAttrImg:function(t){var e=this,n=e.__attrs;if(!i.isString(t))return t instanceof Image?(n.width||e.attr("width",t.width),n.height||e.attr("height",t.height),t):t instanceof HTMLElement&&i.isString(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase()?(n.width||e.attr("width",Number(t.getAttribute("width"))),n.height||e.attr("height",Number(t.getAttribute("height"))),t):t instanceof ImageData?(n.width||e.attr("width",t.width),n.height||e.attr("height",t.height),t):void 0;var r=new Image;r.onload=function(){if(e.get("destroyed"))return!1;e.attr("imgSrc",t),e.attr("img",r);var n=e.get("callback");n&&n.call(e),e.set("loading",!1)},r.src=t,e.set("loading",!0)},drawInner:function(){return this.get("loading")?void this.set("toDraw",!0):void this.__drawImage()},__drawImage:function(){var t=this.get("context"),e=this.__attrs,n=e.x,r=e.y,a=e.img,s=e.width,o=e.height,u=e.sx,c=e.sy,h=e.swidth,l=e.sheight;if(this.set("toDraw",!1),a instanceof Image||a instanceof HTMLElement&&i.isString(a.nodeName)&&"CANVAS"===a.nodeName.toUpperCase()){if(i.isNull(u)||i.isNull(c)||i.isNull(h)||i.isNull(l))return void t.drawImage(a,n,r,s,o);if(i.notNull(u)&&i.notNull(c)&&i.notNull(h)&&i.notNull(l))return void t.drawImage(a,u,c,h,l,n,r,s,o)}else if(a instanceof ImageData)return void t.putImageData(a,n,r,u||0,c||0,h||s,l||o)}}),t.exports=o},function(t,e,n){"use strict";var i=n(3),r=n(5),a=n(6),s=n(2),o=s.Vector2,u=n(11),c=n(20),h=function(t){h.superclass.constructor.call(this,t)};h.ATTRS={x1:0,y1:0,x2:0,y2:0,lineWidth:1,arrow:!1},i.extend(h,r),i.augment(h,{canStroke:!0,type:"line",__afterSetAttrX1:function(){this.__calculateBox()},__afterSetAttrY1:function(){this.__calculateBox()},__afterSetAttrX2:function(){this.__calculateBox()},__afterSetAttrY2:function(){this.__calculateBox()},__afterSetAttrLineWidth:function(){this.__calculateBox()},__afterSetAttrAll:function(){this.__calculateBox()},__calculateBox:function(){var t=this.__attrs,e=t.x1,n=t.y1,i=t.x2,r=t.y2,a=t.lineWidth;this.set("box",c.box(e,n,i,r,a))},isPointInPath:function(t,e){var n=this.__attrs,i=n.x1,r=n.y1,s=n.x2,o=n.y2,u=n.lineWidth;return!!this.hasStroke()&&a.line(i,r,s,o,u,t,e)},createPath:function(){var t=this.get("context"),e=this.__attrs,n=e.x1,i=e.y1,r=e.x2,a=e.y2,s=e.arrow,c=e.lineWidth;if(t.beginPath(),t.moveTo(n,i),s){var h=new o(r-n,a-i),l=u.getEndPoint(h,new o(r,a),c);t.lineTo(l.x,l.y),u.makeArrow(t,h,l,c)}else t.lineTo(r,a)},getPoint:function(t){var e=this.__attrs;return{x:c.at(e.x1,e.x2,t),y:c.at(e.y1,e.y2,t)}}}),t.exports=h},function(t,e){"use strict";function n(t,e,n,i,r){return e*Math.cos(t)*Math.cos(r)-n*Math.sin(t)*Math.sin(r)+i}function i(t,e,n,i,r){return e*Math.sin(t)*Math.cos(r)+n*Math.cos(t)*Math.sin(r)+i}function r(t,e,n){return Math.atan(-n/e*Math.tan(t))}function a(t,e,n){return Math.atan(n/(e*Math.tan(t)))}t.exports={xAt:n,yAt:i,xExtrema:r,yExtrema:a}},function(t,e,n){"use strict";var i=n(3),r=n(5),a=n(87),s=n(34),o=n(11),u=n(2),c=n(35),h=n(15),l=u.Vector2,f=function(t){f.superclass.constructor.call(this,t)};f.ATTRS={path:null,lineWidth:1},i.extend(f,r),i.augment(f,{curve:null,tCache:null,canFill:!0,canStroke:!0,type:"path",__afterSetAttrPath:function(t){var e=this;if(i.isNull(t))return e.set("segments",null),void e.set("box",void 0);var n,r=s.parsePath(t),o=[];!i.isArray(r)||0===r.length||"M"!==r[0][0]&&"m"!==r[0][0]||(i.each(r,function(t){n=new a(t,n),o.push(n)}),e.set("segments",o),e.set("tCache",null),e.__calculateBox())},__afterSetAttrLineWidth:function(){this.__calculateBox()},__afterSetAttrAll:function(t){t.path?this.__afterSetAttrPath(t.path):this.__calculateBox()},__calculateBox:function(){var t=this,e=t.__attrs,n=e.lineWidth,r=t.get("segments");if(r){var a=1/0,s=-(1/0),o=1/0,u=-(1/0);if(1===r.length)return void this.set("box",{minX:0,minY:0,maxX:0,maxY:0});i.each(r,function(t){t.getBBox(n);var e=t.box;e&&(e.minX<a&&(a=e.minX),e.maxX>s&&(s=e.maxX),e.minY<o&&(o=e.minY),e.maxY>u&&(u=e.maxY))}),this.set("box",{minX:a,minY:o,maxX:s,maxY:u})}},isPointInPath:function(t,e){var n=this,i=n.hasFill(),r=n.hasStroke();return i&&r?n.__isPointInFill(t,e)||n.__isPointInStroke(t,e):i?n.__isPointInFill(t,e):!!r&&n.__isPointInStroke(t,e)},__isPointInFill:function(t,e){var n=this,i=n.get("context");if(i)return n.createPath(),i.isPointInPath(t,e)},__isPointInStroke:function(t,e){for(var n=this,i=n.get("segments"),r=n.__attrs,a=r.lineWidth,s=0,o=i.length;s<o;s++)if(i[s].isInside(t,e,a))return!0;return!1},__setTcache:function(){var t,e,n,r,a=0,s=0,o=[],u=this.curve;u&&(i.each(u,function(t,e){n=u[e+1],r=t.length,n&&(a+=h.len(t[r-2],t[r-1],n[1],n[2],n[3],n[4],n[5],n[6]))}),i.each(u,function(i,c){n=u[c+1],r=i.length,n&&(t=[],t[0]=s/a,e=h.len(i[r-2],i[r-1],n[1],n[2],n[3],n[4],n[5],n[6]),s+=e,t[1]=s/a,o.push(t))}),this.tCache=o)},__calculateCurve:function(){var t=this,e=t.__attrs,n=e.path;this.curve=c.toCurve(n)},getPoint:function(t){var e,n,r,a,s,o,u=this.tCache;return null===u&&(this.__calculateCurve(),this.__setTcache(),u=this.tCache),e=this.curve,u?(i.each(u,function(e,i){t>=e[0]&&t<=e[1]&&(n=(t-e[0])/(e[1]-e[0]),r=i)}),a=e[r],i.isNull(a)||i.isNull(r)?null:(s=a.length,o=e[r+1],{x:h.at(a[s-2],o[1],o[3],o[5],1-n),y:h.at(a[s-1],o[2],o[4],o[6],1-n)})):e?{x:e[0][1],y:e[0][2]}:null},createPath:function(){var t=this,e=t.__attrs,n=t.get("context"),r=t.get("segments"),a=e.lineWidth,s=e.arrow;if(i.isArray(r)){n.beginPath();for(var u=0,c=r.length;u<c;u++)if(u===c-1&&s){var h=r[u],f=r[u].endTangent,d={x:h.params[h.params.length-1].x,y:h.params[h.params.length-1].y};if(h&&i.isFunction(f)){var g=f(),p=o.getEndPoint(g,new l(d.x,d.y),a);h.params[h.params.length-1]=p,r[u].draw(n),o.makeArrow(n,g,p,a),h.params[h.params.length-1]=d}}else r[u].draw(n)}}}),t.exports=f},function(t,e,n){"use strict";var i=n(3),r=n(5),a=n(6),s=function(t){s.superclass.constructor.call(this,t)};s.ATTRS={points:null,lineWidth:1},i.extend(s,r),i.augment(s,{canFill:!0,canStroke:!0,type:"polygon",__afterSetAttrPoints:function(){this.__calculateBox()},__afterSetAttrLineWidth:function(){this.__calculateBox()},__afterSetAttrAll:function(){this.__calculateBox()},__calculateBox:function(){var t=this,e=t.__attrs,n=e.points,r=e.lineWidth;if(n&&0!==n.length){var a=1/0,s=1/0,o=-(1/0),u=-(1/0);i.each(n,function(t){var e=t[0],n=t[1];e<a&&(a=e),e>o&&(o=e),n<s&&(s=n),n>u&&(u=n)});var c=r/2;t.set("box",{minX:a-c,minY:s-c,maxX:o+c,maxY:u+c})}},isPointInPath:function(t,e){var n=this,i=n.hasFill(),r=n.hasStroke();return i&&r?n.__isPointInFill(t,e)||n.__isPointInStroke(t,e):i?n.__isPointInFill(t,e):!!r&&n.__isPointInStroke(t,e)},__isPointInFill:function(t,e){var n=this,i=n.get("context");return n.createPath(),i.isPointInPath(t,e)},__isPointInStroke:function(t,e){var n=this,i=n.__attrs,r=i.points;if(r.length<2)return!1;var s=i.lineWidth,o=r.slice(0);return r.length>=3&&o.push(r[0]),a.polyline(o,s,t,e)},createPath:function(){var t=this,e=t.get("context"),n=t.__attrs,r=n.points;r.length<2||(e.beginPath(),i.each(r,function(t,n){0===n?e.moveTo(t[0],t[1]):e.lineTo(t[0],t[1])}),e.closePath())}}),t.exports=s},function(t,e,n){"use strict";var i=n(3),r=n(5),a=n(6),s=n(2),o=s.Vector2,u=n(11),c=n(20),h=function(t){h.superclass.constructor.call(this,t)};h.ATTRS={points:null,lineWidth:1,arrow:!1,tCache:null},i.extend(h,r),i.augment(h,{canStroke:!0,type:"polyline",tCache:null,__afterSetAttrPoints:function(){this.__calculateBox(),this.__setTcache()},__afterSetAttrLineWidth:function(){this.__calculateBox()},__afterSetAttrAll:function(){this.__calculateBox(),this.__setTcache()},__calculateBox:function(){var t=this,e=t.__attrs,n=e.lineWidth,r=e.points;if(r&&0!==r.length){var a=1/0,s=1/0,o=-(1/0),u=-(1/0);i.each(r,function(t){var e=t[0],n=t[1];e<a&&(a=e),e>o&&(o=e),n<s&&(s=n),n>u&&(u=n)});var c=n/2;this.set("box",{minX:a-c,minY:s-c,maxX:o+c,maxY:u+c})}},__setTcache:function(){var t,e,n=this,r=n.__attrs,a=r.points,s=0,o=0,u=[];a&&0!==a.length&&(i.each(a,function(t,e){a[e+1]&&(s+=c.len(t[0],t[1],a[e+1][0],a[e+1][1]))}),s<=0||(i.each(a,function(n,i){a[i+1]&&(t=[],t[0]=o/s,e=c.len(n[0],n[1],a[i+1][0],a[i+1][1]),o+=e,t[1]=o/s,u.push(t))}),this.tCache=u))},isPointInPath:function(t,e){var n=this,i=n.__attrs;if(n.hasStroke()){var r=i.points;if(r.length<2)return!1;var s=i.lineWidth;return a.polyline(r,s,t,e)}return!1},createPath:function(){var t,e,n=this,i=n.get("context"),r=n.__attrs,a=r.points,s=r.arrow,c=r.lineWidth;if(!(a.length<2)){for(i.beginPath(),i.moveTo(a[0][0],a[0][1]),e=1,t=a.length-1;e<t;e++)i.lineTo(a[e][0],a[e][1]);if(s){var h=new o(a[t][0]-a[t-1][0],a[t][1]-a[t-1][1]),l=u.getEndPoint(h,new o(a[t][0],a[t][1]),c);i.lineTo(l.x,l.y),u.makeArrow(i,h,l,c)}else i.lineTo(a[t][0],a[t][1])}},getPoint:function(t){var e,n,r=this.__attrs,a=r.points,s=this.tCache;return s?(i.each(s,function(i,r){t>=i[0]&&t<=i[1]&&(e=(t-i[0])/(i[1]-i[0]),n=r)}),{x:c.at(a[n][0],a[n+1][0],e),y:c.at(a[n][1],a[n+1][1],e)}):a?{x:a[0][0],y:a[0][1]}:{}}}),t.exports=h},function(t,e,n){"use strict";var i=n(3),r=n(5),a=n(6),s=n(11),o=n(21),u=n(2),c=u.Vector2,h=function(t){h.superclass.constructor.call(this,t)};h.ATTRS={p1:null,p2:null,p3:null,lineWidth:1,arrow:!1},i.extend(h,r),i.augment(h,{canStroke:!0,type:"quadratic",__afterSetAttrP1:function(){this.__calculateBox()},__afterSetAttrP2:function(){this.__calculateBox()},__afterSetAttrP3:function(){this.__calculateBox()},__afterSetAttrLineWidth:function(){this.__calculateBox()},__afterSetAttrAll:function(){this.__calculateBox()},__calculateBox:function(){var t,e,n=this,r=n.__attrs,a=r.p1,s=r.p2,u=r.p3;if(!(i.isNull(a)||i.isNull(s)||i.isNull(u))){var c=r.lineWidth/2,h=o.extrema(a[0],s[0],u[0]);for(t=0,e=h.length;t<e;t++)h[t]=o.at(a[0],s[0],u[0],h[t]);h.push(a[0],u[0]);var l=o.extrema(a[1],s[1],u[1]);for(t=0,e=l.length;t<e;t++)l[t]=o.at(a[1],s[1],u[1],l[t]);l.push(a[1],u[1]),n.set("box",{minX:Math.min.apply(Math,h)-c,maxX:Math.max.apply(Math,h)+c,minY:Math.min.apply(Math,l)-c,maxY:Math.max.apply(Math,l)+c})}},isPointInPath:function(t,e){var n=this,i=n.__attrs,r=i.p1,s=i.p2,o=i.p3,u=i.lineWidth;return a.quadraticline(r[0],r[1],s[0],s[1],o[0],o[1],u,t,e)},createPath:function(){var t=this,e=t.get("context"),n=t.__attrs,r=n.p1,a=n.p2,o=n.p3,u=n.lineWidth,h=n.arrow;if(!(i.isNull(r)||i.isNull(a)||i.isNull(o)))if(e.beginPath(),e.moveTo(r[0],r[1]),h){var l=new c(o[0]-a[0],o[1]-a[1]),f=s.getEndPoint(l,new c(o[0],o[1]),u);e.quadraticCurveTo(a[0],a[1],f.x,f.y),s.makeArrow(e,l,f,u)}else e.quadraticCurveTo(a[0],a[1],o[0],o[1])},getPoint:function(t){var e=this.__attrs;return{x:o.at(e.p1[0],e.p2[0],e.p3[0],t),y:o.at(e.p1[1],e.p2[1],e.p3[1],t)}}}),t.exports=h},function(t,e,n){"use strict";var i=n(3),r=n(5),a=n(6),s=n(8),o=function(t){o.superclass.constructor.call(this,t)};o.ATTRS={x:0,y:0,width:0,height:0,radius:0,lineWidth:1},i.extend(o,r),i.augment(o,{canFill:!0,canStroke:!0,type:"rect",__setAttrWidth:function(t,e){return t>=0?t:(s.warn("width \u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e0"),e)},__setAttrHeight:function(t,e){return t>=0?t:(s.warn("height \u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e0"),e)},__setAttrRadius:function(t,e){return t>=0?t:(s.warn("radius \u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e0"),e)},__afterSetAttrX:function(){this.__calculateBox()},__afterSetAttrY:function(){this.__calculateBox()},__afterSetAttrWidth:function(){this.__calculateBox()},__afterSetAttrHeight:function(){this.__calculateBox()},__afterSetAttrLineWidth:function(){this.__calculateBox()},__afterSetAttrAll:function(){this.__calculateBox()},__calculateBox:function(){var t=this,e=t.__attrs,n=e.x,i=e.y,r=e.width,a=e.height,s=e.lineWidth,o=s/2;this.set("box",{minX:n-o,minY:i-o,maxX:n+r+o,maxY:i+a+o})},isPointInPath:function(t,e){var n=this,i=n.hasFill(),r=n.hasStroke();return i&&r?n.__isPointInFill(t,e)||n.__isPointInStroke(t,e):i?n.__isPointInFill(t,e):!!r&&n.__isPointInStroke(t,e)},__isPointInFill:function(t,e){var n=this.get("context");return!!n&&(this.createPath(),n.isPointInPath(t,e))},__isPointInStroke:function(t,e){var n=this,i=n.__attrs,r=i.x,s=i.y,o=i.width,u=i.height,c=i.radius,h=i.lineWidth;if(0===c){var l=h/2;return a.line(r-l,s,r+o+l,s,h,t,e)||a.line(r+o,s-l,r+o,s+u+l,h,t,e)||a.line(r+o+l,s+u,r-l,s+u,h,t,e)||a.line(r,s+u+l,r,s-l,h,t,e)}return a.line(r+c,s,r+o-c,s,h,t,e)||a.line(r+o,s+c,r+o,s+u-c,h,t,e)||a.line(r+o-c,s+u,r+c,s+u,h,t,e)||a.line(r,s+u-c,r,s+c,h,t,e)||a.arcline(r+o-c,s+c,c,1.5*Math.PI,2*Math.PI,!1,h,t,e)||a.arcline(r+o-c,s+u-c,c,0,.5*Math.PI,!1,h,t,e)||a.arcline(r+c,s+u-c,c,.5*Math.PI,Math.PI,!1,h,t,e)||a.arcline(r+c,s+c,c,Math.PI,1.5*Math.PI,!1,h,t,e)},createPath:function(){var t=this,e=t.get("context"),n=t.__attrs,i=n.x,r=n.y,a=n.width,s=n.height,o=n.radius;e.beginPath(),0===o?(e.moveTo(i,r),e.lineTo(i+a,r),e.lineTo(i+a,r+s),e.lineTo(i,r+s),e.lineTo(i,r)):(e.moveTo(i+o,r),e.lineTo(i+a-o,r),e.arc(i+a-o,r+o,o,-Math.PI/2,0,!1),e.lineTo(i+a,r+s-o),e.arc(i+a-o,r+s-o,o,0,Math.PI/2,!1),e.lineTo(i+o,r+s),e.arc(i+o,r+s-o,o,Math.PI/2,Math.PI,!1),e.lineTo(i,r+o),e.arc(i+o,r+o,o,Math.PI,3*Math.PI/2,!1)),e.closePath()}}),t.exports=o},function(t,e,n){"use strict";var i=n(3),r=n(5),a=n(6),s=n(8),o=function(t){o.superclass.constructor.call(this,t)};o.ATTRS={x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom",lineWidth:1,lineCount:1,lineHeight:null,textArr:null};var u={start:1,right:1,left:1,end:1,center:1},c={top:1,middle:1,bottom:1},h={normal:1,italic:1,oblique:1},l={normal:1,"small-caps":1},f={normal:1,bold:1,bolder:1,lighter:1,100:1,200:1,300:1,400:1,500:1,600:1,700:1,800:1,900:1};i.extend(o,r),i.augment(o,{canFill:!0,canStroke:!0,type:"text",__setAttrTextAlign:function(t,e){return t in u?t:e},__setAttrTextBaseline:function(t,e){return t in c?t:e},__setAttrFontSize:function(t,e){return t>=12?t:e},__setAttrFontStyle:function(t,e){return t in h?t:e},__setAttrFontVariant:function(t,e){return t in l?t:e},__setAttrFontWeight:function(t,e){return t in f?t:e},__assembleFont:function(){var t=this,e=t.attr("fontSize"),n=t.attr("fontFamily"),i=t.attr("fontWeight"),r=t.attr("fontStyle"),a=t.attr("fontVariant");t.attr("font",[r,a,i,e+"px",n].join(" "))},__afterSetAttrFontSize:function(){this.attr({height:this.__getTextHeight()}),this.__assembleFont()},__afterSetAttrFontFamily:function(){this.__assembleFont()},__afterSetAttrFontWeight:function(){this.__assembleFont()},__afterSetAttrFontStyle:function(){this.__assembleFont()},__afterSetAttrFontVariant:function(){this.__assembleFont()},__afterSetAttrFont:function(){this.attr("width",this.measureText())},__afterSetAttrText:function(){var t,e=this.__attrs.text;if(i.isString(e)&&e.indexOf("\n")!==-1){t=e.split("\n");var n=t.length;this.attr("lineCount",n),this.attr("textArr",t)}this.attr("height",this.__getTextHeight()),this.attr("width",this.measureText())},__afterSetAttrTextAlign:function(){this.__calculateBox()},__afterSetAttrTextBaseline:function(){this.__calculateBox()},__afterSetAttrX:function(){this.__calculateBox()},__afterSetAttrY:function(){this.__calculateBox()},__afterSetAttrWidth:function(){this.__calculateBox()},__afterSetAttrLineWidth:function(){this.__calculateBox()},__getTextHeight:function(){var t=this.__attrs,e=t.lineCount,n=t.fontSize,i=this.__getSpaceingY();return e>1?n*e+i*(e-1):n},__afterSetAttrAll:function(t){var e=this;"fontSize"in t&&e.attr("height",t.fontSize),("fontSize"in t||"fontWeight"in t||"fontStyle"in t||"fontVariant"in t||"fontFamily"in t)&&e.__assembleFont(),"text"in t&&e.__afterSetAttrText(t.text),e.__calculateBox()},__calculateBox:function(){var t=this,e=t.__attrs,n=e.x,i=e.y,r=e.width;if(!r)return void this.set("box",{minX:n,minY:i,maxX:n,maxY:i});var a=e.height,s=e.textAlign,o=e.textBaseline,u=e.lineWidth,c={x:n,y:i-a};s&&("end"===s||"right"===s?c.x-=r:"center"===s&&(c.x-=r/2)),o&&("top"===o?c.y+=a:"middle"===o&&(c.y+=a/2)),this.set("startPoint",c);var h=u/2;this.set("box",{minX:c.x-h,minY:c.y-h,maxX:c.x+r+h,maxY:c.y+a+h})},__getSpaceingY:function(){var t=this.__attrs,e=t.lineHeight,n=t.fontSize;return e?e-n:.14*n},isPointInPath:function(t,e){var n=this,i=n.getBBox();if(n.hasFill()||n.hasStroke())return a.box(i.minX,i.maxX,i.minY,i.maxY,t,e)},drawInner:function(){var t=this,e=t.get("context"),n=t.__attrs,r=n.text;if(r){var a,s=n.textArr,o=n.fontSize,u=t.__getSpaceingY(),c=n.x,h=n.y,l=n.textBaseline,f=t.get("box"),d=f.maxY-f.minY;e.beginPath(),t.hasFill()&&(s?i.each(s,function(t,n){a=h+n*(u+o)-d+o,"middle"===l&&(a+=d-o-(d-o)/2),"top"===l&&(a+=d-o),e.fillText(t,c,a)}):e.fillText(r,c,h)),t.hasStroke()&&(s?i.each(s,function(t,n){a=h+n*(u+o)-d+o,"middle"===l&&(a+=d-o-(d-o)/2),"top"===l&&(a+=d-o),e.strokeText(t,c,a)}):e.strokeText(r,c,h))}},measureText:function(){var t,e=this,n=e.__attrs,r=n.text,a=n.font,o=n.textArr,u=0;if(!i.isNull(r)){var c=s.backupContext;return c.save(),c.font=a,o?i.each(o,function(e){t=c.measureText(e).width,u<t&&(u=t),c.restore()}):(u=c.measureText(r).width,c.restore()),u}}}),t.exports=o},function(t,e,n){"use strict";function i(t,e){this.preSegment=e,this.init(t,e)}function r(t,e,n){return{x:n.x+t,y:n.y+e}}function a(t,e){return{x:e.x+(e.x-t.x),y:e.y+(e.y-t.y)}}function s(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function o(t,e){return(t[0]*e[0]+t[1]*e[1])/(s(t)*s(e))}function u(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(o(t,e))}function c(t,e,n,i,r,a,s){var c=l.mod(l.degreeToRad(s),2*Math.PI),h=t.x,f=t.y,d=e.x,g=e.y,p=Math.cos(c)*(h-d)/2+Math.sin(c)*(f-g)/2,v=-1*Math.sin(c)*(h-d)/2+Math.cos(c)*(f-g)/2,x=p*p/(r*r)+v*v/(a*a);x>1&&(r*=Math.sqrt(x),a*=Math.sqrt(x));var y=Math.sqrt((r*r*(a*a)-r*r*(v*v)-a*a*(p*p))/(r*r*(v*v)+a*a*(p*p)));n===i&&(y*=-1),isNaN(y)&&(y=0);var m=y*r*v/a,_=y*-a*p/r,b=(h+d)/2+Math.cos(c)*m-Math.sin(c)*_,S=(f+g)/2+Math.sin(c)*m+Math.cos(c)*_,M=u([1,0],[(p-m)/r,(v-_)/a]),w=[(p-m)/r,(v-_)/a],A=[(-1*p-m)/r,(-1*v-_)/a],P=u(w,A);return o(w,A)<=-1&&(P=Math.PI),o(w,A)>=1&&(P=0),0===i&&P>0&&(P-=2*Math.PI),1===i&&P<0&&(P+=2*Math.PI),[t,b,S,r,a,M,P,c,i]}var h=n(3),l=n(4),f=n(2),d=n(6),g=n(15),p=n(21),v=n(80),x=f.Vector2,y=f.Vector3,m=f.Matrix3;h.augment(i,{init:function(t,e){var n=t[0];e=e||{endPoint:{x:0,y:0}};var i,s,o,u,h=/[a-z]/.test(n),l=n.toUpperCase(),f=t;switch(l){default:break;case"M":u=h?r(f[1],f[2],e.endPoint):{x:f[1],y:f[2]},this.command="M",this.params=[e.endPoint,u],this.subStart=u,this.endPoint=u;break;case"L":u=h?r(f[1],f[2],e.endPoint):{x:f[1],y:f[2]},this.command="L",this.params=[e.endPoint,u],this.subStart=e.subStart,this.endPoint=u,this.endTangent=function(){return new x(u.x-e.endPoint.x,u.y-e.endPoint.y)};break;case"H":u=h?r(f[1],0,e.endPoint):{x:f[1],y:e.endPoint.y},this.command="L",this.params=[e.endPoint,u],this.subStart=e.subStart,this.endPoint=u,this.endTangent=function(){return new x(u.x-e.endPoint.x,u.y-e.endPoint.y)};break;case"V":u=h?r(0,f[1],e.endPoint):{x:e.endPoint.x,y:f[1]},this.command="L",this.params=[e.endPoint,u],this.subStart=e.subStart,this.endPoint=u,this.endTangent=function(){return new x(u.x-e.endPoint.x,u.y-e.endPoint.y)};break;case"Q":h?(i=r(f[1],f[2],e.endPoint),s=r(f[3],f[4],e.endPoint)):(i={x:f[1],y:f[2]},s={x:f[3],y:f[4]}),this.command="Q",this.params=[e.endPoint,i,s],this.subStart=e.subStart,this.endPoint=s,this.endTangent=function(){return new x(s.x-i.x,s.y-i.y)};break;case"T":s=h?r(f[1],f[2],e.endPoint):{x:f[1],y:f[2]},"Q"===e.command?(i=a(e.params[1],e.endPoint),this.command="Q",this.params=[e.endPoint,i,s],this.subStart=e.subStart,this.endPoint=s,this.endTangent=function(){return new x(s.x-i.x,s.y-i.y)}):(this.command="TL",this.params=[e.endPoint,s],this.subStart=e.subStart,this.endPoint=s,this.endTangent=function(){return new x(s.x-e.endPoint.x,s.y-e.endPoint.y)});break;case"C":h?(i=r(f[1],f[2],e.endPoint),s=r(f[3],f[4],e.endPoint),o=r(f[5],f[6],e.endPoint)):(i={x:f[1],y:f[2]},s={x:f[3],y:f[4]},o={x:f[5],y:f[6]}),this.command="C",this.params=[e.endPoint,i,s,o],this.subStart=e.subStart,this.endPoint=o,this.endTangent=function(){return new x(o.x-s.x,o.y-s.y)};break;case"S":h?(s=r(f[1],f[2],e.endPoint),o=r(f[3],f[4],e.endPoint)):(s={x:f[1],y:f[2]},o={x:f[3],y:f[4]}),"C"===e.command?(i=a(e.params[2],e.endPoint),this.command="C",this.params=[e.endPoint,i,s,o],this.subStart=e.subStart,this.endPoint=o,this.endTangent=function(){return new x(o.x-s.x,o.y-s.y)}):(this.command="SQ",this.params=[e.endPoint,s,o],this.subStart=e.subStart,this.endPoint=o,this.endTangent=function(){return new x(o.x-s.x,o.y-s.y)});break;case"A":var d=f[1],g=f[2],p=f[3],v=f[4],y=f[5];u=h?r(f[6],f[7],e.endPoint):{x:f[6],y:f[7]},this.command="A",this.params=c(e.endPoint,u,v,y,d,g,p),this.subStart=e.subStart,this.endPoint=u;break;case"Z":this.command="Z",this.params=[e.endPoint,e.subStart],this.subStart=e.subStart,this.endPoint=e.subStart}},isInside:function(t,e,n){var i=this,r=i.command,a=i.params,s=i.box;if(s&&!d.box(s.minX,s.maxX,s.minY,s.maxY,t,e))return!1;switch(r){default:break;case"M":return!1;case"TL":case"L":case"Z":return d.line(a[0].x,a[0].y,a[1].x,a[1].y,n,t,e);case"SQ":case"Q":return d.quadraticline(a[0].x,a[0].y,a[1].x,a[1].y,a[2].x,a[2].y,n,t,e);case"C":return d.cubicline(a[0].x,a[0].y,a[1].x,a[1].y,a[2].x,a[2].y,a[3].x,a[3].y,n,t,e);case"A":var o=a,u=o[1],c=o[2],h=o[3],l=o[4],f=o[5],g=o[6],p=o[7],v=o[8],x=h>l?h:l,_=h>l?1:h/l,b=h>l?l/h:1;o=new y(t,e,1);var S=new m;return S.translate(-u,-c),S.rotate(-p),S.scale(1/_,1/b),o.applyMatrix(S),d.arcline(0,0,x,f,f+g,1-v,n,o.x,o.y)}return!1},draw:function(t){var e,n,i,r=this.command,a=this.params;switch(r){default:break;case"M":t.moveTo(a[1].x,a[1].y);break;case"TL":case"L":t.lineTo(a[1].x,a[1].y);break;case"SQ":case"Q":e=a[1],n=a[2],t.quadraticCurveTo(e.x,e.y,n.x,n.y);break;case"C":e=a[1],n=a[2],i=a[3],t.bezierCurveTo(e.x,e.y,n.x,n.y,i.x,i.y);break;case"A":var s=a,o=s[1],u=s[2],c=s[3],h=s[4],l=s[5],f=s[6],d=s[7],g=s[8],p=c>h?c:h,v=c>h?1:c/h,x=c>h?h/c:1;t.translate(o,u),t.rotate(d),t.scale(v,x),t.arc(0,0,p,l,l+f,1-g),t.scale(1/v,1/x),t.rotate(-d),t.translate(-o,-u);break;case"Z":t.closePath()}},getBBox:function(t){var e,n,i,r,a=t/2,s=this.params;switch(this.command){default:case"M":case"Z":break;case"TL":case"L":this.box={minX:Math.min(s[0].x,s[1].x)-a,maxX:Math.max(s[0].x,s[1].x)+a,minY:Math.min(s[0].y,s[1].y)-a,maxY:Math.max(s[0].y,s[1].y)+a};break;case"SQ":case"Q":for(n=p.extrema(s[0].x,s[1].x,s[2].x),i=0,r=n.length;i<r;i++)n[i]=p.at(s[0].x,s[1].x,s[2].x,n[i]);for(n.push(s[0].x,s[2].x),e=p.extrema(s[0].y,s[1].y,s[2].y),i=0,r=e.length;i<r;i++)e[i]=p.at(s[0].y,s[1].y,s[2].y,e);e.push(s[0].y,s[2].y),this.box={minX:Math.min.apply(Math,n)-a,maxX:Math.max.apply(Math,n)+a,minY:Math.min.apply(Math,e)-a,maxY:Math.max.apply(Math,e)+a};break;case"C":for(n=g.extrema(s[0].x,s[1].x,s[2].x,s[3].x),i=0,r=n.length;i<r;i++)n[i]=g.at(s[0].x,s[1].x,s[2].x,s[3].x,n[i]);for(e=g.extrema(s[0].y,s[1].y,s[2].y,s[3].y),i=0,r=e.length;i<r;i++)e[i]=g.at(s[0].y,s[1].y,s[2].y,s[3].y,e[i]);n.push(s[0].x,s[3].x),e.push(s[0].y,s[3].y),this.box={minX:Math.min.apply(Math,n)-a,maxX:Math.max.apply(Math,n)+a,minY:Math.min.apply(Math,e)-a,maxY:Math.max.apply(Math,e)+a};break;case"A":var o=s,u=o[1],c=o[2],h=o[3],l=o[4],f=o[5],d=o[6],x=o[7],y=o[8],m=f,_=f+d,b=v.xExtrema(x,h,l),S=1/0,M=-(1/0),w=[m,_];for(i=2*-Math.PI;i<=2*Math.PI;i+=Math.PI){var A=b+i;1===y?m<A&&A<_&&w.push(A):_<A&&A<m&&w.push(A)}for(i=0,r=w.length;i<r;i++){var P=v.xAt(x,h,l,u,w[i]);P<S&&(S=P),P>M&&(M=P)}var C=v.yExtrema(x,h,l),I=1/0,E=-(1/0),T=[m,_];for(i=2*-Math.PI;i<=2*Math.PI;i+=Math.PI){var k=C+i;1===y?m<k&&k<_&&T.push(k):_<k&&k<m&&T.push(k)}for(i=0,r=T.length;i<r;i++){var B=v.yAt(x,h,l,c,T[i]);B<I&&(I=B),B>E&&(E=B)}this.box={minX:S-a,maxX:M+a,minY:I-a,maxY:E+a}}}}),t.exports=i},function(t,e,n){"use strict";function i(t){if(!t._attrs&&t!==r){var e=t.superclass.constructor;e&&!e._attrs&&i(e),t._attrs={},a.mix(!0,t._attrs,e._attrs),a.mix(!0,t._attrs,t.ATTRS)}}var r,a=n(1);r=function(t){i(this.constructor),this._attrs={},this.events={};var e=this.getDefaultCfg();a.mix(this._attrs,e,t)},a.augment(r,{getDefaultCfg:function(){var t=this,e=t.constructor,n=e._attrs,i=a.mix(!0,{},n);return i},set:function(t,e){var n="_onRender"+a.ucfirst(t);return this[n]&&this[n](e,this._attrs[t]),this._attrs[t]=e,this},get:function(t){return this._attrs[t]},on:function(t,e){var n=this,i=n.events,r=i[t];return r||(r=i[t]=[]),r.push(e),n},fire:function(t,e){var n=this,i=n.events,r=i[t];r&&a.each(r,function(t){t(e)})},off:function(t,e){var n=this,i=n.events,r=i[t];return t?(r&&a.remove(r,e),n):(n.events={},n)},destroy:function(){var t=this,e=t.destroyed;return e?t:(t._attrs={},t.events={},void(t.destroyed=!0))}}),t.exports=r},function(t,e,n){"use strict";var i=n(13),r=n(10),a=r.Shape.superclass.constructor,s=r.Canvas,o=n(37);i.mixin(a,[o.GMixin]),i.mixin(r.Group,[o.GroupMixin]);var u=function(t){u.superclass.constructor.call(this,t)};u.CFG={width:null,height:null,widthCanvas:null,heightCanvas:null,widthStyle:null,heightStyle:null,containerDOM:null,canvasDOM:null,pixelRatio:null},i.extend(u,s),i.augment(u,{init:function(){u.superclass.constructor.superclass.init.call(this),this._setGlobalParam(),this._setDOM(),this._setInitSize(),this._setCanvas(),this._scale()},_scale:function(){var t=this.get("pixelRatio");this.scale(t,t)},_setCanvas:function(){var t=this.get("canvasDOM");this.set("el",t),this.set("context",t.getContext("2d")),this.set("canvas",this),this.__events()},_setGlobalParam:function(){var t=this.get("pixelRatio");t||this.set("pixelRatio",i.getRatio())},_setDOM:function(){this._setContainer(),this._setLayer()},_setContainer:function(){var t=this.get("containerId"),e=this.get("containerDOM");e||(e=document.getElementById(t),this.set("containerDOM",e)),i.modiCSS(e,{position:"relative"})},_setLayer:function(){var t=this.get("containerDOM"),e=i.guid("canvas_");if(t){var n=i.createDom('<canvas id="'+e+'"></canvas>');t.appendChild(n),this.set("canvasDOM",n)}},_setInitSize:function(){this.get("widthStyle")?this.changeSizeByCss(this.get("widthStyle"),this.get("heightStyle")):this.get("width")&&this.changeSize(this.get("width"),this.get("height"))},_getPx:function(t,e){var n=this.get("canvasDOM");n.style[t]=e;var r=i.getBoundingClientRect(n);return"width"===t?r.right-r.left:"height"===t?r.bottom-r.top:void 0},_reSize:function(){var t=this.get("canvasDOM"),e=this.get("widthCanvas"),n=this.get("heightCanvas"),i=this.get("widthStyle"),r=this.get("heightStyle");t.style.width=i,t.style.height=r,t.setAttribute("width",e),t.setAttribute("height",n)},getWidth:function(){var t=this.get("pixelRatio"),e=this.get("width");return e*t},getHeight:function(){var t=this.get("pixelRatio"),e=this.get("height");return e*t},changeSizeByCss:function(t,e){var n=this.get("pixelRatio"),t=this._getPx("width",t),e=this._getPx("height",e),i=t*n,r=e*n;this.set("widthStyle",t),this.set("heightStyle",e),this.set("widthCanvas",i),this.set("heightCanvas",r),this.set("width",t),this.set("height",e),this._reSize()},changeSize:function(t,e){var n=this.get("pixelRatio"),i=t*n,r=e*n;this.set("widthCanvas",i),this.set("heightCanvas",r),this.set("widthStyle",t+"px"),this.set("heightStyle",e+"px"),this.set("width",t),this.set("height",e),this._reSize()},destroy:function(){var t=this.get("containerDOM"),e=this.get("canvasDOM");e&&t&&t.removeChild(e),u.superclass.destroy.call(this)}}),t.exports=u},function(t,e,n){var i=n(13),r=(n(10),function(){});i.augment(r,{getParent:function(){return this.get("parent")||this.get("father")},getDefaultCfg:function(){i.initClassCfgs(this.constructor);var t=i.mix(!0,{},this.constructor.__cfg);return t},getBBBox:function(){var t=this.getBBox();return t?(t.x=t.minX,t.y=t.minY,t.width=t.maxX-t.minX,t.height=t.maxY-t.minY,t.centerX=t.x+t.width/2,t.centerY=t.y+t.height/2):t={x:0,y:0,centerX:0,centerY:0,width:0,height:0},t},move:function(t,e){var n=this,i=n.get("x")||0,r=n.get("y")||0;n.translate(t-i,e-r),n.set("x",t),n.set("y",e)}}),t.exports=r},function(t,e,n){var i=n(13),r=n(10),a=n(36),s=function(){};i.augment(s,{addShape:function(t,e){var n,a=this.get("canvas");return e=i.mix({},e),e?(e.type=t,e.canvas=a,e.father=this,t=i.upperFirst(t),n=new r[t](e)):n=new r[t],this.add(n),n},addGroup:function(t,e){var n,r=this.get("canvas");if(e=i.mix({},e),i.isFunction(t))e?(e.canvas=r,e.father=this,n=new t(e)):n=new t({canvas:r,father:this}),this.add(n);else if(i.isObject(t))t.canvas=r,n=new a(t),this.add(n);else{if(void 0!==t)return!1;n=new a,this.add(n)}return n},findByCFG:function(t,e){var n=this.get("children"),r=[];return i.each(n,function(n,i){n.get(t)===e&&r.push(n)}),r}}),t.exports=s},function(t,e,n){var i=n(93);t.exports=i},function(t,e){"use strict";function n(t,e,i){i=i||0;for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];null!==o&&s.isObject(o)?(s.isObject(t[r])||(t[r]={}),i<a?n(t[r],e[r],i+1):t[r]=e[r]):s.isArray(o)?(t[r]=[],t[r]=t[r].concat(o)):void 0!==o&&(t[r]=e[r])}}var i=Object.prototype,r=i.toString,a=5,s={substitute:function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]}):t},ucfirst:function(t){return t+="",t.charAt(0).toUpperCase()+t.substring(1)},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},isBoolean:function(t){return"boolean"==typeof t},isFunction:function(t){return"function"==typeof t},isArray:"isArray"in Array?Array.isArray:function(t){return"[object Array]"===r.call(t)},isDate:function(t){return"[object Date]"===r.call(t)},isNull:function(t){return void 0===t||null===t},notNull:function(t){return!s.isNull(t)},isBlank:function(t){if(s.isArray(t))return 0===t.length;if(s.isObject(t)){var e=0;return s.each(t,function(t,n){e++}),0===e}return!1},isObject:"[object Object]"===r.call(null)?function(t){return null!==t&&void 0!==t&&"[object Object]"===r.call(t)&&void 0===t.ownerDocument}:function(t){return"[object Object]"===r.call(t)},extend:function(t,e,n,i){s.isFunction(e)||(n=e,e=t,t=function(){});var r=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function n(){}n.prototype=t;var i=new n;return i.constructor=e,i},a=r(e.prototype,t);return t.prototype=s.mix(a,t.prototype),t.superclass=r(e.prototype,e),s.mix(a,n),s.mix(t,i),t},augment:function(t){for(var e=s.toArray(arguments),n=1;n<e.length;n++){var i=e[n];s.isFunction(i)&&(i=i.prototype),s.mix(t.prototype,i)}},toArray:function(t){return t&&t.length?Array.prototype.slice.call(t):[]},mix:function(){var t=s.toArray(arguments),e=t[0];if(e===!0){e=t[1];for(var i=2;i<t.length;i++){var r=t[i];n(e,r)}}else for(var i=1;i<t.length;i++){var r=t[i];for(var a in r)r.hasOwnProperty(a)&&"constructor"!==a&&(e[a]=r[a])}return e},each:function(t,e){if(t)if(s.isObject(t)){for(var n in t)if(t.hasOwnProperty(n)){var i=e(t[n],n);if(i===!1)break}}else if(t.length)for(var r=0;r<t.length;r++){var i=e(t[r],r);if(i===!1)break}},requestAnimationFrame:function(t){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return setTimeout(t,16)};return e(t)},cancelAnimationFrame:function(t){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||function(t){return clearTimeout(t)};return e(t)}};t.exports=s},function(t,e,n){var i=n(95);i.Util=n(38),t.exports=i},function(t,e,n){"use strict";function i(t,e,n,i){var r=t[i]+(e[i]-t[i])*n;return r}var r=n(38),a=n(1),s={calColor:function(t,e,n){var a,s=t.length-1,o=Math.floor(s*e),u=s*e-o,c=t[o],h=o===s?c:t[o+1];return"hsl"===n?a=r.hsl2Rgb([i(c,h,u,0),i(c,h,u,1),i(c,h,u,2)]):(a={r:i(c,h,u,0),g:i(c,h,u,1),b:i(c,h,u,2)},a="#"+r.toHex(a.r)+r.toHex(a.g)+r.toHex(a.b)),a},lightness:function(t,e){e=e||0;var n=[[e,1,.9],[e,1,.5]];return s.calColor(n,t,"hsl")},red:function(t){return s.lightness(t,0)},blue:function(t){return s.lightness(t,.66)},green:function(t){return s.lightness(t,.33)},gradient:function(t){var e=[];return a.isString(t)&&(t=t.split("-")),a.each(t,function(t){t.indexOf("#")===-1&&(t=r.toRGB(t)),e.push(r.rgb2arr(t))}),function(t){return s.calColor(e,t)}},gradientHsl:function(t){var e=[];return a.isString(t)&&(t=t.split("-")),a.each(t,function(t){t.indexOf("#")===-1&&(t=r.toRGB(t)),
e.push(r.rgb2hsl(t))}),function(t){return s.calColor(e,t,"hsl")}},saturation:function(t,e){e=e||0;var n=[[e,0,.5],[e,1,.5]];return s.calColor(n,t,"hsl")},hue:function(t){var e=[[0,1,.5],[1,1,.5]];return s.calColor(e,t,"hsl")},brightness:function(t){var e=[[255,255,255],[0,0,0]];return s.calColor(e,t)},heat:function(t){var e=[[255,255,255],[255,127.5,0],[0,0,0]];return s.calColor(e,t)},rainbow:function(t){var e=[[0,255,255],[0,0,255],[0,255,0],[255,0,0]];return s.calColor(e,t)},circular:function(t){var e=[[0,0,255],[0,255,0],[255,255,0],[255,0,0],[0,0,255]];return s.calColor(e,t)},bipolar:function(t){var e=[[0,255,0],[0,0,0],[255,0,0]];return s.calColor(e,t)}};t.exports=s},function(t,e){"use strict";function n(t,e){var n=t.length;if(0===n)return NaN;var i=t[0];if(e<t[0])return NaN;if(e>=t[n-1])return t[n-1];for(var r=1;r<t.length&&!(e<t[r]);r++)i=t[r];return i}function i(t,e){var n=t.length;if(0===n)return NaN;var i,r=t[0];if(e>t[n-1])return NaN;if(e<t[0])return t[0];for(var a=1;a<t.length;a++){if(e<=t[a]){i=t[a];break}r=t[a]}return i}var r={PRECISION:1e-5,equal:function(t,e){return Math.abs(t-e)<r.PRECISION},clamp:function(t,e,n){return t<e?e:t>n?n:t},snapTo:function(t,e){var r=n(t,e),a=i(t,e);if(isNaN(r)||isNaN(a)){if(t[0]>=e)return t[0];var s=t[t.length-1];if(s<=e)return s}return Math.abs(e-r)<Math.abs(a-e)?r:a},snapFloor:function(t,e){return n(t,e)},snapCeiling:function(t,e){return i(t,e)},degreeToRad:function(t){return Math.PI/180*t},radToDegree:function(t){return 180/Math.PI*t},mod:function(t,e){return(t%e+e)%e}};t.exports=r},function(t,e,n){"use strict";function i(t,e){var n=e.toString(),i=n.indexOf(".");if(i===-1)return Math.round(t);var r=n.substr(i+1).length;return parseFloat(t.toFixed(r))}function r(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}var a=n(92);a.mix(a,{mixin:function(t,e){if(t&&e){t._mixins=e,t.ATTRS=t.ATTRS||{};var n={};a.each(e,function(e){a.augment(t,e);var i=e.ATTRS;i&&a.mix(n,i)}),t.ATTRS=a.mix(n,t.ATTRS)}},map:function(t,e){var n=[];return a.each(t,function(t,i){n.push(e(t,i))}),n},filter:function(t,e){var n=[];return a.each(t,function(t,i){e(t,i)&&n.push(t)}),n},guid:function(){var t={};return function(e){return e=e||"g",t[e]?t[e]+=1:t[e]=1,e+t[e]}}(),inArray:function(t,e){return a.indexOf(t,e)!==-1},indexOf:function(t,e){var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var i=-1,r=0;r<t.length;r++)if(t[r]===e){i=r;break}return i},remove:function(t,e){var n=a.indexOf(t,e);n!==-1&&t.splice(n,1)},empty:function(t){if(!(t instanceof Array))for(var e=t.length-1;e>=0;e--)delete t[e];t.length=0},equalsArray:function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=!0,i=0;i<t.length;i++)if(t[i]!==e[i]){n=!1;break}return n},wrapBehavior:function(t,e){var n=function(n){t[e](n)};return t["_wrap_"+e]=n,n},getWrapBehavior:function(t,e){return t["_wrap_"+e]},fixedBase:function(t,e){return i(t,e)},length:function(t){if(a.isArray(t))return t.length;if(a.isObject(t)){var e=0;return a.each(t,function(){e++}),e}return 0},clone:function(t){if("object"!=typeof t||null===t)return t;var e;if(a.isArray(t)){e=[];for(var n=0,i=t.length;n<i;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=a.clone(t[n]):e[n]=t[n]}else{e={};for(var r in t)"object"==typeof t[r]&&null!=t[r]?e[r]=a.clone(t[r]):e[r]=t[r]}return e},simpleMix:function(t,e,n,i){return e&&r(t,e),n&&r(t,n),i&&r(t,i),t}}),t.exports=a},function(t,e,n){"use strict";var i=n(1),r=Math.PI,a="\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",s=new RegExp("([a-z])["+a+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+a+"]*,?["+a+"]*)+)","ig"),o=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+a+"]*,?["+a+"]*","ig"),u=function(t){if(!t)return null;if(typeof t==typeof[])return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(s,function(t,i,r){var a=[],s=i.toLowerCase();if(r.replace(o,function(t,e){e&&a.push(+e)}),"m"==s&&a.length>2&&(n.push([i].concat(a.splice(0,2))),s="l",i="m"==i?"l":"L"),"o"==s&&1==a.length&&n.push([i,a[0]]),"r"==s)n.push([i].concat(a));else for(;a.length>=e[s]&&(n.push([i].concat(a.splice(0,e[s]))),e[s]););}),n},c=function(t,e){for(var n=[],i=0,r=t.length;r-2*!e>i;i+=2){var a=[{x:+t[i-2],y:+t[i-1]},{x:+t[i],y:+t[i+1]},{x:+t[i+2],y:+t[i+3]},{x:+t[i+4],y:+t[i+5]}];e?i?r-4==i?a[3]={x:+t[0],y:+t[1]}:r-2==i&&(a[2]={x:+t[0],y:+t[1]},a[3]={x:+t[2],y:+t[3]}):a[0]={x:+t[r-2],y:+t[r-1]}:r-4==i?a[3]=a[2]:i||(a[0]={x:+t[i],y:+t[i+1]}),n.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return n},h=function(t,e,n,i,r){if(null==r&&null==i&&(i=n),t=+t,e=+e,n=+n,i=+i,null!=r)var a=Math.PI/180,s=t+n*Math.cos(-i*a),o=t+n*Math.cos(-r*a),u=e+n*Math.sin(-i*a),c=e+n*Math.sin(-r*a),h=[["M",s,u],["A",n,n,0,+(r-i>180),0,o,c]];else h=[["M",t,e],["m",0,-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]];return h},l=function(t){if(t=u(t),!t||!t.length)return[["M",0,0]];var e,n=[],i=0,r=0,a=0,s=0,o=0;"M"==t[0][0]&&(i=+t[0][1],r=+t[0][2],a=i,s=r,o++,n[0]=["M",i,r]);for(var l,f,d=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),g=o,p=t.length;g<p;g++){if(n.push(l=[]),f=t[g],e=f[0],e!=e.toUpperCase())switch(l[0]=e.toUpperCase(),l[0]){case"A":l[1]=f[1],l[2]=f[2],l[3]=f[3],l[4]=f[4],l[5]=f[5],l[6]=+f[6]+i,l[7]=+f[7]+r;break;case"V":l[1]=+f[1]+r;break;case"H":l[1]=+f[1]+i;break;case"R":for(var v=[i,r].concat(f.slice(1)),x=2,y=v.length;x<y;x++)v[x]=+v[x]+i,v[++x]=+v[x]+r;n.pop(),n=n.concat(c(v,d));break;case"O":n.pop(),v=h(i,r,f[1],f[2]),v.push(v[0]),n=n.concat(v);break;case"U":n.pop(),n=n.concat(h(i,r,f[1],f[2],f[3])),l=["U"].concat(n[n.length-1].slice(-2));break;case"M":a=+f[1]+i,s=+f[2]+r;default:for(x=1,y=f.length;x<y;x++)l[x]=+f[x]+(x%2?i:r)}else if("R"==e)v=[i,r].concat(f.slice(1)),n.pop(),n=n.concat(c(v,d)),l=["R"].concat(f.slice(-2));else if("O"==e)n.pop(),v=h(i,r,f[1],f[2]),v.push(v[0]),n=n.concat(v);else if("U"==e)n.pop(),n=n.concat(h(i,r,f[1],f[2],f[3])),l=["U"].concat(n[n.length-1].slice(-2));else for(var m=0,_=f.length;m<_;m++)l[m]=f[m];if(e=e.toUpperCase(),"O"!=e)switch(l[0]){case"Z":i=+a,r=+s;break;case"H":i=l[1];break;case"V":r=l[1];break;case"M":a=l[l.length-2],s=l[l.length-1];default:i=l[l.length-2],r=l[l.length-1]}}return n},f=function(t,e,n,i){return[t,e,n,i,n,i]},d=function(t,e,n,i,r,a){var s=1/3,o=2/3;return[s*t+o*n,s*e+o*i,s*r+o*n,s*a+o*i,r,a]},g=function(t,e,n,i,r,a,s,o,u,c){n===i&&(n+=1);var h,l=120*Math.PI/180,f=Math.PI/180*(+r||0),d=[],p=function(t,e,n){var i=t*Math.cos(n)-e*Math.sin(n),r=t*Math.sin(n)+e*Math.cos(n);return{x:i,y:r}};if(c)w=c[0],A=c[1],S=c[2],M=c[3];else{h=p(t,e,-f),t=h.x,e=h.y,h=p(o,u,-f),o=h.x,u=h.y,t===o&&e===u&&(o+=1,u+=1);var v=(Math.cos(Math.PI/180*r),Math.sin(Math.PI/180*r),(t-o)/2),x=(e-u)/2,y=v*v/(n*n)+x*x/(i*i);y>1&&(y=Math.sqrt(y),n=y*n,i=y*i);var m=n*n,_=i*i,b=(a==s?-1:1)*Math.sqrt(Math.abs((m*_-m*x*x-_*v*v)/(m*x*x+_*v*v))),S=b*n*x/i+(t+o)/2,M=b*-i*v/n+(e+u)/2,w=Math.asin(((e-M)/i).toFixed(9)),A=Math.asin(((u-M)/i).toFixed(9));w=t<S?Math.PI-w:w,A=o<S?Math.PI-A:A,w<0&&(w=2*Math.PI+w),A<0&&(A=2*Math.PI+A),s&&w>A&&(w-=2*Math.PI),!s&&A>w&&(A-=2*Math.PI)}var P=A-w;if(Math.abs(P)>l){var C=A,I=o,E=u;A=w+l*(s&&A>w?1:-1),o=S+n*Math.cos(A),u=M+i*Math.sin(A),d=g(o,u,n,i,r,0,s,I,E,[A,C,S,M])}P=A-w;var T=Math.cos(w),k=Math.sin(w),B=Math.cos(A),F=Math.sin(A),O=Math.tan(P/4),N=4/3*n*O,D=4/3*i*O,z=[t,e],R=[t+N*k,e-D*T],j=[o+N*F,u-D*B],X=[o,u];if(R[0]=2*z[0]-R[0],R[1]=2*z[1]-R[1],c)return[R,j,X].concat(d);d=[R,j,X].concat(d).join().split(",");for(var Y=[],G=0,q=d.length;G<q;G++)Y[G]=G%2?p(d[G-1],d[G],f).y:p(d[G],d[G+1],f).x;return Y},p=function(t,e){for(var n=l(t),i=e&&l(e),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=(function(t,e,n){var i,r;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(g.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"==n||"S"==n?(i=2*e.x-e.bx,r=2*e.y-e.by):(i=e.x,r=e.y),t=["C",i,r].concat(t.slice(1));break;case"T":"Q"==n||"T"==n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(d(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(d(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(f(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(f(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(f(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(f(e.x,e.y,e.X,e.Y))}return t}),o=function(t,e){if(t[e].length>7){t[e].shift();for(var r=t[e];r.length;)c[e]="A",i&&(h[e]="A"),t.splice(e++,0,["C"].concat(r.splice(0,6)));t.splice(e,1),y=Math.max(n.length,i&&i.length||0)}},u=function(t,e,r,a,s){t&&e&&"M"==t[s][0]&&"M"!=e[s][0]&&(e.splice(s,0,["M",a.x,a.y]),r.bx=0,r.by=0,r.x=t[s][1],r.y=t[s][2],y=Math.max(n.length,i&&i.length||0))},c=[],h=[],p="",v="",x=0,y=Math.max(n.length,i&&i.length||0);x<y;x++){n[x]&&(p=n[x][0]),"C"!=p&&(c[x]=p,x&&(v=c[x-1])),n[x]=s(n[x],r,v),"A"!=c[x]&&"C"==p&&(c[x]="C"),o(n,x),i&&(i[x]&&(p=i[x][0]),"C"!=p&&(h[x]=p,x&&(v=h[x-1])),i[x]=s(i[x],a,v),"A"!=h[x]&&"C"==p&&(h[x]="C"),o(i,x)),u(n,i,r,a,x),u(i,n,a,r,x);var m=n[x],_=i&&i[x],b=m.length,S=i&&_.length;r.x=m[b-2],r.y=m[b-1],r.bx=parseFloat(m[b-4])||r.x,r.by=parseFloat(m[b-3])||r.y,a.bx=i&&(parseFloat(_[S-4])||a.x),a.by=i&&(parseFloat(_[S-3])||a.y),a.x=i&&_[S-2],a.y=i&&_[S-1]}return i?[n,i]:n},v=function(t,e,n,i){return null==t&&(t=e=n=i=0),null==e&&(e=t.y,n=t.width,i=t.height,t=t.x),{x:t,y:e,w:n,h:i,cx:t+n/2,cy:e+i/2}},x=/,?([a-z]),?/gi,y=function(t){return t.join(",").replace(x,"$1")},m=function(t,e,n,i,r){var a=-3*e+9*n-9*i+3*r,s=t*a+6*e-12*n+6*i;return t*s-3*e+3*n},_=function(t,e,n,i,r,a,s,o,u){null==u&&(u=1),u=u>1?1:u<0?0:u;for(var c=u/2,h=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,g=0;g<h;g++){var p=c*l[g]+c,v=m(p,t,n,r,s),x=m(p,e,i,a,o),y=v*v+x*x;d+=f[g]*Math.sqrt(y)}return c*d},b=function(t,e,n,i,r,a,s,o){for(var u,c,h,l,f,d,g,p,v=[],x=[[],[]],y=0;y<2;++y)if(0==y?(c=6*t-12*n+6*r,u=-3*t+9*n-9*r+3*s,h=3*n-3*t):(c=6*e-12*i+6*a,u=-3*e+9*i-9*a+3*o,h=3*i-3*e),Math.abs(u)<1e-12){if(Math.abs(c)<1e-12)continue;l=-h/c,0<l&&l<1&&v.push(l)}else g=c*c-4*h*u,p=Math.sqrt(g),g<0||(f=(-c+p)/(2*u),0<f&&f<1&&v.push(f),d=(-c-p)/(2*u),0<d&&d<1&&v.push(d));for(var m,_=v.length,b=_;_--;)l=v[_],m=1-l,x[0][_]=m*m*m*t+3*m*m*l*n+3*m*l*l*r+l*l*l*s,x[1][_]=m*m*m*e+3*m*m*l*i+3*m*l*l*a+l*l*l*o;return x[0][b]=t,x[1][b]=e,x[0][b+1]=s,x[1][b+1]=o,x[0].length=x[1].length=b+2,{min:{x:Math.min.apply(0,x[0]),y:Math.min.apply(0,x[1])},max:{x:Math.max.apply(0,x[0]),y:Math.max.apply(0,x[1])}}},S=function(t,e,n,i,r,a,s,o){if(!(Math.max(t,n)<Math.min(r,s)||Math.min(t,n)>Math.max(r,s)||Math.max(e,i)<Math.min(a,o)||Math.min(e,i)>Math.max(a,o))){var u=(t*i-e*n)*(r-s)-(t-n)*(r*o-a*s),c=(t*i-e*n)*(a-o)-(e-i)*(r*o-a*s),h=(t-n)*(a-o)-(e-i)*(r-s);if(h){var l=u/h,f=c/h,d=+l.toFixed(2),g=+f.toFixed(2);if(!(d<+Math.min(t,n).toFixed(2)||d>+Math.max(t,n).toFixed(2)||d<+Math.min(r,s).toFixed(2)||d>+Math.max(r,s).toFixed(2)||g<+Math.min(e,i).toFixed(2)||g>+Math.max(e,i).toFixed(2)||g<+Math.min(a,o).toFixed(2)||g>+Math.max(a,o).toFixed(2)))return{x:l,y:f}}}},M=function(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height},w=function(t,e,n,i,r){if(r)return[["M",+t+ +r,e],["l",n-2*r,0],["a",r,r,0,0,1,r,r],["l",0,i-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-n,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-i],["a",r,r,0,0,1,r,-r],["z"]];var a=[["M",t,e],["l",n,0],["l",0,i],["l",-n,0],["z"]];return a.toString=toString,a},v=function(t,e,n,i){return null==t&&(t=e=n=i=0),null==e&&(e=t.y,n=t.width,i=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:i,h:i,x2:t+n,y2:e+i,cx:t+n/2,cy:e+i/2,r1:Math.min(n,i)/2,r2:Math.max(n,i)/2,r0:Math.sqrt(n*n+i*i)/2,path:w(t,e,n,i),vb:[t,e,n,i].join(" ")}},A=function(t,e){return t=v(t),e=v(e),M(e,t.x,t.y)||M(e,t.x2,t.y)||M(e,t.x,t.y2)||M(e,t.x2,t.y2)||M(t,e.x,e.y)||M(t,e.x2,e.y)||M(t,e.x,e.y2)||M(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},P=function(t,e,n,r,a,s,o,u){i.isArray(t)||(t=[t,e,n,r,a,s,o,u]);var c=b.apply(null,t);return v(c.min.x,c.min.y,c.max.x-c.min.x,c.max.y-c.min.y)},C=function(t,e,n,i,a,s,o,u,c){var h=1-c,l=Math.pow(h,3),f=Math.pow(h,2),d=c*c,g=d*c,p=l*t+3*f*c*n+3*h*c*c*a+g*o,v=l*e+3*f*c*i+3*h*c*c*s+g*u,x=t+2*c*(n-t)+d*(a-2*n+t),y=e+2*c*(i-e)+d*(s-2*i+e),m=n+2*c*(a-n)+d*(o-2*a+n),_=i+2*c*(s-i)+d*(u-2*s+i),b=h*t+c*n,S=h*e+c*i,M=h*a+c*o,w=h*s+c*u,A=90-180*Math.atan2(x-m,y-_)/r;return{x:p,y:v,m:{x:x,y:y},n:{x:m,y:_},start:{x:b,y:S},end:{x:M,y:w},alpha:A}},I=function(t,e,n){var i=P(t),r=P(e);if(!A(i,r))return n?0:[];for(var a=_.apply(0,t),s=_.apply(0,e),o=~~(a/8),u=~~(s/8),c=[],h=[],l={},f=n?0:[],d=0;d<o+1;d++){var g=C.apply(0,t.concat(d/o));c.push({x:g.x,y:g.y,t:d/o})}for(d=0;d<u+1;d++)g=C.apply(0,e.concat(d/u)),h.push({x:g.x,y:g.y,t:d/u});for(d=0;d<o;d++)for(var p=0;p<u;p++){var v=c[d],x=c[d+1],y=h[p],m=h[p+1],b=Math.abs(x.x-v.x)<.001?"y":"x",M=Math.abs(m.x-y.x)<.001?"y":"x",w=S(v.x,v.y,x.x,x.y,y.x,y.y,m.x,m.y);if(w){if(l[w.x.toFixed(4)]==w.y.toFixed(4))continue;l[w.x.toFixed(4)]=w.y.toFixed(4);var I=v.t+Math.abs((w[b]-v[b])/(x[b]-v[b]))*(x.t-v.t),E=y.t+Math.abs((w[M]-y[M])/(m[M]-y[M]))*(m.t-y.t);I>=0&&I<=1&&E>=0&&E<=1&&(n?f++:f.push({x:w.x,y:w.y,t1:I,t2:E}))}}return f},E=function(t,e,n){t=p(t),e=p(e);for(var i,r,a,s,o,u,c,h,l,f,d=n?0:[],g=0,v=t.length;g<v;g++){var x=t[g];if("M"==x[0])i=o=x[1],r=u=x[2];else{"C"==x[0]?(l=[i,r].concat(x.slice(1)),i=l[6],r=l[7]):(l=[i,r,i,r,o,u,o,u],i=o,r=u);for(var y=0,m=e.length;y<m;y++){var _=e[y];if("M"==_[0])a=c=_[1],s=h=_[2];else{"C"==_[0]?(f=[a,s].concat(_.slice(1)),a=f[6],s=f[7]):(f=[a,s,a,s,c,h,c,h],a=c,s=h);var b=I(l,f,n);if(n)d+=b;else{for(var S=0,M=b.length;S<M;S++)b[S].segment1=g,b[S].segment2=y,b[S].bez1=l,b[S].bez2=f;d=d.concat(b)}}}}}return d},T=function(t,e){return E(t,e)},k={toArray:u,toString:y,toCurve:p,toAbsolute:l,catmullRomToBezier:c,rectPath:w,intersection:T};t.exports=k},function(t,e,n){"use strict";var i=n(1),r=function(){};r.ATTRS={actived:!1},i.augment(r,{isActived:function(){return this.get("actived")},setActived:function(){this.setActiveStatus(!0),this.set("actived",!0)},setActiveStatus:function(){},clearActived:function(){this.setActiveStatus(!1),this.set("actived",!1),this.clearActivedItem&&this.clearActivedItem()}}),t.exports=r},function(t,e,n){"use strict";var i=n(1),r=function(){};r.ATTRS={multipleActive:!1},i.augment(r,{isItemActived:function(t){return t.isActived()},getActiveItems:function(){return this.get("children")},setItemActived:function(t,e){e?t.setActived():t.clearActived()},onActived:function(t){this.fire("itemactived",{item:t}),this.fireUpGroup&&this.fireUpGroup("actived",t)},onUnActived:function(t){this.fire("itemunactived",{item:t}),this.fireUpGroup&&this.fireUpGroup("unactived",t)},setActivedItem:function(t){var e=this,n=e.get("multipleActive");n||e.clearActivedItem(),t&&!e.isItemActived(t)&&(e.setItemActived(t,!0),e.onActived(t))},getActived:function(){var t=this,e=t.getActiveItems(),n=null;return i.each(e,function(e){if(t.isItemActived(e))return n=e,!1}),n},getAllActived:function(){var t=this,e=t.getActiveItems(),n=[];return i.each(e,function(e){t.isItemActived(e)&&n.push(e)}),n},clearAllActived:function(){var t=this,e=t.getAllActived();return i.each(e,function(e){t.setItemActived(e,!1),t.onUnActived(e)}),this},clearActivedItem:function(t){var e=this;return t=t||e.getActived(),t&&(e.setItemActived(t,!1),e.onUnActived(t)),this}}),t.exports=r},function(t,e,n){var i;!function(r,a){i=function(){return r.returnExportsGlobal=a()}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))}(this,function(){var t={},e=t.Graph=function(){this.nodeSet={},this.nodes=[],this.edges=[],this.adjacency={},this.nextNodeId=0,this.nextEdgeId=0,this.eventListeners=[]},n=t.Node=function(t,e){this.id=t,this.data=void 0!==e?e:{}},i=t.Edge=function(t,e,n,i){this.id=t,this.source=e,this.target=n,this.data=void 0!==i?i:{}};e.prototype.addNode=function(t){return t.id in this.nodeSet||this.nodes.push(t),this.nodeSet[t.id]=t,this.notify(),t},e.prototype.addNodes=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t],i=new n(e,{label:e});this.addNode(i)}},e.prototype.addEdge=function(t){var e=!1;return this.edges.forEach(function(n){t.id===n.id&&(e=!0)}),e||this.edges.push(t),t.source.id in this.adjacency||(this.adjacency[t.source.id]={}),t.target.id in this.adjacency[t.source.id]||(this.adjacency[t.source.id][t.target.id]=[]),e=!1,this.adjacency[t.source.id][t.target.id].forEach(function(n){t.id===n.id&&(e=!0)}),e||this.adjacency[t.source.id][t.target.id].push(t),this.notify(),t},e.prototype.addEdges=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t],n=this.nodeSet[e[0]];if(void 0==n)throw new TypeError("invalid node name: "+e[0]);var i=this.nodeSet[e[1]];if(void 0==i)throw new TypeError("invalid node name: "+e[1]);var r=e[2];this.newEdge(n,i,r)}},e.prototype.newNode=function(t){var e=new n((this.nextNodeId++),t);return this.addNode(e),e},e.prototype.newEdge=function(t,e,n){var r=new i((this.nextEdgeId++),t,e,n);return this.addEdge(r),r},e.prototype.loadJSON=function(t){("string"==typeof t||t instanceof String)&&(t=JSON.parse(t)),("nodes"in t||"edges"in t)&&(this.addNodes.apply(this,t.nodes),this.addEdges.apply(this,t.edges))},e.prototype.getEdges=function(t,e){return t.id in this.adjacency&&e.id in this.adjacency[t.id]?this.adjacency[t.id][e.id]:[]},e.prototype.removeNode=function(t){t.id in this.nodeSet&&delete this.nodeSet[t.id];for(var e=this.nodes.length-1;e>=0;e--)this.nodes[e].id===t.id&&this.nodes.splice(e,1);this.detachNode(t)},e.prototype.detachNode=function(t){var e=this.edges.slice();e.forEach(function(e){e.source.id!==t.id&&e.target.id!==t.id||this.removeEdge(e)},this),this.notify()},e.prototype.removeEdge=function(t){for(var e=this.edges.length-1;e>=0;e--)this.edges[e].id===t.id&&this.edges.splice(e,1);for(var n in this.adjacency){for(var i in this.adjacency[n]){for(var r=this.adjacency[n][i],a=r.length-1;a>=0;a--)this.adjacency[n][i][a].id===t.id&&this.adjacency[n][i].splice(a,1);0==this.adjacency[n][i].length&&delete this.adjacency[n][i]}u(this.adjacency[n])&&delete this.adjacency[n]}this.notify()},e.prototype.merge=function(t){var e=[];t.nodes.forEach(function(t){e.push(this.addNode(new n(t.id,t.data)))},this),t.edges.forEach(function(t){var n=e[t.from],r=e[t.to],a=t.directed?a=t.type+"-"+n.id+"-"+r.id:n.id<r.id?t.type+"-"+n.id+"-"+r.id:t.type+"-"+r.id+"-"+n.id,s=this.addEdge(new i(a,n,r,t.data));s.data.type=t.type},this)},e.prototype.filterNodes=function(t){var e=this.nodes.slice();e.forEach(function(e){t(e)||this.removeNode(e)},this)},e.prototype.filterEdges=function(t){var e=this.edges.slice();e.forEach(function(e){t(e)||this.removeEdge(e)},this)},e.prototype.addGraphListener=function(t){this.eventListeners.push(t)},e.prototype.notify=function(){this.eventListeners.forEach(function(t){t.graphChanged()})};var r=t.Layout={};r.ForceDirected=function(t,e,n,i,r){this.graph=t,this.stiffness=e,this.repulsion=n,this.damping=i,this.minEnergyThreshold=r||.01,this.nodePoints={},this.edgeSprings={}},r.ForceDirected.prototype.point=function(t){if(!(t.id in this.nodePoints)){var e=void 0!==t.data.mass?t.data.mass:1;this.nodePoints[t.id]=new r.ForceDirected.Point(s.random(),e)}return this.nodePoints[t.id]},r.ForceDirected.prototype.spring=function(t){if(!(t.id in this.edgeSprings)){var e=void 0!==t.data.length?t.data.length:1,n=!1,i=this.graph.getEdges(t.source,t.target);if(i.forEach(function(t){n===!1&&t.id in this.edgeSprings&&(n=this.edgeSprings[t.id])},this),n!==!1)return new r.ForceDirected.Spring(n.point1,n.point2,0,0);this.graph.getEdges(t.target,t.source);if(i.forEach(function(t){n===!1&&t.id in this.edgeSprings&&(n=this.edgeSprings[t.id])},this),n!==!1)return new r.ForceDirected.Spring(n.point2,n.point1,0,0);this.edgeSprings[t.id]=new r.ForceDirected.Spring(this.point(t.source),this.point(t.target),e,this.stiffness)}return this.edgeSprings[t.id]},r.ForceDirected.prototype.eachNode=function(t){var e=this;this.graph.nodes.forEach(function(n){t.call(e,n,e.point(n))})},r.ForceDirected.prototype.eachEdge=function(t){var e=this;this.graph.edges.forEach(function(n){t.call(e,n,e.spring(n))})},r.ForceDirected.prototype.eachSpring=function(t){var e=this;this.graph.edges.forEach(function(n){t.call(e,e.spring(n))})},r.ForceDirected.prototype.applyCoulombsLaw=function(){this.eachNode(function(t,e){this.eachNode(function(t,n){if(e!==n){var i=e.p.subtract(n.p),r=i.magnitude()+.1,a=i.normalise();e.applyForce(a.multiply(this.repulsion).divide(r*r*.5)),n.applyForce(a.multiply(this.repulsion).divide(r*r*-.5))}})})},r.ForceDirected.prototype.applyHookesLaw=function(){this.eachSpring(function(t){var e=t.point2.p.subtract(t.point1.p),n=t.length-e.magnitude(),i=e.normalise();t.point1.applyForce(i.multiply(t.k*n*-.5)),t.point2.applyForce(i.multiply(t.k*n*.5))})},r.ForceDirected.prototype.attractToCentre=function(){this.eachNode(function(t,e){var n=e.p.multiply(-1);e.applyForce(n.multiply(this.repulsion/50))})},r.ForceDirected.prototype.updateVelocity=function(t){this.eachNode(function(e,n){n.v=n.v.add(n.a.multiply(t)).multiply(this.damping),n.a=new s(0,0)})},r.ForceDirected.prototype.updatePosition=function(t){this.eachNode(function(e,n){n.p=n.p.add(n.v.multiply(t))})},r.ForceDirected.prototype.totalEnergy=function(t){var e=0;return this.eachNode(function(t,n){var i=n.v.magnitude();e+=.5*n.m*i*i}),e};var a=function(t,e){return function(){return t.apply(e,arguments)}};t.requestAnimationFrame=a(this.requestAnimationFrame||this.webkitRequestAnimationFrame||this.mozRequestAnimationFrame||this.oRequestAnimationFrame||this.msRequestAnimationFrame||function(t,e){this.setTimeout(t,10)},this),r.ForceDirected.prototype.start=function(e,n,i){var r=this;this._started||(this._started=!0,this._stop=!1,void 0!==i&&i(),t.requestAnimationFrame(function a(){r.tick(.03),void 0!==e&&e(),r._stop||r.totalEnergy()<r.minEnergyThreshold?(r._started=!1,void 0!==n&&n()):t.requestAnimationFrame(a)}))},r.ForceDirected.prototype.stop=function(){this._stop=!0},r.ForceDirected.prototype.tick=function(t){this.applyCoulombsLaw(),this.applyHookesLaw(),this.attractToCentre(),this.updateVelocity(t),this.updatePosition(t)},r.ForceDirected.prototype.nearest=function(t){var e={node:null,point:null,distance:null},n=this;return this.graph.nodes.forEach(function(i){var r=n.point(i),a=r.p.subtract(t).magnitude();(null===e.distance||a<e.distance)&&(e={node:i,point:r,distance:a})}),e},r.ForceDirected.prototype.getBoundingBox=function(){var t=new s((-2),(-2)),e=new s(2,2);this.eachNode(function(n,i){i.p.x<t.x&&(t.x=i.p.x),i.p.y<t.y&&(t.y=i.p.y),i.p.x>e.x&&(e.x=i.p.x),i.p.y>e.y&&(e.y=i.p.y)});var n=e.subtract(t).multiply(.07);return{bottomleft:t.subtract(n),topright:e.add(n)}};var s=t.Vector=function(t,e){this.x=t,this.y=e};s.random=function(){return new s(10*(Math.random()-.5),10*(Math.random()-.5))},s.prototype.add=function(t){return new s(this.x+t.x,this.y+t.y)},s.prototype.subtract=function(t){return new s(this.x-t.x,this.y-t.y)},s.prototype.multiply=function(t){return new s(this.x*t,this.y*t)},s.prototype.divide=function(t){return new s(this.x/t||0,this.y/t||0)},s.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},s.prototype.normal=function(){return new s((-this.y),this.x)},s.prototype.normalise=function(){return this.divide(this.magnitude())},r.ForceDirected.Point=function(t,e){this.p=t,this.m=e,this.v=new s(0,0),this.a=new s(0,0)},r.ForceDirected.Point.prototype.applyForce=function(t){this.a=this.a.add(t.divide(this.m))},r.ForceDirected.Spring=function(t,e,n,i){this.point1=t,this.point2=e,this.length=n,this.k=i};var o=t.Renderer=function(t,e,n,i,r,a){this.layout=t,this.clear=e,this.drawEdge=n,this.drawNode=i,this.onRenderStop=r,this.onRenderStart=a,this.layout.graph.addGraphListener(this)};o.prototype.graphChanged=function(t){this.start()},o.prototype.start=function(t){var e=this;this.layout.start(function(){e.clear(),e.layout.eachEdge(function(t,n){e.drawEdge(t,n.point1.p,n.point2.p)}),e.layout.eachNode(function(t,n){e.drawNode(t,n.p)})},this.onRenderStop,this.onRenderStart)},o.prototype.stop=function(){this.layout.stop()},Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,i;if(null==this)throw new TypeError(" this is null or not defined");var r=Object(this),a=r.length>>>0;if("[object Function]"!={}.toString.call(t))throw new TypeError(t+" is not a function");for(e&&(n=e),i=0;i<a;){var s;i in r&&(s=r[i],t.call(n,s,i,r)),i++}});var u=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};return t})},function(t,e,n){"use strict";var i=n(1),r=n(103),a=n(16).G,s=a.Shape.superclass.constructor;i.mixin(s,[r]),t.exports={}},function(t,e,n){"use strict";var i=n(1),r=n(104),a=function(){};i.augment(a,{tween:r,animate:function(t,e,n,a){var s=r.getNow(),o=i.mix({},t,{duration:e});r.animate(this).append(s,o,n,a),"silent"===r.get("status")&&r.play()}}),t.exports=a},function(t,e,n){"use strict";var i=n(28);t.exports=new i},function(t,e,n){"use strict";function i(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):t.attachEvent?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):void 0}var r=n(1),a=function(t){r.mix(this,t),this.init()};r.augment(a,{graph:null,frontCanvas:null,canvas:null,currentItem:null,dragitem:null,rootGroup:null,lastEventObj:null,currentEventObj:null,el:null,init:function(){var t=this.graph;this.frontCanvas=t.get("frontCanvas"),this.canvas=t.get("canvas"),this._initEvent()},_initEvent:function(){var t=this,e=t.frontCanvas,n=e.get("el");this.el=n,this.domMouseDownEvent=i(n,"mousedown",r.wrapBehavior(t,"onMouseDown")),this.domMouseUpEvent=i(n,"mouseup",r.wrapBehavior(t,"onMouseUp")),this.domMouseMoveEvent=i(n,"mousemove",r.wrapBehavior(t,"onMouseMove")),this.domDblClickEvent=i(n,"dblclick",r.wrapBehavior(t,"onDblClick"))},_parsePoint:function(t,e){var n=this.canvas.get("pixelRatio"),i=this.graph,r={x:t/n,y:e/n};return i.invertPoint(r)},_getEventObj:function(t,e){var n,i=this.graph,r=t.clientX,a=t.clientY,s=e.getPointByClient(r,a),o=this._parsePoint(s.x,s.y),u=e.getShape(s.x,s.y),c=i.getItem(u);return c&&(n=c.get("type")),{item:c,itemType:n,shape:u,x:o.x,y:o.y,domX:t.offsetX,domY:t.offsetY}},getEventObj:function(t){return{item:t.item,itemType:t.itemType,x:t.x,y:t.y,domX:t.domX,domY:t.domY,shape:t.shape,toEvObj:t.toEvObj,frontEvObj:t.frontEvObj}},_processEventObj:function(t){var e,n,i=this.canvas,a=this.frontCanvas,s=this.currentEventObj;s&&r.isObject(s)&&(this.lastEventObj=r.mix({},s)),e=this._getEventObj(t,i),n=this._getEventObj(t,a),e.frontEvObj=n,this.currentEventObj=e,this.currentItem=e.item},onDblClick:function(t){t.preventDefault(),this._processEventObj(t);var e=this.currentEventObj;this.graph.fire("dblclick",this.getEventObj(e))},onMouseDown:function(t){t.preventDefault(),this._processEventObj(t);var e=this.currentEventObj;this.pressing=!0,this.dragging=!0,this.graph.fire("mousedown",this.getEventObj(e))},onMouseUp:function(t){t.preventDefault(),this._processEventObj(t);var e=this.currentEventObj;this.pressing&&(this.graph.fire("click",this.getEventObj(e)),this.pressing=!1),this.dragging&&(this.dragStartPoint&&this.graph.fire("dragend",this.getEventObj(e)),this.dragging=!1),this.graph.fire("mouseup",this.getEventObj(e)),this.dragStartPoint=null,this.dragItem=null},onMouseMove:function(t){t.preventDefault(),this._processEventObj(t);var e=this.graph,n=this.currentEventObj,i=this.lastEventObj;i&&n&&(this.isSame(i,n)||(i.toEvObj=n,n.fromEvObj=i,(i.shape||i.frontEvObj.shape)&&e.fire("mouseleave",this.getEventObj(i)),(n.shape||i.frontEvObj.shape)&&e.fire("mouseenter",this.getEventObj(n)))),this.pressing=!1,this.dragging&&(this.dragStartPoint?e.fire("dragmove",this.getEventObj(n)):(this.dragStartPoint={x:n.x,y:n.y},this.dragItem=n.item,e.fire("dragstart",this.getEventObj(n)))),n.item&&e.fire("mouseover",this.getEventObj(n)),e.fire("mousemove",this.getEventObj(n))},isSame:function(t,e){var n=t.shape,i=e.shape,r=t.frontEvObj.shape,a=e.frontEvObj.shape;return n===i&&r===a},remove:function(){var t=this.domMouseUpEvent,e=this.domMouseDownEvent,n=this.domMouseMoveEvent,i=this.domDblClickEvent;i&&i.remove(),t&&t.remove(),e&&e.remove(),n&&n.remove()}}),t.exports=a},function(t,e,n){"use strict";var i=n(1),r=function(t){i.mix(this,t),this.init()};i.augment(r,{group:null,visible:!0,gridEl:null,minX:0,minY:0,cell:10,maxX:1e3,maxY:1e3,line:null,init:function(){var t=this,e=t.group,n=t._getPath(),r=i.mix({},t.line);r.path=n;var a=e.addShape("path",{attrs:r,capture:!1});a.set("visible",t.visible),this.gridEl=a},_getPath:function(){for(var t=this,e=t.minX,n=t.minY,i=t.maxX,r=t.maxY,a=t._getCell(),s=Math.ceil(e/a)*a,o=Math.ceil(n/a)*a,u=[],c=0;c<=i-e;c+=a){var h=s+c;u.push(["M",h,n]),u.push(["L",h,r])}for(var l=0;l<=r-n;l+=a){var f=o+l;u.push(["M",e,f]),u.push(["L",i,f])}return u},_getCell:function(){var t=this.cell?this.cell:10;return t},update:function(t){i.mix(this,t);var e=this._getPath(),n=this.gridEl;n.attr("path",e),n.set("visible",this.visible)},destroy:function(){var t=this,e=t.gridEl;e&&e.remove()}}),t.exports=r},function(t,e,n){"use strict";var i=n(1),r=n(7),a=function(t){i.mix(this,t)};i.augment(a,{graph:null,tooltipDOM:null,titleDOM:null,listDOM:null,tooltipCSS:{border:"none","border-radius":"4px",background:"rgba(33,33,33,0.7)",color:"white","font-size":"14px",margin:0,padding:"8px 16px"},titleCSS:{margin:0},listCSS:{margin:0,"list-style-type":"none",padding:"0px"},title:"",dx:10,dy:10,margin:10,split:": ",tooltipHtml:'<div class="g6-tooltip" style="position: absolute;"></div>',titleHtml:'<h4 class="g6-tooltip-title"></h4>',listHtml:'<ul class="g6-tooltip-list"></ul>',liTpl:"<li><span>{name}</span>{split}{value}</li>",init:function(){this._createDOM(),this._bindEvent()},_createDOM:function(){var t=this.graph,e=t.get("graphContainer"),n=r.createDOM(this.tooltipHtml,this.tooltipCSS),i=r.createDOM(this.titleHtml,this.titleCSS),a=r.createDOM(this.listHtml,this.listCSS);e.appendChild(n),n.appendChild(i),n.appendChild(a),n.hide(),i.innerHTML=this.title,this.titleDOM=i,this.listDOM=a,this.tooltipDOM=n},_bindEvent:function(){var t=this.graph;t.on("mouseover",i.wrapBehavior(this,"onMouseover")),t.on("mouseleave",i.wrapBehavior(this,"onMouseleave"))},_followMode:function(t){var e=this.tooltipDOM,n=this.dx,i=this.dy,r=e.height();e.css({top:t.domY-r-i+"px",left:t.domX+n+"px"})},onMouseleave:function(){var t=this.tooltipDOM;t.hide()},onMouseover:function(t){var e=this,n=this.tooltipDOM,r=this.listDOM,a=this.liTpl,s=t.item.getShapeCfg().tooltip,o="";s&&(i.isArray(s[0])||(s=[s]),i.each(s,function(t){o+=i.substitute(a,{name:t[0],value:t[1],split:e.split})}),r.innerHTML=o,e._followMode(t),s&&n.show())},destroy:function(){var t=this.graph;this.tooltipDOM.destroy(),t.off("mouseover",i.getWrapBehavior(this,"onMouseover")),t.off("mouseleave",i.getWrapBehavior(this,"onMouseleave"))}}),t.exports=a},function(t,e,n){"use strict";function i(t,e){var n=e.get("children");r.each(n,function(e){e.isGroup&&e.get("visible")?i(t,e):e.isShape&&t.push(e)})}var r=n(1),a=n(7),s=n(16).G,o=s.Group,u=function c(t){c.superclass.constructor.call(this,t)};r.extend(u,o),r.augment(u,{drawInner:function(){var t=[];return i(t,this),a.radixSort(t),r.each(t,function(t){t.draw()}),this}}),t.exports=u},function(t,e,n){"use strict";function i(t,e,n){return new s({width:t,height:e,containerDOM:n})}var r=n(1),a=n(12),s=n(16),o=n(116),u=n(117),c=n(115),h=n(114),l=n(111),f=n(106),d=n(105),g=n(107),p=n(39).Group,v=n(7),x=n(9),y=n(108),m=function _(t){_.superclass.constructor.call(this,t),this._init()};m.ATTRS={id:null,container:null,graphContainer:null,width:null,height:null,editMode:"select",
addingType:"",itemCache:null,items:[],nodes:[],edges:[],canvas:null,useAnchor:!0,multipleActive:!0,eventStash:{click:[],mousedown:[],mouseup:[],mouseenter:[],mouseleave:[],dragmove:[]},el:null,forceFit:!1,grid:!0},r.extend(m,a),r.mixin(m,[p,o,u,c]),r.augment(m,{_init:function(){this._initDOM(),this._initData(),this._initMapper(),this._initEvent(),this._initForceFit(),this.get("grid")&&this._initGrid(),this.get("forceFit")&&(window.addEventListener("resize",r.wrapBehavior(this,"_initForceFitEvent")),this.forceFit()),this._initEditor(),this._initMode()},_initForceFit:function(){this.get("width")||this.set("forceFit",!0)},_initForceFitEvent:function(){var t=setTimeout(r.wrapBehavior(this,"forceFit"),200);clearTimeout(this.get("resizeTimer")),this.set("resizeTimer",t)},_on:function(t,e){var n=this.get("eventStash");n[t].push(e),this.on(t,e)},_off:function(){var t=this,e=this.get("eventStash");r.each(e,function(n,i){r.each(n,function(e){t.off(i,e)}),e[i]=[]})},_initData:function(){this.set("itemCache",{}),this.set("items",[])},_initMapper:function(){this.set("nodeMapper",new h),this.set("edgeMapper",new h)},_initDOM:function(){var t=this,e=t.get("container");if(!e){var n=t.get("id");if(e=document.getElementById(n),!e)throw new Error("please set the id for the graph")}var a=t.get("width"),s=t.get("height"),o=r.createDom('<div class="graph-container" style="position:relative;"></div>');e.appendChild(o);var u=i(a,s,o),c=i(a,s,o),h=c.get("el");h.style.position="absolute",h.style.top=0,h.style.left=0,o.style["font-family"]=x.fontFamily;var l=u.addGroup(),f=l.addGroup(),d=l.addGroup(),g=d.addGroup(y),p=d.addGroup(),v=c.addGroup();t.set("rootGroup",l),t.set("itemGroup",d),t.set("backGroup",f),t.set("frontRootGroup",v),t.set("nodeGroup",p),t.set("edgeGroup",g),t.set("canvas",u),t.set("frontCanvas",c),t.set("graphContainer",o),t.set("container",e),t.set("el",c.get("el"))},_initGrid:function(){var t=this,e=r.mix({minX:0,minY:0,maxX:t.get("width"),maxY:t.get("height"),group:t.get("backGroup")},x.grid,t.get("grid")),n=new f(e);t.set("gridAssist",n)},_initEvent:function(){var t=new d({graph:this,frontCanvas:this.get("frontCanvas"),canvas:this.get("canvas"),rootGroup:this.get("rootGroup")}),e=this.get("zoomable"),n=this.get("shortcutable");this.set("eventAssist",t),n&&this._bindKeyboardShortcut(),e&&this._bindZoomEvent()},_updateGrid:function(){var t=this.get("gridAssist");if(t){var e=this,n=e.get("width"),i=e.get("height"),r=e.invertPoint({x:0,y:0}),a=e.invertPoint({x:n,y:i});t.update({minX:r.x,minY:r.y,maxX:a.x,maxY:a.y})}},_updateItemCache:function(t,e){var n=this.get("itemCache");if(n[t])throw new Error("id: "+t+" \u5df2\u5b58\u5728\uff01id: "+t+" already exist!");n[t]=e},_changeCss:function(t){var e=this.get("el");r.each(t,function(t,n){e.style[n]=t})},_clearInner:function(){this.get("nodeGroup").clear(),this.get("edgeGroup").clear(),this.get("frontRootGroup").clear()},_updateEdgeEnd:function(t,e,n){var i=this,r=i.get("itemCache"),a=e[n],s=t.get(n);if(!s||s.get("id")!==a){s&&s.removeEdge(t);var o=r[a];o.addEdge(t),t.set(n,o)}},_addItems:function(){var t=this.get("nodes");this._addNodes(t);var e=this.get("edges");this._addEdges(e)},_addNodes:function(t){var e=this,n=e.get("nodeGroup"),i=[];return r.each(t,function(t){var a=t.id;r.isNull(a)&&(a=v.guid(),t.id=a);var s=n.addGroup({id:a,type:"node"}),o=new l.Node({id:a,graph:e,group:s,model:t,mapper:e.get("nodeMapper"),useAnchor:e.get("useAnchor"),frontGroup:e.get("frontRootGroup")});e._updateItemCache(a,o),i.push(o),o.draw(),e.get("items").push(o)}),i},_getAllActived:function(){var t=this.getAllActived();return t.sort(function(t,e){var n,i,r=t.get("group"),a=e.get("group");return r&&(n=r.get("parent"),i=n.get("children")),i.indexOf(r)-i.indexOf(a)}),t},_addEdges:function(t){var e=this,n=e.get("itemCache"),i=e.get("edgeGroup"),a=[];return r.each(t,function(t){var s=n[t.source],o=n[t.target];if(!s||!o)return void console.warn("can not find effective node in edge model");var u=t.id;r.isNull(u)&&(u=v.guid(),t.id=u);var c=i.addGroup({id:u,type:"edge"}),h=new l.Edge({id:u,graph:e,source:s,target:o,model:t,group:c,mapper:e.get("edgeMapper"),frontGroup:e.get("frontRootGroup")});h.draw(),e._updateItemCache(u,h),a.push(h),e.get("items").push(h)}),a},invertPoint:function(t){var e=this.get("rootGroup").getMatrix();return v.invertPoint(t,e)},forceFit:function(){var t=this.get("container"),e=v.getDOMWidth(t),n=this.get("height");e!==this.get("width")&&this.changeSize(e,n)},tooltip:function(t){var e=this.get("tooltipAssist");return t&&(r.isObject(e)&&e.destroy(),e=new g,r.isObject(t)&&r.mix(e,t),e.graph=this,e.init(),this.set("tooltipAssist",e)),this},getItem:function(t){if(!t)return null;var e=t.get("parent"),n=this.get("itemCache");return n[e.get("id")]},getActiveItems:function(){return this.get("items")},updateMatrix:function(t){var e=this,n=e.get("rootGroup"),i=e.get("frontRootGroup");n.setMatrix(t),i.setMatrix(t.clone()),e._updateGrid()},toFront:function(t){var e=t.get("group"),n=e.get("parent"),i=n.get("children");return r.remove(i,e),i.push(e),self},toBack:function(t){var e=t.get("group"),n=e.get("parent"),i=n.get("children");return r.remove(i,e),i.unshift(e),self},source:function(t,e){this.set("nodes",t),this.set("edges",e)},node:function(){return this.get("nodeMapper")},edge:function(){return this.get("edgeMapper")},clear:function(){this._clearInner(),this._initMapper(),this._initData(),this._initEditor()},refresh:function(t){t!==!1&&this.get("canvas").draw(),this.get("frontCanvas").draw()},add:function(t,e){var n,i=this;return"node"===t?n=i._addNodes([e]):"edge"===t&&(n=i._addEdges([e])),n[0]},update:function(t,e){var n=this,i=t.get("type"),a=t.get("model");if(r.mix(a,e),"edge"===i)n._updateEdgeEnd(t,a,"source"),n._updateEdgeEnd(t,a,"target"),t.update();else if("node"===i){t.update();var s=t.get("edges");r.each(s,function(t){t.update()})}},remove:function(t){var e=this,n=e.get("items"),i=t.get("id"),a=e.get("itemCache"),s=n.indexOf(t);if(s!==-1&&n.splice(s,1),delete a[i],"node"===t.get("type")){var o=t.get("edges").slice();r.each(o,function(t){s=n.indexOf(t),n.splice(s,1),delete a[t.get("model").id],e.remove(t)})}t.destroy()},render:function(){this._addItems(),this.refresh(),this._updateRollback()},save:function(){function t(t,e){r.each(t.get("children"),function(t){var n=t.get("id"),i=o[n];e.push(i.get("model"))})}var e=this,n=[],i=[],a=e.get("nodeGroup"),s=e.get("edgeGroup"),o=e.get("itemCache");return t(a,n),t(s,i),r.clone({nodes:n,edges:i})},changeData:function(t,e){this._clearInner(),this._initData(),this.source(t,e),this._addItems(),this.refresh()},changeNodes:function(t){var e=this.get("edges");this._clearInner(),this._initData(),this.source(t,e),this._addItems(),this.refresh()},changeSize:function(t,e){if(Math.abs(t)>=1/0||Math.abs(e)>=1/0)return void console.warn("size parameter more than the maximum");var n=this,i=n.get("canvas"),r=n.get("frontCanvas");i.changeSize(t,e),r.changeSize(t,e),n.set("width",t),n.set("height",e),n._updateGrid(),n.refresh()},getMatrix:function(){var t=this.get("rootGroup");return t.getMatrix()},destroy:function(){var t=this,e=t.get("canvas"),n=t.get("gridAssist"),i=t.get("tooltipAssist"),a=t.get("container"),s=t.get("graphContainer");a&&a.removeChild(s),n&&n.destroy(),i&&i.destroy(),e&&e.destroy(),m.superclass.destroy.call(this),window.removeEventListener("resize",r.getWrapBehavior(this,"_initForceFitEvent"))},find:function(t){var e=this,n=e.get("itemCache");return n[t]},isNode:function(t){return t&&r.isObject(t)&&"node"===t.get("type")},isEdge:function(t){return t&&r.isObject(t)&&"edge"===t.get("type")}}),t.exports=m},function(t,e,n){"use strict";var i=n(1),r=n(7),a=n(22),s=n(9),o=function u(t){u.superclass.constructor.call(this,t),this._initEnds()};o.ATTRS={type:"edge",controlPoints:[null,null],source:null,target:null,sourceAnchor:null,targetAnchor:null},i.extend(o,a),i.augment(o,{_initEnds:function(){var t=this,e=t.get("source"),n=t.get("target");e&&e.addEdge(t),n&&n.addEdge(t)},_getEdgePoints:function(){var t,e=this,n=e.get("model"),r=e.get("source"),a=e.get("target"),o=e.getControlPoints(),u=n.sourceAnchor,c=n.targetAnchor,h=r.getCenter(),l=a?a.getCenter():r.getCenter(),f=o.length,d=e.getShapeCfg(),g=e.get("shapeObj"),p=0,v=f-1;return null===u&&delete n.sourceAnchor,null===c&&delete n.targetAnchor,i.isNumber(u)&&r&&(u=r.getAnchor(u)),i.isNumber(c)&&a&&(c=a.getAnchor(c)),f>2?(r&&!u&&(u=r.getAnchor(o[p+1])),a&&!c&&(c=a.getAnchor(o[v-1]))):(t=s.preciseAnchor&&g.getPath(d.shape,[h,l]),r&&!u&&(u=t?r.getAnchor(t):r.getAnchor(l)),a&&!c&&(c=t?a.getAnchor(t):a.getAnchor(h))),u||(u=h),c||(c=l),o[0]={x:u.x,y:u.y},o[v]={x:c.x,y:c.y},o},beforeDraw:function(){var t=this.getShapeCfg();t.points=this._getEdgePoints(),t.target=this.get("target"),t.source=this.get("source")},afterDraw:function(){o.superclass.afterDraw.call(this);var t=this._upatehoverShape();t.set("hoverShape",!0),this.set("hoverShape",t)},_upatehoverShape:function(){var t=this,e=t.getKeyShape(),n=e.get("type"),r=i.mix({},e.get("attrs")),a=t.get("group"),s=t.get("hoverShape");return s&&s.remove(),r.opacity=0,r.lineWidth=e.attr("lineWidth")+10,s=a.addShape(n,{attrs:r})},getControlPoints:function(){var t=this.get("model"),e=t.controlPoints?t.controlPoints:this.get("controlPoints");return e},addControlPoint:function(t){var e,n,a,s=this.getControlPoints(),o=1/0;return i.each(s,function(i,u){if(n=s[u+1]){if(a=r.segmentDistance(i,n,t),a<1)return e=u,!1;a<o&&(o=a,e=u)}}),s.splice(e+1,0,t),e},getDelegationPath:function(t){var e,n=this,i=n.getControlPoints(),a=t.controlPointIndex,s=i[a-1],o=i[a+1],u=[{x:t.x,y:t.y}];return s&&u.unshift(s),o&&u.push(o),e=r.pointsToPolygon(u)},destroyItem:function(){var t=this,e=t.get("source");e&&e.removeEdge(t);var n=t.get("target");n&&n.removeEdge(t)},isExtremePoint:function(t){var e,n=this.getControlPoints();return i.isObject(t)&&(e=n.indexOf(t)),i.isNumber(t)&&(e=t),0===e||e===n.length-1},isSourcePoint:function(t){var e,n=this.getControlPoints();return i.isObject(t)&&(e=n.indexOf(t)),i.isNumber(t)&&(e=t),0===e},isTargetPoint:function(t){var e,n=this.getControlPoints();return i.isObject(t)&&(e=n.indexOf(t)),i.isNumber(t)&&(e=t),e===n.length-1},show:function(){this._show()},hide:function(){this._hide()}}),t.exports=o},function(t,e,n){"use strict";var i=n(22);i.Node=n(112),i.Edge=n(110),t.exports=i},function(t,e,n){"use strict";var i=n(1),r=n(22),a=n(7),s=n(9),o=function u(t){u.superclass.constructor.call(this,t)};o.ATTRS={type:"node",useAnchor:!0,anchorPersentPoints:null,anchorPoints:null,edges:[],anchorGroup:null,boxStash:null},i.extend(o,r),i.augment(o,{_calculateAnchorPoints:function(){var t=this,e=t.get("anchorPersentPoints"),n=t.getBBox();if(!e){var r=t.get("shapeObj"),a=t.getShapeCfg();e=r.getAnchorPoints(a.shape,a,t.get("group")),this.set("anchorPersentPoints",e)}var s=[],o=[];return s.push({x:n.x,y:n.y}),s.push({x:n.maxX,y:n.y}),s.push({x:n.maxX,y:n.maxY}),s.push({x:n.x,y:n.maxY}),s.push({x:n.x,y:n.y}),i.each(e,function(e){var n=e[0],i=e[1],r=t._getPointByPercent(s[n],s[n+1],i);o.push(r)}),t.set("anchorPoints",o),o},_getAnchorPoints:function(){var t=this.get("anchorPoints");return t||this._calculateAnchorPoints()},_getPointByPercent:function(t,e,n){return{x:t.x*(1-n)+e.x*n,y:t.y*(1-n)+e.y*n}},_showBox:function(t){var e=this.getBBox(),n=this.getKeyShape(),r=n.attr("lineWidth");r=i.isNumber(r)?r:0,t.addShape("rect",{attrs:i.mix({x:e.x+r/2,y:e.y+r/2,width:e.width-r,height:e.height-r},s.nodeBoxStyle)})},_upatehoverShape:function(){var t=this.getBBox(),e=t.x,n=t.y,i=t.maxX-t.x,r=t.maxY-t.y,a=this.get("group"),o=this.get("hoverShape");return o&&o.remove(!0),o=a.addShape("rect",{attrs:{x:e,y:n,width:i,height:r,fill:"#red",lineWidth:0,opacity:.5},zIndex:s.zIndex.hoverShape})},getCenter:function(){var t=this.getBBox();return{x:t.centerX,y:t.centerY}},getPosition:function(){var t=this.get("model");return{x:t.x,y:t.y}},getAnchor:function(t){var e,n,r,s=this.get("shapeObj"),o=this.get("useAnchor"),u=this.getCenter(),c=this.getShapeCfg();return o?i.isNumber(t)?this.getAnchorByIndex(t):(i.isObject(t)&&(e=this.getInterPointByPoint(t)),i.isArray(t)&&(e=this.getInterPointByPath(t)),e?(r=c&&c.shape?s.getShape(c.shape):s.getShape(),n=r.getAnchorPoints,r&&i.isFunction(n)?a.getSnapAnchor(this,e):e):u):u},getInterPointByPoint:function(t){var e=this.getBBox(),n=a.getRectIntersect(e,t);return n},getInterPointByPath:function(t){var e=this.getBBox(),n=a.rectPath(e.x,e.y,e.width,e.height),i=a.intersection(t,n)[0];return i},getAnchorByIndex:function(t){var e=this._getAnchorPoints();return e[t]},getControlPoints:function(){var t=this,e=t.getBBox(),n=[];return n.push({x:e.x,y:e.y}),n.push({x:e.maxX,y:e.y}),n.push({x:e.maxX,y:e.maxY}),n.push({x:e.x,y:e.maxY}),n},getDelegationPath:function(t){var e=this,n=e.getBBox(),i=t.x,r=t.y,a=t.size,s=n.width,o=n.height;a&&(s=a[0],o=a[1]);var u=[];return u.push(["M",i-s/2,r-o/2]),u.push(["L",i+s/2,r-o/2]),u.push(["L",i+s/2,r+o/2]),u.push(["L",i-s/2,r+o/2]),u.push(["Z"]),u},addEdge:function(t){this.get("edges").push(t)},removeEdge:function(t){i.remove(this.get("edges"),t)},showAnchor:function(){var t=this,e=t._getAnchorPoints(),n=t.get("anchorPoints"),r=t.get("frontGroup"),a=t.get("anchorGroup");a&&a.remove(!0),a=r.addGroup({zIndex:s.zIndex.anchorPoint}),i.each(e,function(e,r){a.addShape("circle",{elCls:"anchor-point",item:t,anchorPointIndex:r,anchorPoint:n[r],point:e,attrs:i.mix({x:e.x,y:e.y},s.anchorPointStyle)})}),this.set("anchorGroup",a)},hideAnchor:function(){var t=this.get("anchorGroup");t&&t.remove(!0),this.set("anchorGroup",null)},afterDraw:function(){o.superclass.afterDraw.call(this);var t=this.get("group"),e=t.get("children");t.set("children",a.radixSort(e)),this._calculateAnchorPoints()},show:function(){for(var t=this.get("edges"),e=0;e<t.length;e++)t[e]._show();this._show()},hide:function(){for(var t=this.get("edges"),e=0;e<t.length;e++)t[e]._hide();this._hide()},getLinkNodes:function(){var t,e,n,r=this,a=r.get("graph"),s=r.get("edges"),o=a.get("itemCache"),u=[];return i.each(s,function(i){t=i.get("model"),e=o[t.target],n=o[t.source],u.indexOf(e)===-1&&e!==r&&u.push(e),u.indexOf(n)===-1&&n!==r&&u.push(n)}),u},getUnLinkNodes:function(){var t=this.get("id"),e=this.getLinkNodes(),n=this.get("graph"),r=n.get("itemCache"),a=[];return i.each(r,function(n){"node"===n.get("type")&&e.indexOf(n)===-1&&n.get("id")!==t&&a.push(n)}),a},getRelativeItems:function(){var t,e,n,r=this,a=r.get("id"),s=r.get("graph"),o=r.get("edges"),u=s.get("itemCache"),c=[];return c=c.concat(o),i.each(o,function(i){n=i.get("model"),t=u[n.target],e=u[n.source],c.indexOf(t)===-1&&i.get("id")!==a&&c.push(t),c.indexOf(e)===-1&&i.get("id")!==a&&c.push(e)}),c},getUnRelativeItems:function(){var t=this.get("id"),e=this.get("graph"),n=e.get("itemCache"),r=this.getRelativeItems(),a=[];return i.each(n,function(e){r.indexOf(e)===-1&&e.get("id")!==t&&a.push(e)}),a}}),t.exports=o},function(t,e,n){"use strict";var i=n(1),r=function(t){i.mix(this,t)};i.augment(r,{type:null,dims:null,callback:null,getValue:function(t){var e=this.dims,n=this.callback,r=null,a=null;if(n){var s=[];i.each(e,function(e){s.push(t[e])}),r=n.apply(this,s)}else r=e?e:t[this.type];return i.isArray(r)||(r=[r]),a=r.length>1?r:r[0]}}),t.exports=r},function(t,e,n){"use strict";var i=n(1),r=n(12),a=["color","shape","size","label","style","tooltip"],s=n(113),o="origin",u=function c(t){c.superclass.constructor.call(this,t),this._init()};u.ATTRS={attrs:null,type:null},i.extend(u,r),i.augment(u,{_init:function(){this._initAttrs()},_initAttrs:function(){var t=this,e={};i.each(a,function(t){e[t]=new s({type:t})}),t.set("attrs",e)},_getAttr:function(t){return this.get("attrs")[t]},_updateAttr:function(t,e,n){var i=this,r=i._getAttr(t);r.dims=i._parseDims(e),r.callback=n},_parseDims:function(t){var e=null;return e=i.isArray(t)?t:i.isString(t)?t.split("*"):[t]},mapping:function(t){var e=this,n=e.get("attrs"),r={};return i.each(n,function(e){var n=e.type;i.isNull(t[n])?r[n]=e.getValue(t):r[n]=t[n]}),r.x=t.x,r.y=t.y,r.style=i.mix({},r.style,t.style),r.labelStyle=t.labelStyle,r[o]=t,r}}),i.each(a,function(t){u.prototype[t]=function(e,n){var r=this;return"label"!==t||n||(n=function(){return i.toArray(arguments)}),"tooltip"!==t||n||(n=function(){var t,n=i.toArray(arguments),a=r._parseDims(e),s=[];for(t=0;t<n.length;t++)s.push([a[t],n[t]]);return s}),r._updateAttr(t,e,n),r}}),t.exports=u},function(t,e,n){"use strict";var i=n(1),r=n(7),a=n(2),s=a.Matrix3,o={max:5,current:0,cache:[]},u={nodes:[],edges:[]},c=function(){};c.ATTRS={clipboard:!0,rollback:!1},i.augment(c,{_initEditor:function(){var t=this.get("rollback"),e=this.get("clipboard");t&&this.set("rollback",i.clone(o)),e&&this.set("clipboard",i.clone(u))},_initRollback:function(){},_updateRollback:function(){var t=this.get("rollback");if(i.isObject(t)){var e=t.current,n=t.cache,r=t.max,a=n.length,s=this.save();n.splice(0,e,s),a>r&&n.splice(r,a-r+1),t.current=0}},copy:function(){var t,e,n,a=this,s=a.getAllActived(),o=a.get("clipboard"),u={};o.nodes=[],o.edges=[],i.each(s,function(c){t=i.mix(!0,{},c.get("model"),{id:r.guid()}),u[c.get("model").id]=t.id,a.isNode(c)?(t.x+=10,t.y-=10,o.nodes.push(t)):(e=c.get("model").target,n=c.get("model").source,e=a.find(e),n=a.find(n),s.indexOf(e)!==-1&&s.indexOf(n)!==-1&&(t.controlPoints&&i.each(t.controlPoints,function(e,n){t.controlPoints[n]={x:e.x+=10,y:e.y-=10}}),t.target=u[t.target],t.source=u[t.source],o.edges.push(t)))})},paste:function(){var t=this.get("clipboard"),e=this._addNodes(t.nodes);e=e.concat(this._addEdges(t.edges)),this.clearAllActived(),i.each(e,function(t){t.setActived()}),t.nodes=[],t.edges=[],this._updateRollback(),this.refresh()},del:function(){var t=this,e=t.getAllActived();i.each(e,function(e){t.remove(e)}),this._updateRollback(),t.refresh()},updo:function(){var t=this.get("rollback");if(i.isObject(t)){var e=t.cache,n=t.current,r=n+1,a=e[r];0!==e.length&&a&&(a=i.clone(a),this.changeData(a.nodes,a.edges),t.current=r)}},redo:function(){var t=this.get("rollback");if(i.isObject(t)){var e=t.cache,n=t.current,r=n-1,a=e[r];0!==e.length&&a&&(a=i.clone(a),this.changeData(a.nodes,a.edges),t.current=r)}},autoZoom:function(){var t=new s,e=this.get("width"),n=this.get("height"),i=this.get("itemGroup"),r=i.getBBox(),a=(r.maxX+r.minX)/2,o=(r.maxY+r.minY)/2,u=r.maxX-r.minX,c=r.maxY-r.minY,h=e/u;e/u>n/c&&(h=n/c),t.translate(-a,-o),t.scale(h,h),t.translate(e/2,n/2),this.updateMatrix(t),this.refresh()},resetZoom:function(){var t=new s;this.updateMatrix(t),this.refresh()},beginAdd:function(t,e){this.changeMode("add"),this.set("addingType",t),this.set("addingModel",e)},endAdd:function(t){this.changeMode("select"),this.set("addingType",""),this.set("addingModel",null),t&&this.fire("afterAdd",{item:t})}}),t.exports=c},function(t,e,n){"use strict";function i(t,e){t.x=Math.round(t.x/e)*e,t.y=Math.round(t.y/e)*e}function r(t,e,n,i){var r,a,s=t.x-n.x,o=t.y-n.y,u=i.getBBox(),c=i.getCenter();switch(e){case 0:r=u.width-s,a=u.height-o;break;case 1:r=u.width+s,a=u.height-o;break;case 2:r=u.width+s,a=u.height+o;break;default:r=u.width-s,a=u.height+o}var h=[r,a];return{x:c.x+s/2,y:c.y+o/2,size:h}}var a=n(1),s=n(9),o=n(7),u=function(){};a.augment(u,{_bindClickBlankEvent:function(){var t,e,n,i,r,a=this;a._on("mousedown",function(s){if(t=s.item,i=a._getAllActived(),n=a.getActived(),e=s.frontEvObj.shape,r=a.get("frameSelecting"),!r&&!e)return t&&t!==n&&a.isNode(t)&&i.length<=1&&(a.clearAllActived(),a.setActivedItem(t),a.refresh(!1)),void(t||(a.clearAllActived(),a.refresh(!1)))}),a._on("click",function(i){if(t=i.item,n=a.getActived(),e=i.frontEvObj.shape,r=a.get("frameSelecting"),!r&&!e)return void(t&&t!==n&&a.isEdge(t)&&(a.clearAllActived(),a.setActivedItem(t),a.refresh(!1)))})},_bindAddEdgeEvent:function(){var t,e,n,i,r,a,s=this;s._on("mousedown",function(r){e=r.item,n=s.get("addingType"),i=s.get("addingModel"),e&&"edge"===n&&s.isNode(e)&&(i.source=e.get("id"),i.target=e.get("id"),t=s.add("edge",i))}),s._on("dragmove",function(e){t&&(r={x:e.x,y:e.y,controlPointIndex:1},t.showDelegation(r),s.refresh(!1))}),s._on("mouseup",function(n){t&&(e=n.item,t.hideDelegation(),s.isNode(e)?(a={},a.target=e.get("id"),s.update(t,a),s._updateRollback(),s.clearAllActived(),s.setActivedItem(t),s.refresh(),s.endAdd(t)):(s.remove(t),s.refresh(!1),s.endAdd()),s.changeMode("select"),t=null)})},_bindAddNodeEvent:function(){var t,e,n,r=this,a=r.get("grid"),s=a&&a.forceAlign;r._on("click",function(o){t=r.get("addingType"),e=r.get("addingModel"),"node"===t&&(e.x=o.x,e.y=o.y,s&&i(e,a.cell),n=r.add("node",e),r.clearAllActived(),r.setActivedItem(n),r.changeMode("select"),r._updateRollback(),r.refresh(),r.endAdd(n))})},_bindDragCanvasEvent:function(t){var e,n,i,r,a,s=this,o=s.get("rootGroup");s._on("mousedown",function(i){"ignoreElement"===t&&(i.shape||i.frontEvObj.shape)||(e={x:i.domX,y:i.domY},n=o.getMatrix())}),s._on("dragmove",function(t){e&&(r=t.domX-e.x,a=t.domY-e.y,i=n.clone(),i.translate(r,a),s.updateMatrix(i),s.refresh())}),s._on("mouseup",function(){e=void 0,n=void 0,r=void 0,a=void 0,i=void 0})},_bindDragNodeEvent:function(){var t,e,n,r,s,o,u,c=this,h=c.get("grid"),l=h&&h.forceAlign,f=[],d=null,g=!1;c._on("mousedown",function(i){n=i.frontEvObj.shape,e=i.item,c.isNode(e)&&!n&&(d={x:i.x,y:i.y},e.isActived()?(t=c._getAllActived(),a.each(t,function(t){f.push(t)})):(c.clearAllActived(),f.push(e)))}),c._on("dragmove",function(t){a.isArray(f)&&0!==f.length&&(g=!0,a.each(f,function(e){c.isNode(e)&&(u=e.getBBox(),o={x:(u.x+u.maxX)/2,y:(u.y+u.maxY)/2},e.showDelegation({x:o.x+t.x-d.x,y:o.y+t.y-d.y}))}),c.refresh(!1))}),c._on("mouseup",function(n){return a.isArray(f)&&0!==f.length&&g?(e=n.item,a.each(f,function(t){c.isNode(t)?(o=t.getPosition(),r={x:o.x+n.x-d.x,y:o.y+n.y-d.y},e!==t&&c.toFront(t),l&&i(r,h.cell),t.hideDelegation()):(s=t.getControlPoints(),r={},s.length>2&&(a.each(s,function(t,e){0!==e&&e!==s.length-1&&(t.x=t.x+n.x-d.x,t.y=t.y+n.y-d.y,l&&i(t,h.cell))}),r={controlPoints:s})),c.update(t,r)}),c._updateRollback(),d=null,e=void 0,o=void 0,s=void 0,t=void 0,r=void 0,g=!1,f=[],void c.refresh()):void(f=[])})},_bindDragEdgeEvent:function(){var t,e,n,i,r,a,o,u,c,h=this,l=h.get("frontRootGroup");h._on("mousedown",function(t){if(e=t.frontEvObj.shape,e&&"control-point"===e.get("elCls")){if(a=e.get("item"),!h.isEdge(a))return void(a=void 0);if(o=e.get("pointIndex"),!a.isExtremePoint(o))return a=void 0,void(o=void 0)}}),h._on("dragmove",function(e){h.isEdge(a)&&(t=e.item,c={x:e.x,y:e.y,controlPointIndex:o},a.showDelegation(c),h.refresh(!1))}),h._on("mouseenter",function(i){h.isEdge(a)&&(t=i.item,e=i.frontEvObj.shape,!h.isNode(t)||e&&"anchor-point"===e.get("elCls")||t.get("anchorGroup")||(n=t,t.showAnchor(),l.sort()),e&&"anchor-point"===e.get("elCls")&&e.attr(s.anchorPointHoverStyle))}),h._on("mouseleave",function(o){h.isEdge(a)&&(t=o.item,r=o.toEvObj.item,i=o.toEvObj.frontEvObj.shape,e=o.frontEvObj.shape,e&&"anchor-point"===e.get("elCls")&&e.attr(s.anchorPointStyle),!h.isNode(n)||e&&e.get("item")===n&&r===n||i&&i.get("item")===n||h.isEdge(r)||(n.hideAnchor(),h.refresh(!1)))}),h.on("mouseup",function(i){h.isEdge(a)&&(t=i.item,e=i.frontEvObj.shape,u={},h.isNode(t)&&(a.isSourcePoint(o)?(u.source=t.get("id"),u.sourceAnchor=null):a.isTargetPoint(o)&&(u.target=t.get("id"),u.targetAnchor=null)),e&&"anchor-point"===e.get("elCls")&&e.get("item")===n&&(a.isSourcePoint(o)?(u.source=n.get("id"),u.sourceAnchor=e.get("anchorPointIndex")):a.isTargetPoint(o)&&(u.target=n.get("id"),u.targetAnchor=e.get("anchorPointIndex"))),a.hideDelegation(),n&&n.hideAnchor(),h.update(a,u),h._updateRollback(),h.refresh(),t=void 0,a=void 0,u=void 0,o=void 0,c=void 0,e=void 0)})},_bindControlEdgeEvent:function(){var t,e,n,r,a,s,u,c,h,l,f,d,g=this,p=g.get("grid"),v=p&&p.forceAlign;g._on("click",function(n){t=n.item,e=g.getActived(),d=n.frontEvObj.shape,g.isEdge(t)&&t===e&&!d&&n.shape.get("hoverShape")&&(t.addControlPoint({x:n.x,y:n.y}),a=t.getControlPoints(),g.update(t,{controlPoints:a}),g._updateRollback(),g.refresh(!1))}),g._on("mousedown",function(t){if(d=t.frontEvObj.shape,d&&"control-point"===d.get("elCls")){if(n=d.get("item"),!g.isEdge(n))return void(n=void 0);if(l=d.get("pointIndex"),n.isExtremePoint(l))return n=void 0,void(l=void 0);r=d.get("point"),a=n.getControlPoints(),s=a[l-1],u=a[l+1]}}),g._on("dragmove",function(e){g.isEdge(n)&&(t=e.item,f={x:e.x,y:e.y,controlPointIndex:l},o.isInSegment(s,u,f)?f.stroke="red":f.stroke="blue",n.showDelegation(f),g.refresh(!1))}),g._on("mouseup",function(x){g.isEdge(n)&&(t=x.item,d=x.frontEvObj.shape,c={x:x.x,y:x.y},h={},n.hideDelegation(),o.isInSegment(s,u,c)?a.splice(l,1):0!==l&&l!==a.length-1&&(r.x=c.x,r.y=c.y,v&&i(r,p.cell),h.controlPoints=a),g.update(n,h),g._updateRollback(),g.refresh(),t=void 0,e=void 0,n=void 0,r=void 0,a=void 0,s=void 0,u=void 0,c=void 0,h=void 0,l=void 0,f=void 0,d=void 0)})},_bindControlNodeEvent:function(){var t,e,n,i,a,s,o,u=this,c=!1;u._on("mousedown",function(e){t=e.frontEvObj.shape,t&&"control-point"===t.get("elCls")&&(a=t.get("item"),s=t.get("point"),o=t.get("pointIndex"))}),u._on("dragmove",function(h){u.isNode(a)&&(c=!0,t=h.frontEvObj.shape,e={x:h.x,y:h.y},i=r(e,o,s,a),n=i.size,n[0]>5&&n[1]>5&&(a.showDelegation(i),u.refresh(!1)))}),u._on("mouseup",function(h){return u.isNode(a)&&c?(e={x:h.x,y:h.y},i=r(e,o,s,a),n=i.size,n[0]>5&&n[1]>0&&(u.update(a,i),u._updateRollback()),a.hideDelegation(),u.refresh(),a=null,t=void 0,e=void 0,n=void 0,i=void 0,a=void 0,s=void 0,c=!1,void(o=void 0)):(a=void 0,void(c=!1))})},_bindMultiSelectEvent:function(){var t,e,n,i,r,u,c,h,l,f,d,g=this,p=g.get("frontRootGroup"),v=!1;g._on("mousedown",function(t){i=t.item,r=t.frontEvObj.shape,i||u||r||(c={x:t.x,y:t.y},u=p.addShape("rect",{attrs:s.frameRectStyle}),g.set("frameSelecting",!0))}),g._on("dragmove",function(t){u&&(h=Math.min(c.x,t.x),l=Math.min(c.y,t.y),f=Math.max(c.x,t.x),d=Math.max(c.y,t.y),u.attr({x:h,y:l,width:f-h,height:d-l}),g.refresh(!1))}),g._on("mouseup",function(){u&&(t=g.get("itemCache"),a.each(t,function(t){e=t.getBBox(),n=[{x:e.x,y:e.y},{x:e.x,y:e.maxY},{x:e.maxX,y:e.y},{x:e.maxX,y:e.maxY}],a.each(n,function(e,i){if(v=o.isInRect(e,h,l,f,d),g.isNode(t)){if(v)return g.setActivedItem(t),!1}else{if(!v)return!1;i===n.length-1&&g.setActivedItem(t)}})}),u.remove(!0),g.refresh(!1),g.set("frameSelecting",!1),i=void 0,u=void 0,c=void 0,h=void 0,l=void 0,f=void 0,d=void 0)})},_bindZoomEvent:function(){var t,e,n,i=this,r=i.get("el"),a=1,s=1.05,u=i.get("rootGroup"),c=u.get("canvas");r.onmousewheel=function(r){r.preventDefault(),t=r.wheelDelta,Math.abs(t)>10&&(e=c.getPointByClient(r.clientX,r.clientY),e={x:e.x/c.get("pixelRatio"),y:e.y/c.get("pixelRatio")},n=u.getMatrix().clone(),t>0?(a*=s,o.scaleMatrix(s,e,n),i.updateMatrix(n),i.refresh()):(a/=s,o.scaleMatrix(1/s,e,n),i.updateMatrix(n),i.refresh()))}},_bindKeyboardShortcut:function(){var t=this,e=t.get("el"),n=!1;e.style.outline="none",e.setAttribute("tabIndex",-2),e.onclick=function(){e.focus()},e.onkeydown=function(e){if(e.preventDefault(),!n)return 32===e.keyCode&&("drag"===t.get("editMode")?t.changeMode("select"):t.changeMode("drag"),n=!0),e.metaKey&&67===e.keyCode?void t.copy():e.metaKey&&86===e.keyCode?void t.paste():e.metaKey&&e.altKey&&90===e.keyCode?void t.redo():e.metaKey&&90===e.keyCode?void t.updo():e.ctrlKey&&67===e.keyCode?void t.copy():e.ctrlKey&&86===e.keyCode?void t.paste():e.ctrlKey&&e.altKey&&90===e.keyCode?void t.redo():e.ctrlKey&&90===e.keyCode?void t.updo():8===e.keyCode?void t.del():void 0},e.onkeyup=function(){n=!1,t.fire("keyup")}}}),t.exports=u},function(t,e,n){"use strict";var i=n(1),r=function(){};r.ATTRS={zoomable:!0,dragable:!0,resizeable:!0,selectable:!0,multiSelectable:!1,shortcutable:!1},i.augment(r,{_initMode:function(){var t=this.get("editMode"),e="_"+t+"Mode";this._off(),i.isFunction(this[e])&&this[e]()},_addMode:function(){this._changeCss({cursor:"pointer"}),this._bindAddNodeEvent(),this._bindAddEdgeEvent()},_dragMode:function(){this._bindDragCanvasEvent(),this._changeCss({cursor:"move"})},_selectMode:function(){var t=this,e=t.get("resizeable"),n=t.get("dragable"),i=t.get("selectable"),r=t.get("multiSelectable");t._changeCss({cursor:"default"}),e&&(t._bindControlNodeEvent(),t._bindControlEdgeEvent()),n&&(t._bindDragEdgeEvent(),t._bindDragNodeEvent()),i&&t._bindClickBlankEvent(),i&&r&&n?t._bindMultiSelectEvent():this._bindDragCanvasEvent("ignoreElement")},changeMode:function(t){this.set("editMode",t),this._initMode()}}),t.exports=r},function(t,e,n){"use strict";var i=n(1),r=n(23),a=n(7);r.registGeom("edge",{defaultShapeType:"line",getPath:function(t,e){var n=this.getShape(t);return!!i.isFunction(n.getPath)&&n.getPath(e)}}),r.registEdge("line",{draw:function(t,e){return a.drawEdge("line",t,e,!1,"line")}}),r.registEdge("arrow",{draw:function(t,e){return a.drawEdge("line",t,e,!0,"line")}}),r.registEdge("smooth",{getPath:function(t){return a.getEdgePath("bezierCurve",t,"curve","auto")},draw:function(t,e){return a.drawEdge("bezierCurve",t,e,!1,"curve","auto")}}),r.registEdge("smoothArrow",{getPath:function(t){return a.getEdgePath("bezierCurve",t,"curve","auto")},draw:function(t,e){return a.drawEdge("bezierCurve",t,e,!0,"curve","auto")}}),r.registEdge("bezierHorizontal",{getPath:function(t){return a.getEdgePath("bezierCurve",t,"curve","horizontal")},draw:function(t,e){return a.drawEdge("bezierCurve",t,e,!1,"curve","horizontal")}}),r.registEdge("bezierVertical",{getPath:function(t){return a.getEdgePath("bezierCurve",t,"curve","vertical")},draw:function(t,e){return a.drawEdge("bezierCurve",t,e,!1,"curve","vertical")}}),r.registEdge("bezierQuadratic",{getPath:function(t){return a.getEdgePath("bezierQuadratic",t,"curve")},draw:function(t,e){return a.drawEdge("bezierQuadratic",t,e,"curve",!1)}})},function(t,e,n){"use strict";function i(){return[[0,.5],[1,.5],[2,.5],[3,.5]]}function r(t){var e=t.size[0],n=t.size[1],i=l.mix({},f.nodeStyle,{x:t.x-e/2,y:t.y-n/2,width:e,height:n}),r=l.mix({},y,{attrs:i,zIndex:f.zIndex.node});return t.color&&(i.stroke=t.color,i.fill=t.color),t.style&&l.mix(i,t.style),r}function a(t){var e=t.x,n=t.y,i=t.size[0],r=t.size[1],a=l.mix({},f.nodeStyle,{points:[[e,n-r/2],[e+i/2,n],[e,n+r/2],[e-i/2,n]]}),s=l.mix({},y,{attrs:a,zIndex:f.zIndex.node});return t.color&&(a.stroke=t.color,a.fill=t.color),t.style&&l.mix(a,t.style),s}function s(t){var e=t.size[0],n=t.size[1],i=g.getEllipsePath(t.x,t.y,e/2,n/2),r=l.mix({},f.nodeStyle,{path:i}),a=l.mix({},y,{attrs:r,zIndex:f.zIndex.node});return t.color&&(r.stroke=t.color,r.fill=t.color),t.style&&l.mix(r,t.style),a}function o(t){return l.mix({},f.nodeLabelStyle,{text:t.label,x:t.x,y:t.y})}function u(t,e){e.attr({y:e.attr("y")+t.attr("height")/2+v})}function c(t){var e=t.getBBox(),n=e.maxX-e.minX,i=e.maxY-e.minY,r=n+2*p[1],a=i+2*p[0];return[r,a]}function h(t,e,n){var i,r;return n=n?n:c,t.label&&(i=l.mix(o(t),t.labelStyle),r=e.addShape("text",{attrs:i,zIndex:f.zIndex.nodeLabel}),t.size||(t.size=n(r))),t.size||(t.size=[x,x]),l.isNumber(t.size)&&(t.size=[t.size,t.size]),r}var l=n(1),f=n(9),d=n(23),g=n(7),p=[8,16],v=5,x=50,y={zIndex:0};d.registGeom("node",{defaultShapeType:"rect",getAnchorPoints:function(t,e,n){var i=this.getShape(t);return!!l.isFunction(i.getAnchorPoints)&&i.getAnchorPoints(e,n)}}),d.registNode("rect",{draw:function(t,e){h(t,e);var n=e.addShape("rect",r(t));return n},getAnchorPoints:i}),d.registNode("rhombus",{draw:function(t,e){h(t,e,function(t){var e=t.getBBox(),n=e.maxX-e.minX+2*p[1],i=e.maxY-e.minY+2*p[0],r=Math.sqrt(n/2*i/2),a=n+r,s=i+r;return[a,s]});var n=e.addShape("polygon",a(t));return n},getAnchorPoints:i}),d.registNode("text",{draw:function(t,e){t.labelStyle&&!t.labelStyle.fill&&t.color&&(t.labelStyle.fill=t.color),t.color&&(t.labelStyle={fill:t.color}),t.size&&(l.isArray(t.size)&&(t.labelStyle={fontSize:Math.min(t.size[0],t.size[1])}),l.isNumber(t.size)&&(t.labelStyle={fontSize:t.size}));var n=h(t,e);return n},getAnchorPoints:i}),d.registNode("circle",{draw:function(t,e){h(t,e,function(t){var e,n,i,r,a,s=t.getBBox(),o=s.maxX-s.minX+2*p[1],u=s.maxY-s.minY+2*p[0];return e=(o+u/2)/2,n=Math.acos(o/2/e),
a=2*(Math.sin(n)*e),r=2*e,o<u&&(i=a,a=r,r=i),[r,a]});var n=e.addShape("path",s(t));return n},getAnchorPoints:function(){return[[0,0],[0,.5],[0,1],[1,.5],[1,1],[2,.5],[2,1],[3,.5]]}}),d.registNode("image",{draw:function(t,e){var n,i,r=t.shape,a=l.isArray(r)?r[1]:r,s={img:a};if(t.size||(t.size=x),s.width=l.isArray(t.size)?t.size[0]:t.size,s.height=l.isArray(t.size)?t.size[1]:t.size,s.x=t.x-s.width/2,s.y=t.y-s.height/2,i=e.addShape("image",{attrs:s,zIndex:f.zIndex.node}),t.label){var c=l.mix(o(t),t.labelStyle);c.textBaseline="top",n=e.addShape("text",{attrs:c,zIndex:f.zIndex.nodeLabel}),u(i,n)}return i},getAnchorPoints:i})},function(t,e,n){"use strict";var i=n(1),r={findDOMByClass:function(t,e){return t.getElementsByClassName(e)[0]},getDOMHeight:function(t){var e=i.getStyle(t,"height");return"auto"===e&&(e=t.offsetHeight),parseFloat(e)},getDOMWidth:function(t){var e=i.getStyle(t,"width");return"auto"===e&&(e=t.offsetWidth),parseFloat(e)},createDOM:function(t,e){var n=i.createDom(t);return n.hide=function(){return n.style.visibility="hidden",n},n.show=function(){return n.style.visibility="visible",n},n.css=function(t){return i.modiCSS(n,t),n},n.width=function(){return r.getDOMWidth(n)},n.height=function(){return r.getDOMHeight(n)},n.destroy=function(){n.parentNode.removeChild(n)},n.css(e),n}};t.exports=r},function(t,e,n){"use strict";function i(t,e){return Math.abs(t.x-e.x)>Math.abs(t.y-e.y)}function r(t,e,n,r,a){var s=[];if("horizontal"===n)s.push({x:1*(t.x+e.x)/2,y:t.y}),s.push({x:1*(t.x+e.x)/2,y:e.y});else if("vertical"===n)s.push({x:t.x,y:1*(t.y+e.y)/2}),s.push({x:e.x,y:1*(t.y+e.y)/2});else{var o=Math.abs(e.x-t.x),u=Math.abs(e.y-t.y),c=t,h=e;r&&r.getCenter&&(c=r.getCenter()),a&&a.getCenter&&(h=a.getCenter()),i(t,c)||t===c&&u<o?s.push({x:1*(t.x+e.x)/2,y:t.y}):s.push({x:t.x,y:1*(t.y+e.y)/2}),i(e,h)||e===h&&u<o?s.push({x:1*(t.x+e.x)/2,y:e.y}):s.push({x:e.x,y:1*(t.y+e.y)/2})}return s}function a(t,e){var n={x:(t.x+e.x)/2,y:(t.y+e.y)/2},i=u.vector(e,t),r=i.vertical(),a=i.length();return r.setLength(.2*a),[h.add(n,r)]}var s=n(1),o=n(2),u=n(24),c=n(25),h=o.Vector2,l={bezierCurve:function(t,e,n,i){var a=t[0],o=t[t.length-1],u=["M",a.x,a.y],c=r(a,o,e,n,i),h=["C"],l=[u];return s.each(c,function(t){h.push(t.x,t.y)}),h.push(o.x,o.y),l.push(h),l},bezierQuadratic:function(t){var e=t[0],n=t[t.length-1],i=["M",e.x,e.y],r=a(e,n),o=["Q"],u=[i];return s.each(r,function(t){o.push(t.x,t.y)}),o.push(n.x,n.y),u.push(o),u},line:function(t){var e=c.pointsToPolygon(t);return e}};t.exports=l},function(t,e,n){"use strict";function i(t,e){var n={};return n.arrow=e,t.color&&(n.stroke=t.color),t.size&&(n.lineWidth=t.size),a.mix({},h.edgeStyle,n,t.style)}function r(t,e,n){if(t.label&&t.source!==t.target){var i=n.getPoint(.5),r=a.mix({},h.edgeLabelStyle,{text:t.label,x:i.x,y:i.y},t.labelStyle),s=e.addShape("text",{attrs:r,zIndex:h.zIndex.edgeLabel}),o=s.getBBox(),u=o.maxX-o.minX,c=o.maxY-o.minY,l=u+2*f,d=c+2*f;e.addShape("rect",{attrs:a.mix({x:i.x-l/2,y:i.y-d/2,width:l,height:d},h.edgeLabelRectStyle),zIndex:h.zIndex.edgeLabelBackground})}}var a=n(1),s=n(25),o=n(2),u=n(42),c=n(121),h=n(9),l=o.Vector2,f=5,d={getEdgePath:function(t,e,n,i,r,a){return 2===e.length?c[t](e,i,r,a):"curve"===n?s.pointsToBezier(e):s.pointsToPolygon(e)},drawEdge:function(t,e,n,a,s,o){var u,c=i(e,a),l=d.getEdgePath(t,e.points,s,o,e.source,e.target);return c.path=l,u=n.addShape("path",{attrs:c,zIndex:h.zIndex.edge}),r(e,n,u),u},arrowTo:function(t,e,n,i,r,a,s){var o=new l(1,0),u=new l(a-i,s-r),c=u.angleTo(o,!0);return t.transform([["r",c/(2*Math.PI)*360],["t",e,n]]),t},snapPreciseAnchor:function(t,e){var n=e.getInterPointByPath(t),i=u.getSnapAnchor(e,n);return i}};t.exports=d},function(t,e,n){"use strict";var i=n(27);setTimeout(function(){if(i.tracking){var t=new i;t.log({g6:!0,version:"0.1.0",page_type:"page"})}},2e3)}])});